# 选择正确的云成本管理方法|利用

> 原文：<https://www.harness.io/blog/cloud-cost-management-methods>

如果你使用云基础设施，你肯定需要想办法在某个时候优化你的成本。根据您的成熟度，有几种不同的方法可以用来管理您的云成本——探索这些方法以及何时使用它们。

云计算的出现使我们能够比以往任何时候都更快地开发和运输，但我们很快意识到(如果我们还没有意识到的话)这是有代价的:**我们在云上的花费比我们预期的多得多**。我们现在的战斗不是提高我们的创新速度，而是云成本管理——管理和优化更快创新带来的成本。

虽然我们希望让开发人员能够快速构建、测试和部署代码，但我们同时也希望尽可能提高我们的支出效率。无论是财务团队、运营团队、工程团队还是热门的 FinOps 团队，都有人在努力控制云成本！

让我们来看几个我们可以切实采取的方法，以了解和管理云成本。

## 方法 1:手动云成本管理

**优点缺点**完成小规模运营的工作需要强有力的治理来扩大规模保持较低的管理成本手动操作且容易出错使用本机工具容易上手可能会错失节省成本的机会

### 谁应该使用这种方法？

通常，这种方法最适用于早期创业公司，在某些情况下，也最适用于成长中的中小企业，当满足以下要求时，这种方法最有效:

*   只有足够的云资源来轻松记忆的团队
*   能够确保其资源车队 100%标签完整的团队
*   更关心快速增长而不是成本优化的团队

#### **电子表格方法**

自然，我们可以通过在电子表格中跟踪我们使用的内容和位置来管理我们的云成本。有道理而且看起来很简单，对吗？当我们构建十个 AWS EC2 实例和三个 S3 桶时，这种方法很有意义，但是任何做过自己管理的人都知道，这很快就变成了一件苦差事，事实上，当我们扩展时，这是不可能的——特别是当我们开始引入容器之类的东西时。

想想管理 13 个 AWS 资源所涉及的工作。现在，想想如果你引入了容器化，并分解了管理这些资源的复杂性，那将意味着什么:你必须跟踪容器和资源如何相互映射，以及在任何给定的时间点的使用情况，如果你手动操作，很难得到正在发生的事情的准确统计。

工作量看起来如下——随着我们要管理的云资源越来越多，手动管理它们所需的工作量呈指数级增长。

*Great for business, terrible for your workload.*

#### **通过标记简化手动管理**

如果这种模式最适合我们的组织，这并不难！事实上，云提供商已经创建了一个名为**标记**的概念，以便我们能够组织和管理我们的云资源。然后，我们可以利用云提供商的内置成本控制面板，根据我们对这些资源的标记来查看哪些东西的成本。

标签本质上是分配给每个资源的键值对，就像在散列表中一样。它们允许我们定义如何标识资源，并分配惟一标识资源所需的键值。例如，在我们的小资源池中，我们知道要唯一地标识一个资源，我们只需要知道所有者和应用程序，因此我们可以相应地标记任何资源。在这种情况下，我们可能会在我们的三个 AWS S3 桶上使用标签，上面写着{ " owner:foo "；“申请:吧”}、{“所有者:乔”；“应用程序:schmoe”}，以及{“所有者:sally”；"应用程序:pally"}。有了这种识别能力，我们可以进入我们的 AWS Cost Explorer 仪表板，准确了解这些资源的成本，并非常容易地将它们分配给我们的内部模型。

最终，这样做在很大程度上依赖于围绕云资源的使用创建强有力的治理。我们希望在识别资源的方式上保持一致，不管它们是如何被调用的，并遵循一个识别模式，让我们有效地分组并找到资源，以便跟踪成本并最终优化它们。在这一点上，我们可以在任何时候来做一个成本计算练习，看看成本来自哪里，以及我们如何能够优化它们。

这总是冒着被错误标记或根本不被标记的风险，并且随着时间的推移，维护策略和验证标记的负担将落在我们身上。这种策略依赖于良好的标签覆盖和良好的标签准确性来理解成本，这可能并不总是奏效，失败会破坏整个策略。另一方面，它确实带来了给我们很多控制的好处，我们肯定会比以前更好地了解我们的成本！

## 方法 2:使用云成本管理软件

**优点缺点**了解云成本和优化机会的简单方法可能会耗费大量资金将管理云资源的大量手动工作自动化在组织中创建“云成本管理”功能，可能会造成更多效率低下标签卫生已成为过去，包装根本问题

### 谁应该使用这种方法？

通常情况下，这种方法最适合于处于**SMB**或**早期中端市场**的公司，并且在满足以下要求时最为有效:

*   多个团队使用多组不同的云资源的组织
*   团队不能仅仅依靠良好的治理和标签卫生来了解成本
*   希望在某个时间点或定期控制成本的团队

对于那些尝试使用手工方法的人来说，我们知道为了理解成本和创造更高的效率，正确地跟踪和标记所有的资源几乎是不可能的。事实上，试图维护标签卫生有时会造成比它所解决的更低的效率，这使它成为一种在我们扩展时管理云成本的低效方法。

在这一点上，我们强烈希望考虑某种管理软件，无论它是内部构建的还是由供应商提供的，以帮助解决一些核心问题:

*   根据使用模式发现节约或优化机会
*   跟踪成本到其适当的资源或事件(包括潜在的执行和维护标签卫生)
*   根据预算确定潜在的成本超支，并主动解决这些问题

在这一点上，我们可以自信地说我们**了解我们的云成本**。

#### **自上而下的云成本管理的兴衰**

但是谁了解云成本，谁负责了解它们？我们必须意识到，有了[云成本管理软件](https://harness.io/platform/continuous-efficiency/)，我们已经颠覆了剧本。当我们很小的时候，工程师拥有并管理资源和成本，但是使用成本管理软件**我们从自下而上的云成本管理转变为自上而下的**:工程师负责创新，而经理(通常坐在几个不同的团队之间，没有背景)负责管理成本。

有了成本管理软件，我们突然抽象出了手动管理云成本所需的大量非常困难的工作，并且我们很有可能会节省大量成本，而这些成本之前并没有通过一些很好的“保留”资源定价或合理调整机会发现。这是一个很好的机会，我们能够得到这个视图没有任何标记！不喜欢什么？

这种自上而下的管理方法的承诺在流程的早期就实现了，并且价值实现的时间肯定被最小化了，因为有大量的前期机会来优化云资源群。但有一个警告:即使在我们可以跟踪每一项资源并识别每一个节约机会的情况下，也很难真正实施它们，因为很有可能，我们不能只是去做改变。我们将不得不应对单个预算所有者、CI/CD 问题和速度，并将多个所有者和功能捆绑到每个对话中。

*Having a separate cloud cost ownership function doesn’t work in practice.*

这不仅意味着我们发现的节约可能永远不会真正实现，还意味着我们解决了一个问题却碰了壁。作为一个自上而下的成本优化者，你无法解决这些问题，就像一个呆在家里的纸上谈兵的分析师无法做与地面人员相同的工作一样。

我们现在肯定能理解我们的成本，但我们并没有真正更好地管理它们或优化它们，这是整个想法。

事实证明，云成本管理软件提供了关于正在发生的事情的很好的时间点视图，并在高层次上自动化了一些关于要做什么的思考，但它实际上只是做同样的手动管理的更好的方式，所以现在我们开始花时间试图说服他人进行成本优化，而不是试图首先找到优化。我们已经取得了进展，但这种情况还远远不够理想。

如果我们真的想创建一个长期可扩展的模型，我们必须考虑传统云成本管理软件提供的自上而下的方法是否最适合我们的需求。高层次的观点和强有力的建议是很棒的，但这种实施成功战略的方法并不适用于所有人。对于这些人来说，重要的是解决核心效率问题，并解决另一种具有挑战性的问题。

## 方法 3:协作式云成本管理

**优点缺点**在整个组织中分散云成本的责任成本，潜在地大量解决云成本管理不当的根本问题重新培训工程团队和习惯的高额前期成本可扩展，并使团队从被动转变为主动关注云成本如果没有合适的工具，实施起来会很棘手

### 谁应该使用这种方法？

这种方法适用于所有阶段的公司，尤其适用于**成长型中小企业**、**中型企业**，尤其是**企业**。满足以下要求时最有效:

*   拥有大型分布式云资源组的团队，包括集装箱车队
*   需要快速跟踪和了解成本而无需开销的团队
*   希望创造云成本效益、平衡成本而不减缓创新的团队

云成本管理软件有很多好的方面，我们肯定希望保留这些。特别是，无论我们选择哪种解决方案，我们都希望确保我们能够有一个简单的视图来帮助我们了解我们的云成本。但我们希望摆脱自上而下的云成本管理，因为我们看到，随着我们向更高的高度扩展，它会产生许多低效问题，并且没有触及问题的核心:构建东西的工程团队。

我们希望我们的工程师制造出令人敬畏的东西，我们不想减慢他们的速度。毕竟，这就是我们转向云计算并创造这种创新模式的全部原因。与此同时，我们无法回避这样一个事实，即这种模式带来了成本问题，我们希望提高效率。

让我们后退一步，看看我们都知道些什么:

1.  当有一个小型工程团队可以自己跟踪成本时，事情确实很好，但这是不可扩展的，在我们的规模下肯定不是这样
2.  我们可以对我们的成本和优化机会创建强大的离散或时间点视图，但当我们能够完成任何事情时，它已经过时了
3.  我们希望持续高效，而不是分散高效，但不牺牲看到全局的能力，包括成本分析和全机优化机会

长话短说，我们希望在我们能够自己处理的时候拥有控制权，我们希望保持快速发展，我们希望规模化经营。没有必要去想象*这是否会发生，因为这就是协同成本管理的由来。*

协作成本管理模型充分利用了自下而上的资源所有权以及自上而下的事件视图。接下来要回答的问题是如何实现这样一个模型。

#### **实施协同成本管理**

该模型的核心由两部分组成。首先，我们需要一个自上而下的视角——我们已经从成本管理解决方案中得到了这一点。第二，我们需要让工程师回到成本领域，让他们能够跟踪和管理他们的成本——我们已经可以跟踪资源层面的成本，因此这种自下而上的需求已经开始得到解决。

如果我们能做到这两点，突然之间，我们比以往任何时候都更好地了解了我们的总体成本，而且我们做得更快。想象一下:当我们查看云成本的时间点视图并有疑问时，1)我们可以轻松找到答案，而不必花时间去寻找预算所有者；2)我们发现我们已经很好地控制了成本，因为工程师们从一开始就掌握了成本。在这种情况下，我们从不担心我们的成本，我们仍然在快速创新，现在我们已经创造了成本效益。

要创建这个模型，我们需要合适的工具，这是一个让工程师参与进来的问题。当然，工程师需要培训，但是我们也需要工具来使他们的参与成为可能。希望我们的成本管理解决方案能让这一切变得简单。

一旦工程师知道他们负责什么以及如何保持领先，我们就可以开始比赛，并拥有一个新的高效的协作云成本管理模型。一切都很容易做到！

## 简化云成本管理

插头在这里:[驾驭云成本管理](https://harness.io/continuous-efficiency/)。我们想要的云成本管理模型中的所有好东西都已经打包好了，并且内置在软件中，因此大部分繁重的工作已经完成。最精彩的部分？它是 [CI/CD 平台](https://harness.io/blog/what-is-cicd-platform-why-should-i-care/)的一部分，因此它直接与您通常的工程流程联系在一起，而不是在长长的列表中添加另一个工具。

*   我们可以进行云成本分析，了解高层发生的情况，对数据进行分割，找到应用程序级别的各个资源，并找到大量优化机会。
*   [云成本](https://harness.io/blog/reduce-cloud-costs/)中的某样东西？酷，让我们去找出当时正在发生的事件，并在它滚雪球之前把它钉下来，即使它是在亚马逊 ECS 或 Kubernetes。
*   每个人都需要预算，甚至现在的工程师也需要预算。我们可以将它们设置在任何级别，并跟踪它们的资源成本，甚至可以看到预测结果，以便我们可以在月底出现问题之前处理它。

您想了解更多关于现有工具的信息吗？我们制定了要考虑的顶级[云成本管理工具](https://harness.io/blog/cloud-cost-management-tools/)。

管理云成本是个大问题，但确实不应该。我们征服了数据中心，为什么不能征服云？免费试用驾驭云成本管理，让您的[云成本管理](https://harness.io/platform/cloud-cost-management/)变得简单。