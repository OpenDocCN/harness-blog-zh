# 什么是持续部署？信息、流程和更多|线束

> 原文：<https://www.harness.io/blog/continuous-deployment>

什么是持续部署？与连续交付有什么不同？甚至是持续集成？别担心，我们有答案。

## 持续部署简介

导航到谷歌并输入“DevOps Continuous…”返回的词比搜索页面能容纳的还要多。持续集成、持续交付、持续部署、持续监控…等等等等。坦白地说，事情有点失控了。

*We weren’t kidding.*

连续什么都成了新的行业流行语。不幸的是，这使得很难定义和研究这些术语的含义；尤其是当这些术语看起来完全相同的时候。示例:连续交付与连续部署。这两者到底有什么区别？区别只是语义吗？事实证明，部署和交付有很大的区别。连续部署过程和部署管道是连续交付过程的一部分，但是每一个都努力达到不同的目标。

在本文中，我们将比较持续部署和持续交付的方法。我们还将深入探讨持续部署，以确保您理解它将如何惠及您的开发团队。

## 持续部署与持续交付

顾名思义，持续部署侧重于功能和更新的安装和分发。一般来说，在持续的集成过程之后，应用程序将会经过几个较低级别的环境，在这些环境中，QA 团队可能会运行回归测试、[单元测试](https://harness.io/blog/continuous-integration-testing/)，或者利用测试自动化来确保代码的高质量。应用程序在通过较低级别的环境后，被推送到[生产环境](https://harness.io/blog/deployment-environments/)。我们将所有这些阶段的自动化称为连续部署管道。目标是通过使用各种触发器和可重复的步骤来减少所需的人工干预。

另一方面，连续交付包括连续部署的所有自动化步骤，但增加了安全性、合规性和验证的自动化，以降低与每次部署相关的风险。因此，持续交付管道(CD 管道)应该包括治理批准步骤，应该包括更安全的部署策略，如 [canary 和蓝绿色](https://harness.io/blog/blue-green-canary-deployment-strategies/)部署，还应该包括部署后验证，以确保一切对最终用户来说都是最佳的。

有关[持续部署和持续交付](https://harness.io/blog/continuous-delivery-vs-continuous-deployment/)之间的差异的更多信息，请查看链接的博客文章。

## 持续部署原则

### 第 1 部分:工件

一旦我们将新代码打包到工件中，持续部署就开始了。CI 流程完成后，有几种方法可供选择。一方面，工件可以存储在回购中，直到所述公司达到他们正常的部署节奏。延迟可能有各种原因:只提倡每周部署的部署文化，有更多法规遵从性规则的严格监管行业，没有太多较低级别的环境可供部署的公司。无论哪种方式，选择延迟初始部署过程的公司仍然可以在周期的后期实践连续部署。另一个选择是立即将新的代码变更部署到开发集成和/或质量保证环境中，以开始集成测试。由于这些较低级别的环境带来的风险较低，因此开始集成持续部署思维方式通常是容易实现的。

### 第 2 部分:自动化部署

下一步是考虑在较低级别的环境之间自动进行部署。这就是开始利用管道来标准化部署的重要性所在。在软件开发每天产生几个可部署的工件的理想世界中，非标准化的实践可能很快成为瓶颈。这个游戏的名字是创建一个管道，这个管道容易被其他开发人员理解，对于每个部署都是可重复的，并且可以扩展到其他团队。公司遇到的一个陷阱是为每个环境和每个团队创建独特的部署管道。虽然乍一看，创建超级特定的部署策略可能是有意义的，但它最终会成为维护的噩梦。将工件部署到测试应该不超过几分钟，并且应该需要最少的维护来保持这些管道的运行。

### 第 3 部分:生产

持续部署的最后一个主要组件是生产部署本身。生产的最低黄金标准是执行滚动部署。这种类型的部署以增量方式替换旧的应用程序节点，通常是一个接一个地替换，直到所有节点都是新版本。这是切换到新版本的安全方式，同时使用验证工具来确保部署成功。其他潜在的部署方法包括蓝绿色部署和金丝雀部署。值得注意的是，应该在公司的应用程序中使用标准部署策略，以降低扩展的复杂性。

## 
在实践中不断部署

讨论持续部署是一回事。在组织中实施实践是另一回事。这里有一些 Harness 客户的例子，他们正在向真正的持续部署过程迈进。

[Choice Hotels](https://cms.harness.io/uploads/Choice_Hotels_Case_Study_0579543f5d.pdf) 花费了大量的资源来创建自动化，但是没有一个好的方法来将所有的自动化精简成一个连续的流程。这意味着部署只能在每周晚上 10 点进行一次，总共需要 12 个小时。Harness 帮助 Choice 利用自动化将部署工作缩短到 2 小时，并让团队在一周内的任何时间进行部署。引用客户的话:“Harness 通过将一切都简化到一个管道中，帮助我们利用我们在自动化工具上的投资。”

[Zepto](https://harness.io/customers/case-studies/increasing-deployment-velocity-7-x/) 厌倦了缓慢而不可靠的软件部署。“我们不得不使用最昂贵的业务资源来部署软件和维护脚本，”CTO Trevor Wistaff 说。这意味着 Zepto 每周只能部署两次。一旦他们的团队采用了 Harness，部署时间从 20 分钟减少到不到 1 分钟。速度和可靠性的提高让 Zepto 每天可以部署 3 次新功能。

## 最后的想法

随着组织规模的扩大，不同的利益相关者会希望自动化工程流程。然而，如果最终发布给客户的速度很慢，那么自动化程度有多高并不重要。持续部署策略应该可以缓解这种压力，并允许公司更快地向客户提供新代码和错误修复。

如果您仍然担心如何在您的组织中实现这一点，请查看 Harness。我们的 [CD 解决方案](https://harness.io/products/continuous-delivery/)可以抽象出持续部署的复杂性，因此您可以专注于构建优秀的软件。

想从 CD 上了解更多信息吗？我们很乐意向您推荐我们的电子书[管道模式](https://harness.io/learn/ebooks/ebook-pipeline-patterns/)。这是一个非常宝贵的资源，它将帮助您优化您的管道，以缩短生产时间&减少部署失败，选择最适合您需求的管道，等等。