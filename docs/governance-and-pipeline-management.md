# Ancestry 使用治理|治理将停机时间减少了 50%

> 原文：<https://www.harness.io/blog/governance-and-pipeline-management>

找出祖先是如何利用脊甲来保护他们的平台的。

## **关于**

Ancestry 是家族史和消费者基因组学的全球领导者，它让个人发现之旅能够丰富生活。凭借 Ancestry 无与伦比的超过 270 亿条记录的收藏和我们不断增长的 DNA 网络中的 1800 万人，客户可以发现他们的家庭故事，并获得对他们生活的新理解。30 多年来，他们与数百万选择他们作为发现、保存和分享他们故事的平台的人建立了信任的关系。

## **部署管道西野**

Ancestry 的软件部署就像狂野的西部，由首席架构师 Russ Barnett 来担任警长。每个 Ancestry 应用程序团队都构建了自己的定制 Jenkins 管道来部署软件。一些团队建立了复杂的管道，允许他们一天部署多次。一些团队几乎无法进入生产阶段。

我们表现得好像我们拥有先进的 CI/CD 文化，能够一天部署多次。事实是，我们没有基础设施来支持我们所有的团队。

> Russ Barnett |首席建筑师|血统

团队之间缺乏一致性开始影响 Ancestry 的正常运行时间。有缺陷的管道、不安全的部署策略和不可靠的回滚导致 Ancestry 的一些关键应用程序停机。有一次，一个支持 Ancestry.com 运行的关键应用程序宕机了四个小时。

Mock up computer pc on table with books and lamp.

Russ 知道他需要标准化 Ancestry 的部署过程。他试图将所有的应用程序团队整合到一个集中的测试工具中。这将有助于减少进入生产的问题数量。一年半后，该工具只有 20%的采用率。

我们需要做的任何管道变更都是一场彻头彻尾的噩梦。

> Russ Barnett |首席建筑师|血统

Russ 随后试图使金丝雀部署成为詹金斯管道的标准。金丝雀部署将使回滚和识别生产问题变得更加容易。开发人员花了两周的时间安装了两个系统。Ancestry 在 70 个团队中每个团队有 10 个系统。这相当于开发人员花了大约 13 年的时间来实现 canary 部署。

Russ 需要一种方法来控制他们无法控制的 Jenkins 管道。所以他转向了马具。

## **标准化带来稳定**

使用 Harness，Ancestry 能够在一年内搭载 350 个系统，预计在第二年年底全面采用。与 Jenkins 相比，这减少了 85%的工作量。

这些新的标准管道很容易改变和管理。金丝雀部署成为事实上的祖先部署策略，集中式测试工具的采用率上升到 97%。

Example Canary Pipeline in Harness

一旦团队使用了线束管道，我们就很容易添加额外的强制性步骤。

> Russ Barnett |首席建筑师|血统

管道治理的增加导致生产中断减少了 50%。其余的中断是由基础设施问题引起的，这些中断都与部署问题无关。

Harness 还有助于提高开发人员的工作效率，部署速度提高了 3 倍。

我们的团队最初对摆脱他们的 Jenkins Harness 管道持怀疑态度，但现在他们非常喜欢 Harness UI 及其给部署过程带来的便利。

> Russ Barnett |首席建筑师|血统

Russ 希望继续在 Harness 上提供更多服务，并进一步稳定 Ancestry 的平台。