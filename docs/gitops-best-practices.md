# 6 个可行的 GitOps 最佳实践，帮助您开始|利用

> 原文：<https://www.harness.io/blog/gitops-best-practices>

在调查 GitOps？阅读这篇文章，找到在开始使用 GitOps 时可以实施的可行的最佳实践。

GitOps 是一种借助自动化、容器化和编排技术来管理生产环境的相对较新的方法。GitOps 背后的想法是在将代码推向生产之前，让所有必要的基础设施组件都启动并运行。有了这样的自动化部署技术，每一个变更都以可预测的方式进行部署。然而，并不是每个人都有这种新方法的经验——或者甚至理解它是如何工作的。为了帮助您，我们汇编了六种可行的 GitOps 最佳实践，您可以使用它们开始这一新方向，以获得更好的结果和更有成效的协作。

## GitOps 的重要性

GitOps 是一种管理和部署软件的新方式。这不仅仅是关于 Git，而是整个工作流程。GitOps 是一套帮助您部署更加可靠、可重复和高效的软件的实践。GitOps 相对较新，很难理解它是如何工作的，以及它如何帮助您的团队。它基本上涉及到 Git 来存储所有的清单文件和 Kubernetes 来部署应用程序。公司必须超越开发运维，以高度可预测的方式部署其应用。GitOps 基本上使用 Git 这样的简单工具来管理您的部署，而不是重新发明轮子。

有了 GitOps，一切都归结于利用开发人员的时间和精力来帮助他们专注于重要的事情，比如开发客户想要的丰富功能，而不是弄清楚众多的工具，通过定制脚本相互连接，并使它们工作。GitOps 是一个救星——您的软件交付方法可以自动化。GitOps 欢迎开发人员参与运营，并认识到开发人员是基础设施团队的重要组成部分。

GitOps 的一个更重要的好处是，它提供了对整个应用程序堆栈的更多可见性，并帮助您实现更大的自动化，从而缩短部署时间。

简而言之，这种模式的主要好处是:

*   提高开发人员的工作效率。
*   跟踪时间变化的能力。
*   声明式方法中的一切。
*   简单的基础设施管理。
*   自动化和流程编排。
*   更好的连续交付。
*   通过代码安全策略提高安全性。
*   减少停机时间。

## GitOps 入门

对于早期采用 DevOps 原则的公司来说，GitOps 可能是他们已经在做的事情的一种进化。但是对于刚开始使用 GitOps 的人来说，最好的办法是从小处着手，然后从那里开始构建。

我真的很感谢你与 GitOps 共同前进的第一步；你是在正确和优秀的轨道上。在继续您的旅程之前，确保您已经在一个像 GitHub 这样的源代码控制管理系统上托管了您的代码，并且您的目标之一是在 Kubernetes 上部署。确保您已经在工作流程中使用了 Kubernetes。

下一步是确定工具/平台，以帮助您通过 GitOps 实现公司目标。然后，确定这些选定的工具将如何在您的工作流程范围内协同工作。当你一步一步完成每个阶段时，记录下所有的事情。您可能想在将来复制这种方法，或者与他人分享这些步骤来尝试。文档将确保其他人了解你在做什么，以及 GitOps 如何为他们服务。从那里，是时候部署了！

## 利用 GitOps 时要记住的最佳实践

GitOps 令人兴奋，但是如果你考虑到这些简单的、可操作的因素，开始会容易得多。

### 在您的组织中创建 GitOps 文化

要让 GitOps 发挥作用，你需要整个组织有正确的心态。不幸的是，公司在开始使用 GitOps 时犯的最大错误之一是，他们没有向参与该过程的每个人介绍它，让他们理解我们为什么要这样做，以及最终目标是什么。这看起来是一个小细节，但是忽略这一步会导致失败。

假设您的团队中有 20 人，其中 5 人负责运行自动化脚本。如果这 5 个人不知道 GitOps 到底是什么，他们将无法成功实现自动化部署。这会导致沮丧、错误和大量的时间浪费。定期为你的开发人员举办关于在你的组织中正确使用 GitOps 的培训会议，这样每个人都在同一页面上。

### 从小处开始，逐渐变大

一旦确定 GitOps 非常适合您的组织，就该逐步向前迈进了。无论您是否已经拥有自动化、编排和容器化技术的经验，开始使用 GitOps 的最佳方式是从小处着手。你不需要从一个复杂的环境开始，尝试自动化一切。相反，引入基本的 GitOps 实践，比如连续交付和部署自动化。

在任何云提供商上设置一个简单的 Kubernetes 集群，将 Git repo 与基础设施同步，并部署一个简单的 Nginx 服务器。通过这种方式，你将了解事情是如何运作的。

### 开始自动化部署

利用 GitOps 的[优势的目标之一是自动化部署。这意味着您编写的脚本和代码将自动部署您的更改，无需任何人工干预。因此，这是一种更加可重复、可靠和可预测的将代码变更和更新推向生产的方式。CI/CD 工具比其他任何方法都更好地提供了这种自动化。但是在开始之前，您应该了解这些工具是如何工作的，以及在自动化它们之前它们可以完成的任务类型。一些](https://harness.io/blog/devops/gitops-benefits/) [CI/CD 工具](https://harness.io/blog/devops/ci-cd-tools/)专注于部署自动化，而另一些则不强调部署。但是，它们仍然允许您自动执行配置、编译和许多其他任务，这些任务对于健康的 GitOps 工作流至关重要。

### 使用 GitOps 进行连续交付

持续交付是 GitOps 背后的基本概念之一。这个想法是要有一个随时准备好部署并能够支持新代码发布的生产环境。持续交付有助于您更快地开发新功能，因为您知道新功能一旦完成就会被部署。像 Harness CD 这样的强大工具可以帮助你无缝地完成这项工作。一个开发团队可以尽可能多次地将他们的代码部署到[生产环境](https://harness.io/blog/continuous-delivery/deployment-environments/)，并且不会影响其他任何人。此外，您不需要担心停机或服务中断，因为每次推送新的更改时，所有其他更改都会自动回滚。

### 标准化 GitOps 方法

随着您的组织向更成熟的 GitOps 实现发展，您需要标准化某些事情，以确保每个人都在同一页面上。需要注意的一件重要事情是实施集群或基础架构更改的方式。然后，决定是利用 GitOps 的拉方法还是推方法。最佳实践通常是不要将任何东西直接推送到主分支。相反，强烈建议使用拉方法，这样拉请求可以作为一个应用程序，以确保您的更改在工作流中系统而安全地进行。此外，对自动化的关注——无需任何人工干预即可重复的自动化任务。

### 使用一流的工具

GitOps 可能相当新，但它正在获得更多的关注。许多组织喜欢进行试验，看看他们如何从这种方法中获益。然而，由于学习曲线是直接的，这无疑将是未来几个月中快速软件交付的关键技术。同样重要的是，要想出一种工具/平台来实现 GitOps 梦想。一些著名的工具，如 FluxCD、Argo CD 和 Jenkins X，使 GitOps 易于设置，并使软件部署更快。还有像 Harness 这样的平台，使用开源的 Argo CD GitOps 方法，使 [GitOps 变得轻而易举](https://harness.io/blog/continuous-delivery/harness-gitops-deployments/)，增加了高安全性、可见性、高级仪表板等优势。

## 结论

毫无疑问，GitOps 因其简单、易于设置和较短的学习曲线而成为全球开发人员的最爱。GitOps 可以被认为是 DevOps 的扩展版本。GitOps 仍然是一种新的方法，已经在开发人员社区中获得了广泛的欢迎。

GitOps 帮助开发人员专注于编写功能和创建应用程序。它减少了开发人员配置基础架构和管理复杂操作相关任务的时间。GitOps 可以通过 Argo CD、FluxCD、Jenkins X 和 Harness 等简单工具实现。试一试；你会喜欢的！

要参加 Harness GitOps 测试版，只需[填写表格](https://harness.io/gitops-beta/)，我们会与您联系。