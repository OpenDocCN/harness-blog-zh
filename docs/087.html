<html>
<head>
<title>Harness Continuous Delivery Supports Helm V3 | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>线束连续交付支持Helm V3 |线束</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/welcome-to-the-harness-family-helm-v3#0001-01-01">https://www.harness.io/blog/welcome-to-the-harness-family-helm-v3#0001-01-01</a></blockquote><div><p>欢迎来到马具家族，圣盔V3！你的无舵方式在这艘船上很受欢迎。在马具社区的推动下，我们回答。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>自从几年前在首届KubeCon上被介绍以来，<a href="https://kubernetes.io/"> Kubernetes </a>、<a href="https://helm.sh/"> Helm </a>的实际包装经理已经经历了一次演变。赫尔姆的最新版本是去年底发布的<a href="https://helm.sh/blog/helm-3-released/">赫尔姆V3 </a>。<br/></p><p>过去反对赫尔姆的一个论点是一个名为<a href="https://v2.helm.sh/docs/using_helm/#installing-helm">蒂勒</a>的高架<a href="https://kubernetes.io/docs/concepts/workloads/pods/">库本内特斯吊舱</a>用于行刑。尽管Helm项目确实考虑到了所有的问题，并重新设计了Helm V3，不再依赖于Tiller。<br/></p><p>Harness最近在我们的平台中发布了对Helm V3的支持。让我们看看如何利用您的第一个Helm V3部署。不过，如果你对赫尔姆不熟悉，我们可以沿着记忆之路走一走。<br/></p><h2>舵更新器</h2><p>这里有很多与头盔相关的资源可以利用。我们已经完全打破了<a href="https://harness.io/blog/what-is-helm/" target="_blank">掌舵</a>并主持了<a href="https://harness-1.wistia.com/medias/ext8gfgpje">最近的网络研讨会</a>让你变得危险。虽然作为一个<a href="https://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn%27t_read"><em>TL；博士</em> </a> Helm是Kubernetes类似于<a href="https://brew.sh/">家酿</a>、<a href="https://en.wikipedia.org/wiki/RPM_Package_Manager"> RPM </a>、<a href="https://chocolatey.org/">巧克力</a>等的包管理器。Helm使用<a href="https://helm.sh/docs/topics/charts/">图表</a>和<a href="https://helm.sh/docs/topics/chart_best_practices/templates/">模板</a>来处理约定概念。<br/></p><p>在之前的博客系列中，我们利用了一个<a href="https://aws.amazon.com/eks/">亚马逊EKS集群</a>作为我们的Kubernetes端点，并演示了如何使用<a href="https://eksctl.io/"> EKSCTL </a>来设置一个集群，并在您的机器上安装<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/"> KubeCTL </a>。我们将再次利用EKS。虽然您可以将这个例子移植到您喜欢的Kubernetes端点。Helm V3简化了所需的步骤。</p><h2>您的第一个Helm V3部署</h2><p>利用Helm V3简化了操作步骤，因为我们不再需要部署Tiller。</p><p>喜欢总是可以跟进博客和/或观看视频。</p><h3>Kubernetes基础设施</h3><p>我有一个名为“手提袋中的头盔”的空EKS星团</p><p>你需要安装一个<a href="https://developer.harness.io/docs/getting-started/learn-harness-key-concepts/">线束代理</a>。在这种情况下，我们可以在EKS的Kubernetes集群中安装一个Harness委托。这是简单的可以下载所需的Kubernetes YAML和申请。<br/></p><p>导航到线束平台，然后设置-&gt;线束代理-&gt;下载代理-&gt; Kubernetes YAML。<br/></p><p>出现提示时，给代理一个名称“helm ”,然后单击提交。<br/></p><p>单击提交后，将会下载一个TAR.GZ。打开焦油包装。<br/></p><p>在解压后的文件夹中，安装<em> harness-delegate.yaml </em>和<em>ku bectl apply-f harness-delegate . YAML</em>T10】</p><p>几分钟后，Kubernetes代表的名字将变为“helm-*”<br/></p><p>一旦线束代理启动，您可以利用代理概要文件<a href="https://helm.sh/docs/intro/install/">在代理上安装Helm V3客户端</a>。在代表页面上，单击管理代表个人资料+添加代表个人资料。<br/></p><p>使用Helm项目本身的脚本创建一个显示名称为“Helm V3 Install”的委托概要文件。<br/></p><p><em>#安装舵</em> <br/></p><p><em> curl-fsSL-o get _ helm。sh https://raw。githubusercontent。com/helm/helm/master/scripts/get-helm-3</em></p><p><em> chmod 700 get_helm.sh </em></p><p><em>./get _ helm。sh </em> T27】</p><p>单击“提交”后，您可以在代理人上运行代理人配置文件。导航到配置文件并选择“Helm V3安装”。<br/></p><p>一旦执行了配置文件，现在就可以在线束代理上运行Helm了。<br/></p><p>接下来，您需要将EKS集群作为一个<a href="https://developer.harness.io/docs/getting-started/learn-harness-key-concepts/"> Kubernetes环境</a>进行连接。这可以通过进入设置- &gt;云提供商+添加云提供商<br/>来实现</p><p>可以通过添加类型<em> Kubernetes Cluster </em>和名称<em> kubernetes_cluster </em>来填写关于您的Kubernetes Cluster的详细信息。</p><p>单击“提交”后，就可以将群集部署到其中了。<br/></p><h3>安全带和头盔工作流程</h3><p>随着Kubernetes项目的方式，时间获得更多的驾驭组合。<br/></p><p>进入设置- &gt;应用程序+添加应用程序，创建一个新的<a href="https://docs.harness.io/article/bucothemly-application-configuration">线束应用程序</a>。我们可以称这个应用程序为“手提袋中的头盔”。<br/></p><p>创建完成后，让我们连接我们在博客系列的第一部分【https://charts.bitnami.com/bitnami】中使用的<a href="https://developer.harness.io/docs/first-gen/firstgen-platform/account/manage-connectors/configuring-artifact-server/">头盔库</a>。要添加，请转到设置- &gt;连接器- &gt;工件服务器+添加工件服务器。我们将添加显示名称为<em> Bitnami Helm Repo </em>的<em> Helm Repository </em>类型。<br/></p><p>单击提交后，Helm存储库将可用。<br/></p><p>现在，您可以通过导航回应用程序来添加一个<a href="https://developer.harness.io/docs/category/add-services">服务</a>。设置- &gt;手提袋中的头盔- &gt;服务+添加名为“Bitnami_Nginx”的服务。这将是<em>头盔</em>的部署类型，我们将启用头盔V3。<br/></p><p>点击提交后，现在可以通过向下滚动到UI中间并单击“添加图表规范”来连接图表规范。<br/></p><p>让我们利用原始博客系列的第一部分中的类似细节。图表名称将为“bitnami/nginx”，图表版本将为“5.1.4”。<br/></p><p>随着时间的推移，如果您想要最新版本的图表，您可以利用您的本地机器(如果您安装了Helm)来查找最新版本，方法是通过运行<em>Helm repo add Bitnami https://charts.bitnami.com/bitnami</em>添加Bitnami Helm库，并通过运行<em>Helm search repo Bitnami/nginx</em>进行搜索。<br/></p><p>点击提交，您的图表规格将会出现。<br/></p><p>现在是时候给你的舵轮图一个家了。进入设置- &gt;手提袋中的头盔- &gt;环境+添加环境，设置<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/model-cd-pipeline/environments/environment-configuration/">驾驭环境</a>。在这种情况下，添加<em> Dev </em>作为<em>非生产</em>环境。<br/></p><p>单击Submit后，使用+Add Infrastructure Definition在UI中间添加一个基础结构定义。命名为“Helm_Hand_Basket ”,云提供商为<em> Kubernetes </em>集群，部署类型为<em> Helm </em>。选择您作为云提供商接入的Kubernetes集群。<br/></p><p>单击“提交”后，基础架构定义就会出现。<br/></p><p>接下来，您将通过进入设置- &gt;手提篮中的头盔- &gt;工作流+添加工作流来创建<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/model-cd-pipeline/workflows/workflow-configuration/">线束工作流</a>。添加一个名为“nginx_helm”的工作流。<br/></p><p>点击提交后，您可以在部署阶段下添加一个阶段<br/></p><p>将服务<em> Bitnami_Nginx </em>添加到工作流阶段。<br/></p><p>单击提交后，通过添加发布名称来完成Helm部署步骤。<br/></p><p>称这次发布为“我的头盔发布”。<br/></p><p>接下来，您可以通过转到Setup-&gt;Helm in a hand basket-&gt;Pipelines+Add Pipeline创建一个<a href="https://developer.harness.io/docs/platform/templates/create-pipeline-template/">线束管道</a>来将工作流包装在管道中。添加一个名为“Helm_Pipeline”的管道。<br/></p><p>单击提交后，添加一个管道阶段。<br/></p><p>添加名为“Go for Gold”的执行步骤。<br/></p><p>一旦你点击了提交，现在是时候运行你所有的努力工作，并开始一个线束部署。现在是时候开始你的<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/helm-deployment/helm-workflows/">挽具展开</a>了。可以导航到持续部署- &gt;开始新的部署。<br/></p><p>一旦你点击提交，看看奇迹发生！<br/></p><p>可以登录到您的Kubernetes UI，在默认的<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/">名称空间</a>中查看您的发布。<br/></p><p>完美和欢迎掌舵V3！</p><h2>带着安全带向前</h2><p>Harness平台简化了对您当前和未来管道至关重要的技术的采用。在Harness，我们一直在集成新的平台。如果没有我们支持的平台，我们仍然通过几种方法使集成变得容易，以便与线束管道集成。如果您还没有机会检查线束<a href="https://harness.io/platform/" target="_blank">软件交付平台</a>，请随意尝试一下。用头盔做些很酷的事？我们很乐意在<a href="https://community.harness.io/"> Harness社区</a>上听到您的意见。</p><p><br/></p></div></div>    
</body>
</html>