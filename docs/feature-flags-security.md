# 功能标志安全性:常见问题和关注点，已解答|线束

> 原文：<https://www.harness.io/blog/feature-flags-security>

特性标志不是安全或性能风险——它们实际上改善了组织的安全和性能状况。学习如何。

对于运营人员或有安全意识的人来说，世界上最可怕的两件事是:

1.  必须作为依赖项在代码库中运行的代码。
2.  您的生产用户体验所依赖的任何正常运行时间。

毫无疑问，功能标志作为一个概念和我们在 Harness 销售的具体解决方案，会引起一些额外的审查。它们可能*看起来*在这两个向量上都存在风险。但是在这篇文章中，我们将看看特征标志*如何不是*安全或性能风险——以及它们如何实际上*改善*你作为一个组织的安全和性能状况。

在我们继续之前，请注意一点。在本文中，我将比我们在这些博客上经常做的更具体地引用作为产品的[利用特性标志](https://harness.io/products/feature-flags/)的各个方面。这并不是为了专门推销我们的产品，而是为了能够提供清晰而具体的解释。你会发现，市场上的大多数功能标志产品在这些相同点上做得相当不错，因为功能标志的整体类别已经随着时间的推移而负责任地、深思熟虑地发展。

## 客户数据

当使用特性标志时，您将最终根据通过 SDK 向服务公开的标准(稍后将详细介绍)，将[定位到您的用户](https://ngdocs.harness.io/article/0a2u2ppp8s-getting-started-with-feature-flags)、区域或租户。这里的风险是，一些可能被使用的信息实际上可能是敏感的，或者违反了 PII 政策。

由于这种风险，我们已经划定了不主动收集任何数据的界限。虽然寻找公共用户或框架对象并自动将它们传递给 Harness 可能有一些简化价值，但我们不希望在您没有明确选择将数据发送给我们的情况下收集数据。

因此，在配置您将用于标记目标的数据时，**所有数据必须手动编码，以便在您这边发送给我们**。如果你不发，我们就没有了。

## 软件开发工具包(Software Development Kit)

[SDK](https://ngdocs.harness.io/category/rtce97j1wu-ff-technical-reference)是任何特征标志解决方案如何工作的关键。您将 SDK 安装到您的代码中，它们与上游服务进行通信，发送用户或服务器数据以确定目标，并接收规则配置以确定提供哪些状态的功能。

因为这些 SDK 运行在您的代码中，所以我们(以及我们行业中构建它们的其他人)非常小心地对待它们。正如我们已经提到的，我们的 SDK 不会主动收集或传递任何数据。此外，它们都是开源的，因此可以随时对它们进行全面审计。

每个功能标志供应商都有略微不同的方式来发布他们的 SDK，但都将遵循一两个相似的模式。在 Harness，我们的 SDK 支持流和轮询模式。在流模式下，您可以从 Harness 主动接收服务器发送的事件，以提供实时更新。当您需要较少的连接时，轮询模式是首选，相反，SDK 将定期获取更新-它们不需要持续的连接。两者都是常用的。

## 跳回

我们经常被问到:我们如何确保特性标志不是应用程序的上游依赖？如果安全带坏了怎么办？Google Cloud 或者 AWS 宕机了怎么办？如果某个特定用户会话的通信经历了非常长的延迟，该怎么办？重要的是要知道特性标志永远不会让你的用户看到不愉快的体验。

特征标志工具的设计通常考虑了所有这些问题。在 Harness，我们有三个级别的弹性可供您依赖:

*   SDK 本身将缓存评估结果(以及针对[服务器 SDK](https://ngdocs.harness.io/category/kkiqy1f6d7-server-sdks)的缓存规则)，因此如果出现连接问题，它们将始终有一个第一级回退。
*   当在代码中实现您的标志时，如果没有缓存和连接，您将始终使用硬编码的默认值。
*   我们还提供了一个[中继代理](https://harness.io/blog/in-depth-feature-flags-relay-proxy/)，您可以运行它来位于 Harness 和您的应用程序之间。它提供了一个完整的缓存，限制了与 Harness 的必要连接(只有代理需要与 Harness 对话)，甚至可以侧加载。

当您将这些事情结合起来时，您的应用程序永远不会因为对功能标志服务的影响而无法解决问题，也永远不会因为无法到达上游而无法更改任务关键标志，因为代理可能会被加载。

Click on the image to reach Documentation

## 帮助，而不是伤害

如您所见，功能标志解决方案——包括我们的解决方案——在设计时就意识到了它们可能会无意中带来的风险。在 OSS SDKs、缓存、代理、代码内缺省等等之间，这些风险被小心地处理，以便您可以放心地标记。

鉴于此，值得考虑的是特性标志实际上如何成为你的安全和可靠性姿态的一个关键部分，而不是给 it 带来风险*。*

*   生产中的任何更改都可以立即终止，无需回滚。
*   所有更改的审核日志。
*   围绕谁可以进行更改以及如何进行更改的强大治理和权限控制。
*   不再有开发人员或运营人员直接在资源上运行行动手册！[使用标志使关键流程可见并可重复](https://harness.io/blog/kill-switches/)。

## 结论

关于如何为安全性和性能构建特性标志，还有很多细节需要了解。这只是为了提供一个概述。但是，希望您可以看到为保证特性标志使您的应用程序更安全、更高效而采取的谨慎措施，这可能会引入超出服务设计的风险。

如需了解更多信息，您可以随时访问[我们的文档](https://ngdocs.harness.io/category/vjolt35atg-feature-flags)或[向我们发送问题](https://harness.io/company/contact-sales/)。我们很乐意回答您可能提出的任何与安全性、体系结构或性能相关的问题。