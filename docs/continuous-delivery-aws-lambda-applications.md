# AWS Lambda 应用的持续交付|线束

> 原文：<https://www.harness.io/blog/continuous-delivery-aws-lambda-applications>

利用持续交付构建您的 AWS Lambda 管道。AWS Lambda 是一个可以用来构建应用程序的 web 服务。

AWS Lambda 是一个 web 服务，您可以使用它来构建应用程序，而不必担心计算限制或复杂性。要使用，只需将您的应用程序代码作为 Lambda 函数上传，Lambda 就会在高可用性计算基础设施上运行您的代码。

Lambda 还执行计算资源的所有管理，包括服务器和操作系统维护、容量供应和自动扩展、代码和安全补丁部署以及代码监控和日志记录。你所需要做的就是用 Lambda 支持的语言之一来提供你的代码:

*   Node.js (JavaScript)
*   计算机编程语言
*   Java(兼容 Java 8)
*   C#(。网络核心)

## 无服务器——开发者的梦想？

关键在于，Lambda 是开发者的梦想。不再需要设置基础架构或配置服务器。所有要做的只是简单地部署新代码。除了易于部署之外，还有金钱上的好处。

为什么要 24x7 运行一个等待 API 调用的服务器，而这个 API 调用在接下来的半小时、一小时甚至一天内可能会被调用，也可能不会被调用？为什么不在代码实际执行时为计算付费呢？拉姆达来了！

## Lambda 持续交付面临的挑战

不可变对象(那些不能被改变的)在持续交付方面有一些挑战，Lambda 也是如此。Lambda 函数被版本化，最新的总是发布到$LATEST。这些版本由代码和配置(变量)组成。一旦代码和配置发布，函数就变得不可改变。

Lambda 上持续交付的挑战实际上在于版本控制、标记(别名)和回滚。每个新版本都不变地被推送到$ LATEST 因此，回滚到以前的版本变得很复杂。即使您的应用程序被正确地设计为使用标记，也是如此。前进是容易的——退回到基于先前成功标记的部署是复杂的。

在 Harness，我们通过跟踪标记(别名)或重新创建功能、代码和配置所需的两部分来解决这种复杂性。Harness 不仅适用于 Lambda 的限制，还实现了不可变基础设施的最佳实践。Harness 处理管理代码和配置的负担，以便正确地版本化、标记或重新创建先前的版本，从而允许基于规定的故障策略的全自动回滚。

## 使用线束部署到 AWS Lambda

设置 Harness 来管理 Lambda 函数的连续交付或连续部署不仅简单，而且是可重复的。

这个过程可以分为 5 个简单的步骤:

## 1.创建新的 Lambda 服务

输入服务名，并选择 AWS Lambda 作为工件类型，以及服务的简要描述。

接下来，添加一个工件源。下面的例子显示亚马逊 S3 作为位置。

最后，添加你的 Lambda 函数规范(配置)。

## 2.设置您的 Lambda 环境

添加环境名称和环境类型(非生产/生产):

通过选择适当的 AWS 帐户、区域、IAM 角色、VPC、子网和安全组来添加您的服务基础架构:

## 3.创建您的 Lambda 部署工作流

可以为部署到每个环境的每个 Lambda 服务单独添加工作流。您还可以将这些部署工作流模板化，这些工作流可以在运行时调用基础设施、服务和环境作为变量，从而消除了跨许多 Lambda 服务的重复需求。

Harness 将自动填充部署和回滚 Lambda 服务所需的步骤:

您还可以为您的 Lambda 服务添加工作流准备、验证或总结步骤。在下面的例子中，您可以使用有效负载断言为每个 Lambda 函数定义简单的测试事件。

此时，工作流准备执行一个工作流。

## 4.创建您的 Lambda 管道

利用 Harness，您可以将多个部署工作流缝合在一起，作为开发、QA 和生产环境中的流水线阶段。根据您的需求，这些管道工作流和阶段可以顺序执行，也可以并行执行。您还可以对管道进行模板化，并将它们委派给单独的团队或用户。

## 5.构建您的 Lambda 管道触发器

最后，触发器可以用来基于 Lambda 函数的新版本自动执行管道。
a .定义触发器来执行部署工作流或整个管道。

您已经完成了所有工作，可以开始部署了！

这里有一个使用 Harness 部署 AWS Lambda 的两分钟视频:

## AWS Lambda 上的更多链接: