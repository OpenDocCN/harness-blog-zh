# 开发运维与 SRE:实现效率和弹性|管理

> 原文：<https://www.harness.io/blog/sre-vs-devops>

简而言之，DevOps 工程师是专注于解决开发管道问题的运营工程师。现场可靠性工程师是专注于开发的工程师，他们解决运营/规模/可靠性问题。

软件肯定正在吞噬世界，随着我们对技术的依赖增加，学科已经兴起，以确保变化被有效地展开，并且我们的系统在我们需要它们的时候就在那里。在过去的几年里，开发运维及现场可靠性工程文化和实践的兴起已经成为主流。

成为 DevOps 工程师或 SRE 肯定是受欢迎的职位和技能。在说“DevOps/SRE”时，不要陷入“CI/CD”的同义字中，理解这两种技能和组织之间的重叠和差异是很重要的。两者都以独特和创新的方法解决了非常独特的挑战，引领了新的技术范式。

## SREs 和 DevOps 有什么区别？

拥有更高效、更可靠的系统并不是新的技术目标。像技术的许多其他方面一样，这两个目标背后的知识和科学已经增加到需要专门的组织和工程师。

DevOps 运动就是要打破孤岛。开发团队和运营团队之间典型的脱节正是 DevOps 工程师和领导者试图解决的问题。这种划分是有道理的，因为编写软件的人通常不是运行软件的人。多年来的这些做法需要时间在组织中理清，而且心态的变化很难预测。

拥有大规模的可靠系统是一个需要解决的复杂问题。随着系统在本质上变得越来越分散，在移动部件的庞大拓扑中确保可靠性或可靠性的出现是一个挑战。内部和外部客户都希望系统始终可用，即使是短暂的中断(停机)或正常运行时间的减少也会损害公司的声誉和底线。

简而言之，DevOps 工程师是专注于解决开发管道问题的运营工程师。现场可靠性工程师是专注于开发的工程师，他们解决运营/规模/可靠性问题。两组工程师都在跨越鸿沟，把他们的专业知识和观点带到等式的另一边。尽管如此，我们也是人，也会犯错误，并且受制于康威法则。

### 康威定律在起作用

在 DevOps 文化中，一个流行的组织项目是[康威法则](https://en.wikipedia.org/wiki/Conway%27s_law)。如果你不熟悉康威定律，这是一句格言，说明组织设计的系统反映了他们自己的沟通结构。我们是人，我们作为人，设计系统。从 DevOps 团队结构来看，DevOps 团队专注于打破由康威定律创建的组织孤岛，并创造一种朝向协作和沟通的文化转变。这些制度上的筒仓是工程效率的障碍；两组或多组人员获得跨生产线的功能，并以单独的目标进行操作。阅读 DevOps 的经典作品之一，[吉恩·金的凤凰计划](https://www.amazon.com/Phoenix-Project-DevOps-Helping-Business/dp/0988262592)，说明了问题是如何被抛过众所周知的墙的。

可靠性是每个人的责任这句格言是对的，但是创新工作的核心是我们第一次尝试事物。DevOps 更关注筒仓的合并和移除，而站点可靠性工程则关注可靠性工艺。阅读 SRE 的经典作品之一，[谷歌的 SRE 之书](https://landing.google.com/sre/sre-book/toc/index.html)，更多的是关注方法和尊重操作系统规模的复杂性。

因为我们都还在与康威定律作斗争，拥有一个稳固的 DevOps 团队并不意味着你的站点可靠性下降了。反之亦然:仅仅因为你的站点可靠性下降并不意味着你有 DevOps 投资带来的工程效率。他们正在解决两个不同的领域。

## 两个不同的问题集

工程效率和可靠性是两个独立的领域，但有一些重叠。敏捷性和更健壮的系统之间存在关联。一个相反的论点可能是敏捷带来了快速的变化，而变化对可靠性是有害的。当今的挑战是大规模面临的，随着我们不断挑战极限，动态调整非常重要。这两个团队解决的问题说明了两个团队繁荣发展所需的文化和技能。

### DevOps 团队解决什么问题？

工程效率可以有广泛的画笔。如果你看一下 DevOps 的招聘启事，它听起来像是招聘启事在寻找一个人的整个 it 组织。SDLC(软件交付生命周期)可能是一条蜿蜒的道路。DevOps 团队通过消除生产和自动化障碍，努力消除整个 SDLC 中的瓶颈。随着敏捷的采用，生产变更正在被创建，并且需要以更快的速度被部署，因为增量变更是现在的期望。

DevOps 团队是开发工具的提供者，从在 SDLC 开始时提供源代码管理(SCM)建议的指导，到在组织中实现[持续集成](https://harness.io/blog/what-is-continuous-integration/)和[持续交付](https://harness.io/blog/what-is-continuous-delivery/)。由于职责范围广泛，DevOps 团队可以拥有并监督许多工具和平台。另一方面，SREs 关注系统健康。最后，注意 [DevOps 支柱](https://docs.microsoft.com/en-us/learn/modules/introduce-foundation-pillars-devops/)是很重要的，因为它们可以提供 DevOps 团队解决问题的更多细节。

### SREs 解决什么问题？

现场可靠性工程团队关注安全、健康、正常运行时间和补救不可预见问题的能力。一个浪漫的想法是，sre 只在事故期间突然行动，帮助设计问题的补救措施，直到工程团队能够进行适当的补救。当然，这项工作的一个重要支柱是应对突发事件，sre 花了大量时间来确保不会发生交火，因为他们拥有丰富的专业知识。

通过消除如何在分布式系统中扩展和维护正常运行时间的一些复杂负担，SRE 实践允许开发团队专注于功能开发，而不是实现和维护服务级别承诺的细微差别。

## 服务级别协议、服务级别协议和服务级别协议

DevOps 和 SRE 团队都重视度量，因为你不能改进你不能度量的东西。系统性能的指标和度量可以由服务级别(SLx)承诺来表示。有三个度量标准，SLA、SLO 和 SLIs，它们描绘了达成的协议与满足协议的目标和实际情况之间的关系。使用 SLOs 和 SLIs，您可以深入了解系统的健康状况。

### 服务等级协议

服务水平协议是您与客户达成的承诺/协议。您的客户可能是内部的、外部的或另一个系统。SLA 通常是围绕客户期望或系统期望制定的。SLA 已经存在一段时间了，大多数工程师会认为 SLA 是“我们需要在 2000 毫秒或更短时间内回复”，在今天的术语中实际上是 SLO。在这种情况下，SLA 应该是“我们需要 99%的正常运行时间。”

### SLOs

服务级别目标是为了满足 SLA 而需要达到的目标。查看 Tom Wilkie 的 [RED 方法](https://www.weave.works/blog/the-red-method-key-metrics-for-microservices-architecture/)可以帮助您得出 SLO 的良好指标:请求、错误和持续时间。在上面“99%的情况下，我们需要在 2000 毫秒或更短的时间内回复”的例子中，这属于持续时间，即在您的系统中完成一个请求所需的时间。谷歌的[四个黄金信号](https://landing.google.com/sre/sre-book/chapters/monitoring-distributed-systems/)也是 SLO 的重要指标，但也包括饱和度。测量 SLOs 是 SLIs 的目的。

### 雪橇吗

服务水平指标衡量与 SLO 的符合性。SLO 反复强调“我们需要在 2000 毫秒或更短的时间内回复 99%的时间”，SLI 将是实际测量。也许 98%的请求在 2000 毫秒内得到答复，这没有达到 SLO 的目标。如果 SLO/sli 被破坏，应该花时间来补救/修复与减速相关的问题。

对于 DevOps 团队来说，系统健康和可用性并不意味着工程效率得到了满足。开发运维团队需要关注的另一组指标是加速指标。

## 加速开发运维团队的指标

您可以拥有世界上最具弹性和最强大的系统，但是如果您的客户没有完成他们的旅程，那么采用和成功将很难实现。在 Nicole Forsgren、Jez Humble 和 Gene Kim 合著的《T4 加速》一书中，我们深入探讨了高绩效技术团队的组织科学。

作者推荐用四个关键指标来衡量软件交付性能。交付时间、部署频率、平均恢复时间(MTTR)和变更失败率。

### 研制周期

在精益制造中，交付周期是指从客户提出请求到满足该请求所需的时间。在技术领域中，这可以是从代码被签入到代码被部署到产品中的时间。

### 部署频率

在一段时间内部署到生产环境的次数。您是否每天、每周、每月、每年都在部署生产？您的内部客户部署得越频繁，软件交付过程当然就越有效。

### 平均故障修理时间

再看精益制造，MTTR 是一个事故指标，它计算恢复系统的平均时间。从软件的角度来说，恢复就是回滚到应用程序的最后一个已知版本。平均修复时间是修复开始的时间，例如回滚开始的时间。平均恢复时间中的“恢复”部分是指系统恢复到以前的功能。

### 更改失败百分比

这表示生产中失败的变更的百分比。在完成了通向生产的所有建立信心的练习之后，由于生产中的许多未知因素，变革将会失败。降低变更失败率有助于增强生产信心。在现代交付方法中，早期(在较低的环境中)更频繁的失败是生产失败的关键。

Harness 具有开箱即用的可视化加速指标的能力，允许共享这些数据，从而实现整个企业的协作。

当比较 DevOps 团队与 SRE 团队的关注点时，我们可以看到重叠和差异进一步出现的地方。

## DevOps vs SRE 关注表

比较不同的 DevOps 问题与 SRE 问题。

你说你在这里做什么？开发管道弹性、伸缩性、正常运行时间、坚固性*TL；专注于开发问题的系统工程师。专注于操作问题的软件工程师。应用程序集群吗？是的，应用程序可以。我们需要三个节点。我们使用基于 [RAFT](https://en.wikipedia.org/wiki/Raft_(computer_science)) 的首领选举集群机制，集中于阿帕奇[动物园管理员](https://en.wikipedia.org/wiki/Apache_ZooKeeper)。我们将 Apache [Mesos](https://en.wikipedia.org/wiki/Apache_Mesos) 放在应用程序的前面，通过[显性资源公平性](https://cs.stanford.edu/~matei/papers/2011/nsdi_drf.pdf)约束来工作。我们能监控吗？是的，我们使用[普罗米修斯](https://prometheus.io/)、[麋鹿](https://www.elastic.co/what-is/elk-stack)和 [FluentD](https://www.fluentd.org/) 并且可以提供每个的挂钩。关注关于监控工具如何工作的科学。黑盒监控与白盒监控以及各自的具体指标。就利弊向团队提供建议。我们的部署失败了。我们创建的管道允许您重新运行。如果需要额外的调试，我们可以用日志/跟踪系统连接这些点。除非它导致停机，否则我们不会参与帮助补救。如果部署经常失败，我们可以帮助破解原因。典型指标部署频率、部署失败率。[误差预算](https://landing.google.com/sre/sre-book/chapters/embracing-risk/)、 [SLOs](https://en.wikipedia.org/wiki/Service-level_objective) 、 [SLIs](https://en.wikipedia.org/wiki/Service_level_indicator) 、[四大黄金信号](https://sre.google/sre-book/monitoring-distributed-systems/)战歌“人、流程、技术！”“没有根本原因！”*

与为工程组织提供工具和管道以推进任务的开发运维团队相比，sre 关注的细节层次更多地是工具不可知的和以方法为中心的。在任何现代组织中，技能和团队都非常重要。

## SRE 和德沃普斯，在一起更好

两者都可以被视为杠杆资源；很明显，软件工程师和 DevOps 工程师(尽管当组织试图扩展时可能会有这种感觉)或站点可靠性工程师的比例不是 1:1。 [O'Reilly 的《构建安全可靠的系统》](https://www.oreilly.com/library/view/building-secure-and/9781492083115/),与谷歌的《SRE》第一版相比，讨论了团队结构毒害了作为顾问/专家的 SREs。

大规模构建软件需要专业的工程师来帮助解决问题和进一步的能力。DevOps 工程师、sre 和应用安全工程师等其他工程师属于专业顾问的范畴。谷歌在 SRE 的书中描述了启动和维护 Gmail 这样的产品所需的跨多个领域的专业知识，这甚至让我感到惊讶。Harness 旨在支持工程组织并与之合作。Harness 平台定位良好，可帮助您的 DevOps 和 SRE 团队进一步完成使命。

## 与马具合作并持续交付

无论您或您的组织是开始还是继续 DevOps 或现场可靠性工程之旅，Harness 都将与您合作。从 DevOps 的角度来看，Harness 平台的一个核心功能是轻松和约定地创建一个健壮的管道。线束[软件交付平台](https://harness.io/platform/)是持续交付的使能器，这是工程效率使命的核心。利用线束和我们的[持续验证](https://harness.io/platform/continuous-delivery/continuous-verification/)工具，构建安全可靠的管道非常容易。

就 SRE 而言，提供基线比较覆盖面可能很困难；建立 SRE 组织的第一步是 SLA/SLO/SLI 管理，并且需要适当的基线来确定什么是正常的。使用您最喜欢的工具运行的 Service Guard ，不断地从您部署的应用程序的基线中寻找回归。

Harness 平台使企业能够通过跟踪关键软件可靠性指标来管理部署。工程组织可以根据线束可靠性仪表板上的领先指标加快或减慢软件发布。

Harness 平台的可靠性解决方案包含两个独立的产品模块:服务可靠性管理(SRM)和混沌工程(ce)。SRM 使企业能够测量和了解其应用程序服务的运行状况，而 Harness CE 则帮助企业在故障发生在生产中之前主动解决导致计划外停机的系统故障。

[Harness SRM](https://harness.io/products/service-reliability-management) 能够为任何组织提供主动的 SLO 驱动的软件交付，无论是刚刚开始 SLO 管理之路，还是处于任何更高的经验水平。SRM 有助于公司采用、扩展和自动化 SLO 管理，因此他们可以获得可靠性提高的好处，而不会遇到常见的棘手问题。了解更多关于利用 [SRM 关键功能的信息](https://harness.io/blog/srm-key-capabilities)。准备好观看它的运行了吗？[请求演示](https://harness.io/demo/srm)。

[Harness CE](https://harness.io/products/chaos-engineering) 使企业能够快速行动，同时完善其系统和团队的可靠性。CE 促进了开发人员、QA 工程师和 sre 之间的协作，统一了他们的工作以降低业务风险。混沌工程通过将部署与其运行的基础设施相结合，并展示系统如何应对现实世界的故障场景，超越了传统测试。有了 Harness CE，工程组织可以获得快速扩展混沌工程实践所需的支持、入职和专业知识。准备好观看它的运行了吗？[请求演示](https://harness.io/demo/next-gen-ce)。

最终，利用 SRM 和 CE 进行可靠性驱动的软件交付可以确保系统在故障中保持可靠性，满足合同义务，并且弹性机制有效。

使用 Harness，您不仅仅是测量可靠性；你也在改进它。

[探索 Harness 如何帮助](http://Schedule%20a%20Discovery%20Session)您的组织通过免费的发现会议提高可靠性，了解您的业务、优先事项和挑战。