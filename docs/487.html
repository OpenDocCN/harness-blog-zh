<html>
<head>
<title>How To: Your First Istio Deployment | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何:您的第一次Istio部署|利用</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/istio-service-mesh-deployment#0001-01-01">https://www.harness.io/blog/istio-service-mesh-deployment#0001-01-01</a></blockquote><div><p>这艘船是什么服务网？你能装运所说的网或者用所说的网装运吗？在我们的博客文章中了解如何部署您的第一个Istio应用程序！</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>Istio去年很受欢迎。我不能100%确定Istio是什么，但我知道我需要两个Istio；一个用于展示，一个在科技会议上亮相，比如T2的CNCF kube con T3。</p><p>玩笑归玩笑，如果你对<a href="https://harness.io/blog/what-is-a-service-mesh/" target="_blank">服务网格</a>的知识有所欠缺，不要担心。我们是来帮忙的。随着我们的应用程序变得越来越分布式，并采用更多的微服务架构，服务网格技术正在蓬勃发展。</p><h2>不断变化的景观</h2><p>不久以前，网络团队拥有您的应用程序和内部/外部世界之间的连接和路由。当我们有一些可预测的上下文要路由到时，网络团队可以有足够的时间来修改规则(还记得为防火墙规则提交一张传票或添加一个新的虚拟IP吗？).看看下面我在一个关于应用程序网络复杂性的演示中提出的对玉米卷的要求。</p><p>用<a href="https://en.wikipedia.org/wiki/Virtual_machine">虚拟机</a> : <br/>请求传统的旧日玉米饼</p><figure class="w-richtext-figure-type- "/><p><br/>借助网络堆栈支持过去:<br/></p><figure class="w-richtext-figure-type- "/><p>随着应用程序开始变得越来越分散，我们对网络团队的依赖也变得越来越长，因为端点的动态部分开始悄悄进入。</p><p>随着<a href="https://kubernetes.io/" target="_blank"> Kubernetes </a>、<a href="https://harness.io/blog/serverless-and-harness/" target="_blank">无服务器</a>和公共云的出现，我们快速前进到了今天；资源总是在加速旋转和减速旋转。我们当然不可能为每个端点都制作一张票。路线和终点一直在变化，因为系统决定了我们需要多少火力(例如自动缩放)。</p><p>现代的玉米卷要求有<a href="https://aws.amazon.com/lambda/" target="_blank">λ</a>和<a href="https://redis.io/" target="_blank"> Redis </a> : <br/></p><figure class="w-richtext-figure-type- "/><p><br/>借助网络堆栈支持现代社会:<br/></p><figure class="w-richtext-figure-type- "/><p>随着开发团队和协调者制造出比以往更多的端点，需要有一种技术来确保通信畅通，从而欢迎服务网格。</p><h2>Hello Mesh</h2><p>随着不断变化的分布式体系结构将我们从整体结构中解放出来，服务网格技术诞生了。<a href="https://www.solo.io/service-mesh" target="_blank"> Solo.io </a>，服务网格编排的领导者，将服务网格定义为:“一个服务网格从应用网络(它应该如何相互对话)中抽象出应用的业务逻辑(服务做什么)”。让您的应用程序参与到服务网格中可以抽象出网络复杂性(尽管这种复杂性必须存在，请继续关注第二部分)。</p><p>就像任何流行的技术一样，在服务网格中也有选择。像Kubernetes一样，媒体数量最多的是<a href="https://istio.io/" target="_blank"> Istio </a>。不过值得一提的是<a href="https://linkerd.io/" target="_blank"> LinkerD </a>、<a href="https://www.consul.io/" target="_blank">Hashi ' s consult</a>，甚至像AWS这样的公有云厂商也有<a href="https://aws.amazon.com/app-mesh/" target="_blank"> AWS App Mesh </a>。让我们浏览一下您的第一个Istio部署，看看到底是怎么回事。</p><h2>你的第一次Istio部署</h2><p>部署Istio和利用Istio的应用程序很容易，只需要几个部分。我们可以使用我们信任的朋友<a href="https://kubernetes.io/docs/setup/learning-environment/minikube/" target="_blank"> Minikube </a>，通过Istio的示例应用<a href="https://istio.io/docs/examples/bookinfo/" target="_blank"> book info </a>。阅读Minikube 上的<a href="https://istio.io/docs/setup/platform-setup/minikube/" target="_blank"> Istio文档，我们确实需要给Minikube分配更多的资源。</a></p><p>我们还将使用Istio的命令行实用程序<a href="https://istio.io/docs/reference/commands/istioctl/" target="_blank"> istioctl </a>。</p><p>像往常一样，你可以观看视频或浏览博客文章的其余部分。让我们完成第一次Istio部署吧！<br/></p><figure class="w-richtext-align-center w-richtext-figure-type-image"/><p>抓取<a href="https://istio.io/docs/setup/" target="_blank">一个Istio发行版</a>，在这个博客的时候最新的是1.3.1:</p><p>【https://git . io/get atest | Instituto _ version = 1。3 .1 sh- <br/></p><figure class="w-richtext-figure-type- "/><p>下载文件后，您可以按照提示将istioctl添加到您的路径中。或者可以将CD放入istioctl文件夹，从那里进行布线。</p><p><em> cd istio-1.3.1 <br/>导出路径= $ PWD/bin:$ PATH</em>T28】</p><figure class="w-richtext-figure-type- "/><p>让我们启动一个Minikube实例。如果你以前没有使用过Minikube，你可以利用<a href="https://brew.sh/" target="_blank">家酿</a>来安装/升级。</p><p><em>酿造桶安装minikube </em>或<em>酿造桶更新minikube </em></p><p>安装Minikube后:<br/><em>Minikube start-memory = 8192-CPU = 4</em><br/></p><figure class="w-richtext-figure-type- "/><p><br/>通过启动仪表板进行验证。</p><p><em> minikube仪表盘</em>T43】</p><figure class="w-richtext-figure-type- "/><p><br/>也用istioctl验证。</p><p><em> istioctl验证-安装</em>T47】</p><figure class="w-richtext-figure-type- "/><p><br/>通过istioctl验证后，我们可以安装Istio下载中包含的Istio演示。</p><p><em>立方申请-f安装/立方结构/Instituto演示。YAML </em> <br/></p><figure class="w-richtext-figure-type- "/><p><br/>我们可以通过查看适当的服务是否已经启动来验证安装。</p><p><em> kubectl获取svc -n istio-system </em> <br/></p><figure class="w-richtext-figure-type- "/><p><br/>现在Istio正在运行，为<a href="https://istio.io/docs/setup/additional-setup/sidecar-injection/#automatic-sidecar-injection" target="_blank">自动边车注射</a>配置<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/" target="_blank">默认名称空间</a>。越来越接近了！</p><p><em> kubectl标签名称空间默认istio-injection=enabled </em></p><p>现在安装图书信息应用程序。</p><p>ku bectl apply-f samples/book info/platform/kube/book info。YAML  <br/></p><figure class="w-richtext-figure-type- "/><p><br/>让我们用一个<a href="https://istio.io/docs/concepts/traffic-management/#gateways" target="_blank"> Istio网关</a>让应用程序在Kubernetes集群之外可访问。</p><p>kube CTL apply-f samples/book info/networking/book info-gateway。YAML <br/> kube CTL获得网关</p><figure class="w-richtext-figure-type- "/><p><br/>现在，我们需要设置<a href="https://istio.io/docs/tasks/traffic-management/ingress/ingress-control/#determining-the-ingress-ip-and-ports" target="_blank">入口IP和端口</a>并设置网关URL。</p><p><br/><em>export INGRESS _ HOST = $(minikube IP)</em></p><p>export INGRESS _ PORT = $(ku bectl-n istio-system get service istio-Ingres gateway-o JSON path = ' { . spec . ports[？(@.name=="http2")]。节点端口} ')</p><p><em>export SECURE _ INGRESS _ PORT = $(ku bectl-n istio-system get service istio-Ingres gateway-o JSON path = ' { . spec . ports[？(@.name=="https")]。节点端口}') </em></p><p><em>导出网关_ URL = $入口_主机:$入口_端口</em> <br/></p><figure class="w-richtext-figure-type- "/><p><br/>最后，我们来获取网关URL。这里我得到192 . 168 . 99 . 100:31380<br/><em>printenv GATEWAY _ URL</em></p><figure class="w-richtext-figure-type- "/><p><br/>我们可以去&lt;Gateway _ URL&gt;/product page看看应用。就这样，你在用Istio做饭！<br/></p><figure class="w-richtext-figure-type- "/><p>Istio的一个重要特性是允许Istio处理<a href="https://istio.io/docs/concepts/traffic-management/#destination-rules" target="_blank">目的地规则</a>。book info示例应用程序附带了几个方便的例子供我们学习。</p><p>kube CTL应用-f样本/图书信息/网络/目的地-规则-全部。YAML <br/> kube CTL获取目的地规则-o YAMLT3】</p><figure class="w-richtext-figure-type- "/><p>有了这个，你就有了一个Istio环境和应用程序可以玩了。像任何一个好的网民一样，我们做完了就清理一下吧。Istio项目通过发布一个cleanup.sh使这变得简单。</p><p><em> /istio-1。3 .1/samples/bookinfo/platform/kube/clean up。sh </em></p><figure class="w-richtext-figure-type- "/><p><br/>可以用<em> minikube删除</em>终止minikube。</p><h2>与线束啮合</h2><p>我们希望您在学习如何进行第一次Istio部署的过程中获得了乐趣！服务网格继续流行。在Harness，我们将为您提供帮助。服务网格正在使开发团队的网络规则民主化。将目标规则/流量拆分作为管道的一部分进行导入。</p><p>请继续关注第二部分，我们将讨论服务网格带来的挑战。我不是网络工程师，大部分挑战是将网络复杂性引入应用程序开发领域。</p><p>干杯！<br/>-拉维</p></div></div>    
</body>
</html>