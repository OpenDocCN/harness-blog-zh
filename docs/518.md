# 在部署您的第一个服务之前...技巧和窍门|装具

> 原文：<https://www.harness.io/blog/deploy-first-service-harness>

您即将部署您的第一个服务...但是等等！这里有一些提示和技巧，让它变得非常简单。

如果您刚刚开始您的 CI/CD 之旅，您可能已经注意到市场上的工具有点饱和，无论是 CI、CD、编写成 CD 的 CI 工具，还是完整的 CI/CD 工具，等等……但是——您在这里是为了了解 Harness，所以让我们假设您在这里是为了了解更多关于入职流程的信息。你来对地方了。

## 首先:为什么要利用？

当涉及到软件交付时，Harness 完成了所有的工作。从构建到部署验证及其他，我们一直在帮助您解决难题，所有这些都来自一个统一的渠道。实施 Harness 使您的微服务向云的过渡变得极其方便和快速。此外，Harness 具有强大的回滚功能，使耗时数小时的手动回滚成为过去。没有必要无所事事地观察任何异常——Harness 的机器学习将接管并为你做这些。通过信任我们的机器学习，您的 DevOps 工程师将夺回他们的夜晚和周末——这是实现工作与生活适当平衡的关键。

## 旅程开始了…

所以你在这里，注册了马具，兴奋地冒泡。但是你也很紧张，因为这是一个全新的工具——这是你的第一次服务。也许你会选择社区版的 Harness。毕竟，这个版本的 Harness 是免费的，每天有 100 个部署，并允许您部署 10 个服务。对于任何寻找机会学习和熟悉产品的工程师来说，这是一个很好的起点。

## 代表到底是什么？

为了确保 Harness 能够与您的集群对话，您需要代理。一旦理解了委托的概念，利用就变得相当简单了。

代理就像[工人节点](https://docs.oracle.com/en/operating-systems/olcne/1.1/orchestration/worker.html)。Kubernetes 集群中的这些工作节点用于运行容器化的应用程序和处理网络连接，以确保跨集群的应用程序*和来自集群*外的*之间的流量能够得到适当的促进。*

### 代表文件

一定要阅读——也许 2-3 遍，因为代理一开始肯定有点难以理解——关于代理的文档。对于所有视觉学习者来说，这里有一个惊人的图形:

### 代表架构

现在我在 Harness 工作，我发现这个图是设置委托架构的最常见的方式之一。您为 Kubernetes 集群创建并下载您的委托，并将其安装在您的容器中。瞧啊。

### 代表人数

根据您部署的服务/服务实例的数量，您必须计划代理的数量。请注意，您随时可以在以后添加更多内容。

一般的经验法则是:**每 300-500 次执行或连续交付任务有 1 名代表**

### 委派权限

代理需要与之对话的每个工具或连接器都需要被授予权限。你的代表不会自动知道东西在哪里。这里有一个快速的[小抄](https://docs.harness.io/article/11hjhpatqz-connectivity-and-permissions-requirements)给你。

### 代表个人资料

“利用”用户界面在代表个人资料上相当直观。Harness 在通用的代表档案脚本上也有惊人的[文档](https://docs.harness.io/article/nxhlbmbgkj-common-delegate-profile-scripts)。

这些代理配置文件脚本是定制 Harness 的一种方式，使其为您的用例工作。例如，如果您想使用 [Terraform](https://harness.io/blog/terraform-201-tutorial/) 部署基础设施，您可以使用 Harness 提供的脚本创建一个委托概要文件。

### 真实世界的例子

利用代理配置文件就像在“您最喜欢的商店”在线购物(这是亚马逊，不是吗？！).有几分相似！假设你在“你最喜欢的商店”为你的朋友找到了最完美的礼物现在，为了确保礼物到达你的朋友手中，你必须给“你最喜欢的商店”一个地址(我正要说到点子上)。如果你打算定期给那个朋友送礼物，你必须用你朋友的地址创建一个档案——每次你需要给那个朋友送东西的时候，你都可以一键快速发送。

仔细想想，“你最喜欢的商店”是一个代表。你把包装和寄送礼物的工作委派给“你最喜欢的商店”

### 连接其他一切

接下来，连接一个工件存储库，这非常简单。

然后，连接您的云提供商。在这种情况下，我们使用 Kubernetes AWS。

去吧！连接你知道你使用的一切。

### 您的第一个部署类型是什么？

选择您的部署类型。Canary 是第一个想到的，但是对于您的第一个服务，我建议选择一个基本部署。没什么特别的。这是所有碎片开始聚集在一起的地方！这里是关于工作流的[文档](https://docs.harness.io/article/m220i1tnia-workflow-configuration)的链接。

## 入职提示

1.  我一登录 Harness，就点按“设置”按钮。所有好东西都在那里。以下是截图:

2.  所有连接器都位于面板的这一侧。
3.  首先部署一个简单的工作流，从开始到结束。婴儿学步！不要试图在第一次尝试时就花太多时间去创建世界上最好的架构工作流。
4.  一旦你弄清楚每样东西在哪里，这个工具就非常强大，这将是相当快的，因为 UI 是如此的直观。然后，你可以开始添加所有的铃铛和哨子。

## 利用资源

当您加入您的服务时，知道您的团队也有大量资源可供学习是很重要的。

1.  [https://docs.harness.io](https://docs.harness.io)
2.  【https://university.harness.io/ 号
3.  【https://community . harness . io/

现在，您已经使用工作流部署了您的第一个具有 Harness 的服务，您可以深入了解我们的工具所拥有的其他酷功能:

*   建一条管道。
*   添加批准。
*   模板化你的工作流程和管道。
*   基于角色授予访问权限(RBAC)。
*   设置连续验证。
*   自动回滚。
*   了解如何部署金丝雀。
*   将功能标志添加到组合中。
*   设置秘密。

不胜枚举！

## 结论

我们很高兴您为您的 CI/CD 之旅选择了 Harness。我们希望这篇博客对你学习在部署你的第一个服务之前要采取的重要步骤有所帮助。要了解更多，这里有几本必读的书:

[蓝绿色与淡黄色部署](https://harness.io/blog/blue-green-canary-deployment-strategies/)

[什么是集装箱化管道？](https://harness.io/blog/container-pipelines/)