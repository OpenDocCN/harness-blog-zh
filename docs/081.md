# OpenTelemetry -对软件交付的意义

> 原文：<https://www.harness.io/blog/open-telemetry-for-software-delivery>

关于 OpenTelemetry 你应该知道什么，它如何应用于软件交付？

## 应用程序可观察性及其对软件交付的意义

2019 年 5 月有一个相对较新的公告，介绍了一个名为 [**OpenTelemetry**](https://opentelemetry.io/about/) 的新开源项目。这个云计算本地计算基金会(CNCF)项目将合并两个现有的开源项目:CNCF 的 [OpenTracing](https://opentracing.io/) 和谷歌的 [OpenCensus](https://opencensus.io/) 。这两个项目在应用性能监控(APM)解决方案领域具有很大的影响力，因此许多人都将目光转向 OpenTelemetry，因为它声称拥有其股份。

APM 解决方案正在解决现代企业应用程序的可观测性挑战。随着企业逐渐采用 DevOps、CI/CD 和云技术，利益相关方了解他们的服务变得至关重要。新的堆栈称之为 OpenTelemetry，“T0”是一个更广泛、更深入的项目。但是这个 OpenTelemetry 项目是什么，为什么这么热门，它如何影响企业软件交付？

为了回答这些问题，我将后退三步，讨论 APMs、OpenTracing 和 OpenCensus。

## 什么什么？

**应用程序性能管理**或 APM 的目标是收集实时应用程序的状态数据，以了解和管理其性能。杀伤人员地雷是解决可观测性挑战的一个办法。它们提供用户界面和额外的特性来理解你的应用。

#### **什么是可观察性？**

**可观察性**与**度量、日志和跟踪**有关。下图列出了与可观察性相关的每个概念的要点。

Observability includes Metrics, Logs, and Tracing

**指标**是可聚合的。收集基准对于改进流程和应用程序性能非常有用。您也不必约束自己只收集运行时指标。一些工具公开并收集应用程序的平台或基础设施数据。

**日志**是事件，相当简单明了，但是要确保你有关于日志格式的标准。

**跟踪**是从请求的角度进行观察，有效的跟踪是从服务的客户或用户的角度进行的。这是我写的另一篇[博文](https://developers.redhat.com/blog/2019/05/13/building-and-understanding-reactive-microservices-using-eclipse-vert-x-and-distributed-tracing/)中关于追踪的一小段:

“在分布式环境中，我们仍然可以观察应用程序正在处理的请求，这一点很重要。例如，考虑一个电子商务应用程序。在应用程序完成处理该过程之前，单个签出请求可能被传递给数十或数百个服务；无论是在开发还是生产环境中，开发人员和支持团队都需要工具来理解和调试他们的服务中可能出现的问题。”

> Red Hat 开发人员的博客文章:使用 Eclipse Vert.x 和分布式跟踪构建和理解反应式微服务

度量、日志和跟踪是应用程序可观察性的三个核心原则。如果您计划投资 APM 解决方案，我强烈建议您了解这些组件。

#### **什么是 APM 解决方案？**

APM 解决方案通过指标、日志和跟踪来解决可观察性的挑战。APM 提供对应用程序生态系统中特定服务或功能的观察数据的控制。这种范围粒度对于确定服务 SLA 时的瓶颈特别有用。使用 APMs 的另一个好处是增加了可视性。如果出现任何问题，它可以更快地对应用程序进行故障排除。例如，如果一个服务请求在服务的调用链中失败，那么拥有一个包含被调用的服务和导致失败的上下文传播的仪表板将非常有用。

Image from New Relic Blog Post of a Distributed Tracing Dashboard

类似地，让我的应用程序内部有一个脉冲可以减少针对内存泄漏等问题进行性能优化的时间。目标是获得服务失败的完整上下文以及导致错误的原因。APM 解决方案使开发团队能够进入他们的工具、报告或仪表板来找到这些问题。

Dashboard built to monitor Fuse ESB

这些是 APM 解决方案的一些用例。可观察性和 APM 解决方案解决了分布式或多语言环境中的难题。

#### APMs 与 OpenTracing 和开源有什么关系？

OpenTracing 为分布式架构中的应用程序跟踪提供了一个供应商中立的标准。具体来说，它是分布式跟踪的 API 规范。随着更多分布式跟踪解决方案和工具的使用，标准化变得非常有用，团队需要使用相同的跟踪术语进行交流。在同一个组织中，您可能有许多用不同框架或语言编写的应用程序需要实现跟踪。这也有助于从社区获得设计指导和标准，甚至包括 APM 供应商。

如果您有兴趣了解更多关于分布式跟踪的信息，请查看这些 [OpenTracing 指南](https://opentracing.io/guides/)。

APM 供应商使用 OpenTracing 建立的规范，并实现了他们收集应用程序指标的解决方案。支持 OpenTracing API 追踪规范的工具包括:[CNCF·耶格](https://www.jaegertracing.io/)以及供应商 APM 解决方案。

#### 【OpenCensus 怎么样？

谷歌的 OpenCensus 项目是另一个可观察性的解决方案。它为度量收集和跟踪提供了 API。支持包括实现 API 的后端，支持 Java、Go、Node.js 和 Python 等语言。此外，还支持 HTTP、gRPC 和构建在各种编程语言之上的框架。如果您有额外的 APM 解决方案:第三方解决方案，如 Azure、DataDog、Jaeger 和 Prometheus 都是使用 OpenCensus 导出的维护导出器和后端的例子。

谷歌云在 Youtube 上分享了 OpenCensus 的技术演示[这里](https://www.youtube.com/watch?v=259NX1-jrUQ)。

API 规范就像软件的合同或蓝图。你需要在纸上构建出你想要的功能。OpenCensus 是一个得到很好支持的实现，它提供了对应用程序的全面了解。

## 开放遥测的呼声

在相互竞争的供应商中，看到对问题的承诺总是很好的。对 OpenTelemetry 项目的支持就是这样。OpenTelemetry 的承诺之一是[“单一的可观测性标准，而不是两个相互竞争的标准。”](https://medium.com/jaegertracing/jaeger-and-opentelemetry-1846f701d9f2)这个项目意味着为你的应用程序的可观察性标准化一个更高的标准。在整个可观测性领域，您不会被局限于一个平台或解决方案来收集和使用遥测数据。

观察 APM 供应商(如 [AppDynamics](https://www.appdynamics.com/) 、 [NewRelic](https://newrelic.com/) 和 [DataDog](https://www.datadoghq.com/) )未来几年的情况也很有趣，特别是当我们转向自动化和实现软件卓越时。在一份行业报告中，Gartner 预测，在整个企业组织中，使用 APM 工具监控的应用程序数量将从 2018 年的 5%增加到 2021 年的 20%。供应商们也对开放遥测技术做出了坚定的承诺，为标准化铺平了道路。

有理由期待解决方案空间也将增长并扩展到软件交付生命周期(SDLC)的更多部分。

## 软件交付

现在我们对 OpenTelemetry 和 observability 背后的概念有了更多的了解，我们可以使用这些概念来降低与交付软件相关的风险。连续交付依赖于自动化操作和监控任务。

根据企业管理协会(EMA)发起的一项 Riverbed 研究，63%接受调查的组织的自动化持续部署流程不到 50%。**只有 6%的组织报告其运营实现了 90% -100%的自动化。**对于那些经常部署更多软件的人来说，涉及应用运行和监控的部署后活动无法扩展。这包括让一两个工程师监控仪表板的过程，以发现部署后代码性能和质量的任何倒退。

降低 SDLC 过程中的风险是软件交付的全部内容。这意味着优化各个阶段:计划、开发、构建、测试、发布、部署、操作和监控。对于采用 DevOps 实践的组织，软件交付的周期如下图所示:

The DevOps Loop

能够扩展您的组织的是自动化部署后活动。这也是持续验证的目的。**持续验证**是使用智能数据验证部署的过程。使用连续验证来根据您定义的规则和回归触发回滚。

如果您正在寻找一个提供这种现成连接器的平台，它允许您轻松地使用 APM 解决方案，以便在出现任何倒退时，触发部署回滚。Harness 所做的是提供一种进行发布测试和回滚的方法，以便您的业务可以扩展。有兴趣的话免费试用[线束](https://harness.io)。