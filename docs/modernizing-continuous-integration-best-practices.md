# 持续集成的现代化:最佳实践和挑战

> 原文：<https://www.harness.io/blog/modernizing-continuous-integration-best-practices>

现代化的持续集成是伟大的，但是有一些关键的挑战需要避免——以及确保成功的最佳实践！

随着持续集成的不断发展，某些实践适合于更成熟的持续集成方法。一个成熟的持续集成实践应该考虑到速度、敏捷性、简单性，并且考虑到以自动化的方式传播结果。

这篇文章摘自我们的电子书《持续集成的现代化》。如果你喜欢你看到的内容，坚持到最后，我们会为你链接完整的电子书。它是免费的——而且最棒的是，没有栅门！

## 持续集成最佳实践

### 保持快速的自动化构建

因为构建会在一天中发生，所以快速和自动化的构建是工程效率的核心。通过将构建外部化，不要为构建占用工程师的机器或本地环境，这可以允许工程师在构建发生时继续大步前进并进行调整。简而言之，构建越快，持续交付解决方案就能越快地实现反馈——或者创建待部署的发布候选。

### 每个提交都应该自动构建

对于软件工程师来说，共享存储库中的提交或者合并标志着软件开发生命周期的前进。通过提交，你承诺你已经准备好开始尝试你开发的东西了。持续集成的核心是将每次提交视为潜在的发布候选，并开始构建工件。这将缩短做出部署决策的准备时间。

### 小块

在微服务和持续集成中，较小的部分有助于降低复杂性。通过拥有更小的功能独立的部分，比如构建、测试、打包和发布，识别问题/瓶颈变得更加容易。如果任何一个功能领域发生了变化，它们都可以被修改和调整，持续集成平台中的步骤也可以被更新。对于较小的部分，如果某些部分需要在其他系统上运行，找到提升或迁移功能的界限就更容易了。

### 结果透明

反馈在软件开发生命周期中是至关重要的，最有可能的是，变更第一次离开工程师的本地环境是在持续集成过程/实践中。以清晰、简洁和及时的方式在团队中传播构建和测试结果，有助于工程团队调整并迈向成功的发布候选。随着迭代的进行，初始构建应该运行不止一次。根据持续集成平台的不同，实现会有所不同，尤其是在共享结果方面。

## 持续集成和持续交付的区别是什么？

交付软件可以被视为连续的决策过程。以安全的方式将您的想法投入生产需要以测试和批准的形式进行信心建设练习，以及安全的部署机制，如金丝雀部署。连续交付是以自动化的方式向用户交付变更的能力。连续交付是跨学科的，引入了围绕监控、验证、变更管理和通知/聊天操作的自动化实践。没有要部署的工件，就没有部署；持续集成提供了要部署的工件。然而，持续集成并非没有挑战。

## 持续集成的挑战

因为构建和发布候选版本紧跟开发技术的进步，例如新的语言、包装和测试工件的范例，所以扩展持续集成实现中的能力可能是具有挑战性的。随着集装箱技术的引入，建造所需的火力和速度增加了。

### 扩展持续集成平台

随着构建速度的提高，以符合“每一次提交都应该触发一次构建”的口号，开发团队可能每个团队成员每天都会生成几个构建，甚至更多。与传统的应用程序打包相比，生产现代容器化版本所需的火力已经增加了。

由于繁重的计算需求，运行分布式持续集成平台所需的基础架构可能与他们正在构建的应用程序一样复杂。看看在本地构建和测试周期中，有多少本地机器的资源被占用了。现在，把它乘以一个团队或组织中的人数。分布式构建运行程序是一个复杂的领域；管理新构建节点何时启动和关闭可能取决于平台/最终用户。

### 跟上技术发展速度

格言“技术中唯一不变的是变化”是对的。随着技术的进步，新的语言、平台和范例将会出现。对于为一小部分技术设计的更严格的/遗留的持续集成平台来说，在异构构建中包含新技术或接受新的测试范例可能很困难。

就为平台构建时企业中的内容而设计而言，自主开发/遗留的持续集成平台非常容易僵化。新的技术和范例需要新的依赖关系来进行构建或者实现新的测试方法。添加新的依赖项应该像开发人员在他们的本地机器上体验一样容易；例如，简单地声明什么是必要的，基于约定/声明的工具解决依赖性。对于遗留或僵化的方法/平台，维护技术速度所需的依赖性管理是一个巨大的负担。

### 将 CI 平台过度扩展到 CD 中

作为第一批自动化部分开发管道的系统，有一种自然的趋势是继续构建自动化，将软件一直带到生产。尽管组织很快意识到由于单元测试失败而导致的构建失败不同于处理多个部署和发布策略；失败的部署会使系统处于非运行状态。这就是为什么在持续集成(构建)和持续交付(安全生产部署)之间应该有一条界线。

创建和测试基础设施和应用程序所需的严格性，同时拥有一个安全的发布策略，例如 canary 发布，需要整理关于应用程序的部落知识以确定通过/失败场景。添加额外应用程序的负担可能是巨大的，并且可能违背持续集成的最佳实践，例如保持快速构建。

## 结论

我们希望你喜欢我们的现代化持续集成电子书的节选。在下一个摘录中，我们将回顾*如何*实现持续集成的现代化，以及现代基础架构是什么样子的。

如果你不想等待下一篇博文，那么今天就下载电子书吧——它是免费的，不需要电子邮件地址:[现代化持续集成](https://harness.io/learn/ebooks/modernizing-continuous-integration-ebook/)。