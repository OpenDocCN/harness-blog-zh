# 完整的 GitOps vs DevOps 指南|线束

> 原文：<https://www.harness.io/blog/gitops-vs-devops>

虽然有些人可能会认为 GitOps 是 DevOps 交付组件的替代品，但它在很大程度上是 DevOps 方法的自然延伸。此外，great GitOps 依靠更广泛的 DevOps 文化和生态系统蓬勃发展。让我们了解更多的不同之处。

死亡、税收和软件开发的新趋势几乎是这些日子里你生活中唯一可以指望的事情。随着“DevOps”这个术语有了 13 年的历史(最初是由 Patrick Debois 在 2009 年提出的)，它已经在开发人员圈子中被最新的热门新术语 GitOps(由 WeaveWorks 在 2017 年创造)所取代。今天我们将从一些定义开始，比较什么是 GitOps 和 DevOps，然后你也将知道哪个是哪个。

当谈到[软件交付最佳实践](https://harness.io/blog/continuous-delivery/best-practices-software-delivery/)时，关于处理交付的最佳方式的争论激烈进行着。当涉及到您的组织时，在考虑如何交付时，有许多因素需要权衡。与大多数组织一样，您可能会得出这样的结论:您希望将这两种方法结合起来，以实现您想要的结果。

## DevOps 是什么？

任何时候你问这个问题，都会有很多答案，大部分都是正确的。最重要的是，它是开发和操作团队之间的协作，以在软件开发过程中实现更高的速度、更高的质量和可持续性。这些目标是通过工具、操作实践和文化实践的组合来实现的。

实际上，DevOps 是一个持续集成和持续交付的伞状过程，主要关注于加速[软件开发生命周期](https://harness.io/blog/devops/software-development-life-cycle/)的最终目标。对于任何组织来说，这包括许多 DevOps 工具来覆盖特定的领域，例如测试、基础设施管理、打包、工件管理、软件部署等等。

就本文的实际目的而言，DevOps 铺平了从版本控制到生产的道路，为最终用户获得软件提供了一个可重复和可持续的框架。

## 什么是 GitOps？

GitOps 的理念是部署、更改等应该像提交 Git 一样简单。GitOps 采用了一种以开发团队和他们选择的版本控制系统为中心的方法。该过程从合并请求开始，接着是代码审查，然后将代码自动部署到相关的环境中。

### GitOps 原则

由于 GitOps 是两者中较新的一个，我们将在原理上扩展一些；更多信息，我们还将深入探讨问题[什么是 gitop](https://harness.io/blog/devops/what-is-gitops/)？如果你想改进，请查看 [GitOps 最佳实践](https://harness.io/blog/devops/6-gitops-best-practices/)。

#### 整个系统以声明的方式描述

运行应用程序所需的一切都在配置文件和/或配置代码中进行了描述。这包括所有支持性基础设施配置，如负载平衡器、数据库配置以及支持系统所需的任何东西。

#### 系统的状态存在于版本控制中

版本控制中的系统状态是系统在生产中如何运行的最终决定因素。在拉取请求、合并等过程之外对生产进行的更改。必须还原以符合真理的来源。

#### 自动应用批准的更改

在一个纯实现中，合并到主分支的所有变更会立即出现在下游环境中，而不需要门控/批准。

#### 漂移固结

与基于推的模型相比，GitOps 操作符自动协调源控制系统和目标环境之间的差异。

## 为什么是 GitOps？

GitOps 作为一种新的部署方法出现，从连续交付转移到真正的连续部署(见我们对这些细微差别的解释[这里](https://harness.io/blog/continuous-delivery/continuous-delivery-vs-continuous-deployment/))。

### 速度的需求

GitOps 解决了对创新和交付速度日益增长的需求。DevOps 标准化了交付周期，并为开发和运营的交叉带来了急需的一致性，GitOps 则通过赋予开发人员立即执行代码更改的权力，以及通过改变开发人员在向最终用户交付应用服务的同时消费 IT 服务的方式，增强了这种关系。

### 服务民主化

在传统模式中，DNS、负载平衡器、计算和存储等 IT 服务被严重孤立，需要几周到几个月的时间来调配。DevOps 将这一过程从几个月缩短到几周，有时从几周缩短到几天。实施 DevOps 的成熟组织通常拥有高水平的基础设施自动化，其中一些组织越来越多地使用按需 IaC 模型。

GitOps 提供的一个基本转变是默认通过代码工具的[基础设施来创建部署的基础设施，例如 Terraform——所有都在提交到版本控制系统的下游。在 GitOps 中，管理现代云基础设施是开发人员的事，而不是传统的看门人。](https://harness.io/blog/devops/infrastructure-as-code/)

## GitOps vs DevOps

### GitOps 和 DevOps 有什么区别？

除了网上关于两人对立的争论之外，实际上，两人更多时候是同事关系。从高层次来看，有几个关键的区别。

**所有的 gitop 都是 DevOps，但并非所有的 DevOps 都是 gitop:**虽然 gitop 专注于交付，但 DevOps 的范围要广得多，因为它涉及一系列更大的问题，包括 CI、可见性和治理。

**GitOps 更具规范性:**虽然 DevOps 包含了许多实现相同结果的途径，但是 GitOps 就如何构建和部署服务做出了一些具体的规定。

### 集成 GitOps 和 DevOps:朋友而不是敌人

GitOps 是 DevOps 的一部分吗？GitOps 和 DevOps 有什么关系？虽然有些人可能会认为 GitOps 是 DevOps 交付组件的替代品，但它在很大程度上是 DevOps 方法的自然延伸。此外，great GitOps 依靠更广泛的 DevOps 文化和生态系统蓬勃发展。快速迭代和快速生产部署只能在更广泛的系统中工作，该系统具有强大的测试机制、度量和遥测的高可见性以及设计良好的系统来减轻生产问题。

### 采用 GitOps

DevOps 可能有助于在 GitOps 之前引领潮流，在 GitOps 中，那些最成功地采用 GitOps 解决方案的人已经有了成熟的 DevOps 实践。采用 GitOps 流程的过程因组织而异，但通常情况下，最适合机载的应用程序将利用以下特征。

**整个应用程序在代码中描述:**部署所需的一切都在版本控制中描述。这包括负载平衡器、数据库和从头开始所需的一切。在 GitOps 工作流程中，不需要额外的参数。

**现代/云原生应用**:使用基于 Git 的方法，底层基础设施必须能够支持声明式供应。首先想到的是基于 Kubernetes 的基础设施，但是其他非 Kubernetes 系统越来越多地以声明的方式公开它们的服务。

**自动化测试覆盖**:自动部署的应用程序不能等待手动过程。在您的 CI/CD 流程中，运行测试应该已经完全自动化了。

### 使用 GitOps 的 DevOps

有了对 GitOps 的深入了解，我们现在可以看看它是如何在积极采用的 DevOps 技术中优化交付的。随着 GitOps 增强交付，DevOps 团队要完全采用 DevOps 最佳实践，需要考虑几个关键因素。

规划适当的监控和回滚策略。随着版本迅速进入[生产](https://harness.io/blog/continuous-delivery/deployment-environments/)，减少不良变更的爆炸半径变得至关重要。典型的 GitOps 工作流是相当精益的，这就是为什么许多组织在部署到生产时仍然选择基于管道的方法。查看线束[持续验证](https://harness.io/blog/continuous-verification/machine-learning-to-safeguard-your-deployments/)了解我们如何独特地解决这个问题。

DevOps 对适当的治理和审计又爱又恨，尽管自日志中的纯文本密码时代以来，现代工具已经有了显著的改进。GitOps 也有这个问题，它记录了所有的东西，但是在 Git 日志中挖掘一个月前的变化是开发人员的工作，而不是审计人员的工作。

GitOps 是一台高性能的机器，大规模实现任何如此强大的东西都有不可避免的艰辛。从供应操作员到 Git 存储库蔓延，再到 Kubernetes 集群管理，DevOps 团队都有自己的工作要做。

## GitOps vs DevOps:你该怎么办？

### 非技术目标

正如每一个技术问题一样，有许多途径可以找到正确的答案。在询问任何技术问题之前，请了解您组织的需求。很少有组织不会从 GitOps 令人难以置信的交付速度中受益，但您应该始终关注您业务周围的其他驱动因素。

为了让 GitOps 真正发挥作用，您需要有一个完全自动化的质量体系。随意部署与质量不足的流程不相适应。

对于受监管行业中的企业而言，以满足合规性需求的方式扩展 GitOps，同时保持速度，需要时间来有效实施。每一个操作都记录在 Git 历史中，但是聚合、搜索和使用现有的[审计跟踪](https://harness.io/blog/continuous-delivery/audit-trails/)需要特定领域的知识。

### 技术驱动因素

GitOps 在强大的现有 DevOps 生态系统中蓬勃发展。和所有事情一样，先走后跑。考虑您的过程是否足够成熟来支持 DevOps，并理解这不是一个全有或全无的命题。

当应用程序开发的[微服务](https://harness.io/blog/continuous-delivery/microservices-deployment-strategies/)方法变得流行时，许多组织迅速行动，并发现他们有大量的技术成熟度和基础问题仍然没有解决，尽管他们处于最新技术趋势的顶端。对于 GitOps，同样的道理也存在，因为它不会解决您所有的底层技术问题。如果您的 CI/CD、系统架构、拉式请求流程等。今日破，**GitOps 采用**后还会继续破。

## Harness 如何帮助您？

我们希望您从这篇博客中能够更好地理解 GitOps 和 DevOps 的优点，以及它们如何适应更广泛的软件开发生命周期。在 Harness，我们支持这两种方法，我们知道没有放之四海而皆准的解决方案。

此外，我们还致力于为开发者提供支持 GitOps 高性能引擎所需的完整解决方案平台。它从 CI 开始优化测试和构建周期，继续将安全性集成到您的管道中，并在发布后添加特性标志和监控反馈。我们在这里支持您所有的开发计划，所以[今天就预订您的演示吧](https://harness.io/demo/)！