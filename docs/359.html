<html>
<head>
<title>Feature Flags w/ Python: Tutorial for Newbies &amp; Experts | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Python特性标志:新手和专家教程|线束</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/feature-flags-with-python#0001-01-01">https://www.harness.io/blog/feature-flags-with-python#0001-01-01</a></blockquote><div><p>如果您想快速入门使用Python代码库中的线束特性标志，这是为您准备的！</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>有许多关于最流行的编程语言的调查和测量，但是贯穿每一个<a href="https://statisticstimes.com/tech/top-computer-languages.php" target="_blank"/><a href="https://www.northeastern.edu/graduate/blog/most-popular-programming-languages/" target="_blank">排名</a>的一个共同线索是Python是最受欢迎的语言之一。这是一种初学者友好的语言，是数据科学的默认语言，通常是最实用的语言之一。如果您是Python的新手，或者是经验丰富的开发人员，想要快速入门在代码库中使用Harness特性标志，那么这是为您准备的！</p><h2>先决条件</h2><p>下载并安装<a href="https://www.jetbrains.com/pycharm/download" target="_blank"> PyCharm CE </a>(如果不想创建账号，一定要选择社区版)。您选择的IDE通常可以工作，但是我的说明和截图将针对PyCharm的体验。</p><p>建议您对Python有一些经验，但是如果您已经熟悉另一种语言，它是一种非常友好的语言，并不难使用。下面的所有代码片段都包含在这个<a href="https://gist.github.com/chrisjws-harness/c462a6d1f9ee78181b216e8b11a7fd0c" target="_blank">要点</a>中，所以如果你讨厌在博客上复制/粘贴代码块，我可以帮你。</p><p><strong>警告:</strong>空格和缩进在Python中很重要，所以复制/粘贴时要小心。</p><p><strong>另一个警告:</strong>带引号的复制/粘贴可能会导致编码问题，所以如果您的IDE在带引号的行上显示错误，请尝试删除并重新添加引号。</p><h2>辅导的</h2><p>用Python 3创建一个新项目(在这个例子中我使用的是3.8.2)。</p><figure class="w-richtext-figure-type- "/><p>如果在项目中自动创建了main.py文件，请在继续之前将其删除。</p><p>在终端中，克隆repo并运行设置步骤。</p><p>#克隆repo，移动文件并清理文件夹<br/> git克隆https://github.com/chrisjws-harness/flaskSaaS.git&amp;&amp;mv flask SaaS/*(DN)。&amp; &amp; rm -rf烧瓶aaS <br/> <br/> #设置应用程序<br/>make install&amp;&amp;make dev<br/>python manage . py initdb</p><figure class="w-richtext-figure-type- "/><p>...</p><figure class="w-richtext-figure-type- "/><p>…</p><figure class="w-richtext-figure-type- "/><h3>设置功能标志SDK</h3><p>在requirements.txt中，在底部添加新的一行:</p><p>线束-特征标志==1.0.5</p><p>从终端安装更新的要求:</p><p>pip3 install -r requirements.txt</p><figure class="w-richtext-figure-type- "/><p>将以下导入语句添加到app/views/main.py的顶部:</p><p>从featureflags.client导入CfClient，Target</p><p>在app/views/main.py中的导入语句下添加以下几行，并添加您的帐户id:</p><p>meta = { <br/> "account": " &lt;你的账号id这里&gt;"，<br/> "org": "default "，<br/> "environment": "PyCharm "，<br/> "project": "Python_FF" <br/> }</p><figure class="w-richtext-figure-type- "/><h3>设置您的功能标志项目</h3><p>在线束中，创建一个新项目。我的就叫<em> Python FF </em>。</p><figure class="w-richtext-figure-type- "/><p>导航到环境(左侧栏)并单击“创建环境”</p><p>将您的环境命名为“PyCharm”，将其保留为“非生产”，然后单击“创建”</p><figure class="w-richtext-figure-type- "/><p>在新环境中，单击“添加密钥”</p><p>命名为“my_key ”,并选择“Server”。点击“创建”</p><figure class="w-richtext-figure-type- "/><p>在生成的页面上复制您的令牌并保存在安全的地方。一旦您离开，此令牌将不可用。</p><p>导航至功能标志(位于左侧“目标”上方)。</p><p>单击“+旗帜”创建您的第一面旗帜。</p><p>选择“多变量”，将标志命名为“消息”，并给它一个描述(可选)。点击“下一步”</p><figure class="w-richtext-figure-type- "/><p>提供以下消息作为名称、值对，为关闭和打开设置不同消息的默认规则，然后单击“保存并关闭”</p><p><strong>名称值</strong>友好欢迎！欢迎，我想我该走了</p><figure class="w-richtext-figure-type- "/><h3>绑上你的旗帜</h3><p>在app/views/main.py中，找到注释“Feature flags init goes here！”并在下面添加以下内容。用您为环境生成的密钥替换<your key="">:</your></p><p>try:<br/>API _ key = "&lt;your key&gt;"<br/>cf = cf client(API _ key)<br/>ff _ identifier = " guest "<br/>ff _ name = " guest "<br/>Target = Target(identifier = ff _ identifier，name=ff_name，* * meta) <br/>异常为e: <br/> print(e)</p><p>在同一个文件中，在注释“Flag goes here！”：</p><p>flags[" welcome _ text "]= cf . string _ variation(" message "，target，"默认消息")</p><figure class="w-richtext-figure-type- "/><h3>尝试您的功能标志</h3><p>在CLI中，运行以下命令:</p><p>python manage.py runserver</p><p>在您的浏览器中，导航到<a href="http://localhost:5000"> http://localhost:5000 </a>，在这里您将看到您的标志关闭消息。功能标志可能需要一些时间来初始化，因此您可能需要刷新页面。</p><figure class="w-richtext-figure-type- "/><p>将“消息”的标志切换为真。</p><figure class="w-richtext-figure-type- "/><p>刷新页面，查看主页上的消息更新:</p><figure class="w-richtext-figure-type- "/><p>神奇！</p><h2>下一步是什么？</h2><p>你已经完成了大部分工作。在UI中创建新的标志，并在代码中添加相应的语句。为了更好地理解Python中的特征标志，接下来要研究一些东西:</p><ul role="list"><li>查看完整的Python文档<a href="https://ngdocs.harness.io/article/hwoxb6x2oe-python-sdk-reference" target="_blank">这里</a>和<a href="https://github.com/drone/ff-python-server-sdk/blob/main/README.rst" target="_blank">这里</a>。</li><li>使用“bool_variation”而不是字符串变体。</li><li>添加关于如何提供标志的附加规则。</li><li>我们为guest返回了一个简单的标识符，但是看看当您识别其他用户并基于身份和属性提供不同的行为时会发生什么。</li><li>探索RBAC以及如何限制用户在功能标志中的行为。</li></ul><p>下次见！</p><p>克里斯</p></div></div>    
</body>
</html>