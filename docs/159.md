# 用于连续交付的线束模板库|线束

> 原文：<https://www.harness.io/blog/introducing-the-harness-template-library-for-continuous-delivery>

我们发布了一个名为“模板库”的新特性，允许客户模板化、索引和共享他们喜欢的命令/脚本。

从 DevOps 工程师那里拿走脚本有点像从销售代表那里拿走费用；一级战备就在眼前。

在 Harness，我们试图简化持续交付，以便开发人员和 DevOps 团队花更多的时间编写软件，而不是编写部署脚本。为了实现这一点，我们有一个名为“智能自动化”的概念，它可以帮助团队将他们的工具、工件、运行时和云的生态系统缝合在一起，以便在几分钟内构建部署管道。

将 Harness 视为持续交付即服务，我们的平台交付 95%的开箱即用需求，并为您提供编写最后一英里脚本的灵活性。

我们上周发布了一个名为“模板库”的新功能，允许客户对他们喜欢的命令/脚本进行模板化、索引和共享，从而实现跨团队和部署管道的重用。

## 分享是关怀

DevOps 的核心是协作。分享知识、经验、代码、成功和失败是一种力量倍增器。任何企业都不能再依靠一两个 Jedis 来扭转局面。如果原力要保持强大，就必须分享和重复使用绝地技巧。这意味着部落知识和魔法必须被整理、重用，并在所有团队中推广，这样每个人都会受益。

## 线束模板库

我们的新模板库允许客户对他们喜欢的 HTTP 请求、BASH 和 Powershell 脚本进行编码和分类——所有这些都可以在 Harness 部署工作流和管道中进行链接和实例化。

这里有一个 2 分钟的短片:

## 示例-新遗迹的部署标记

使用一个简单的 HTTP webhook，我们可以将 Harness 部署标记为 New Relic(和其他 APM/Log 工具)中的事件，这样当用户分析 New Relic 性能数据时，他们就可以根据上下文了解部署。

更好的是，我们可以使用 Harness 模板库将这个 HTTP webhook 模板化，这样许多开发团队就可以为他们自己的应用程序、服务和部署链接和重用这个部署标记。

只需进入**设置>模板库**

接下来，**添加文件夹**并将其命名为**部署标记**。

点击**添加模板**，选择 **HTTP** 。

使用[新遗迹的文档](https://docs.newrelic.com/docs/apm/new-relic-apm/maintenance/record-deployments)插入你的 HTTP webhook 属性。只需使用$前缀并单击“add variable”即可将自动添加线束变量添加到任何此类配置数据中在下面的新 Relic 示例中，我们为应用程序名称和新 Relic API 密钥创建了两个变量。这意味着开发团队可以在他们的部署工作流中实例化这个 webhook，并传入他们自己的参数(例如，应用程序名称、新的遗留 API 等)。).

创建后，新遗迹部署标记将如下所示:

现在，让我们创建一个新的基本部署工作流:

您可以看到，Harness 已经使用其智能自动化功能自动预填充了许多部署步骤和配置(基础架构、负载平衡器、部署)。然而，它也允许用户将他们自己的命令添加到任何这些步骤中。

在步骤 3(部署服务)之后，我们可以通过点击**添加命令**来添加我们的新遗留部署标记。

接下来，我们从我们的库中选择我们的新遗迹部署标记模板:

点击**链接**，然后使用$输入您的特定应用程序和新遗留变量，然后从为您管理的线束中选择适当的环境变量。例如，Harness 允许您在应用程序、服务和环境级别设置变量。在我们下面的例子中，应用程序名称和新的遗留 API 密钥是应用程序级别的变量。

现在我们的部署工作流程看起来是这样的:

Harness 现在将安装新的服务构件，然后使用模板库中的 HTTP 模板在 New Relic 中注册一个新的部署事件，它将动态地使用我们的特定应用程序和 New Relic API 密钥来这样做。

我们可以对任何 HTTP 请求、BASH 或 Powershell 脚本应用相同的概念。简直太简单了！

今天就报名参加你的[免费试用](https://app.harness.io/auth/#/signup/?module=cd)吊带吧！

干杯，
史蒂夫。@伯顿说