# 云成本管理最佳实践|利用

> 原文：<https://www.harness.io/blog/ccm-best-practices>

在本文中，我们回顾了多种云成本管理最佳实践，以帮助所有相关人员(从开发人员到高管)节省资金。

云成本管理是高效管理您的云支出的概念。它通常包括了解与您的云相关的成本，并消除那些不必要的成本。谈到成本管理，没有捷径可走。你必须制定适当的计划，做好基本的准备，并让你的团队参与进来，这样他们才能理解形势的重要性。目前，云成本管理已经成为云提供商的一个重要话题，并且已经成为任何软件公司的新要求。

Gartner 预测，到 2020 年，公共云市场将增长到 2579 亿美元，预计这些公司将总共浪费 908 亿美元的公共云支出。公共云提供商不太可能抱怨，但工程师和公司财务肯定会抱怨。亚马逊网络服务(AWS)、微软 Azure 和谷歌云平台(GCP)等云提供商正在成为我们 IT 预算的更大一部分。

Gartner 还在最近的一份新闻稿中表示，到 2024 年，云市场将占全球企业 IT 总支出的 14%，高于 2020 年的 9%。

这些数字绝非无关紧要，如果你还没有注意到，你应该注意一下。在云上花费数十亿美元的公司必须有效地管理成本。然而，这与目前正在发生的事情恰恰相反。

我们最终浪费了每年大约 35%的云支出。出于各种原因，这一比率令人担忧。然而，大多数企业似乎在云成本优化方面失败了。他们中的一些人因过度配置而浪费资金，另一些人获得了错误的实例大小，还有一些人在不使用时忘记关闭虚拟机。

云成本管理工具有助于开发运维、基础架构、工程和财务团队深入了解云资源利用率及其成本。这些工具是规划、分析、理解和减少支出以最大化云投资所必需的。它们还有助于确定各种成本优化机会，从而最大化云使用的商业价值。鉴于组织采用基于云的技术的趋势日益增长，开始优化您的云资源并制定云成本优化策略非常重要。

在 Harness，我们发现云成本管理工具主要服务于以下使用案例:

**云成本优化**:组织通常在云提供商身上花费过多，他们希望降低成本，只为他们需要/使用的东西付费。他们需要优化与云相关的成本。

**云成本透明**:从高管到开发人员，组织的每一层都应该有云成本的可见性。所有利益相关者都应该能够理解与其相关的环境中的云成本。

**云成本治理**:应该围绕云成本设置护栏，从本质上创建确保成本处于控制之下的流程。

Harness' [云成本管理工具](https://harness.io/products/cloud-cost)、CloudCheckr、CloudZero、Spot 等可帮助您优化云成本并减少云支出。

降低成本不是一次性的事情。工程和金融需要不断的反馈来创新和改变。因此，云成本管理应运而生。

在这篇博客中，您将了解云成本优化的最佳实践，这将帮助您降低总体云成本并节省云成本。

## 云成本管理最佳实践

您可以使用下面概述的云成本管理最佳实践来制定云成本优化策略，将成本与具体的业务活动联系起来，从而让您了解谁、什么、为什么以及如何花费您的云预算。

### 正确调整未充分利用的资源的大小

减少云基础设施支出的最有效方法之一是确保您的集群达到最佳规模。使用像 [Azure Advisor](https://azure.microsoft.com/en-us/overview/cost-optimization/#tools) 和 [Harness CCM](https://ngdocs.harness.io/category/viib5j7fek-ccm-recommendations) 这样的工具找到您的资源利用率，并获得关于如何通过调整或合理调整您的资源来减少您的云支出的建议。

Harness 的 CCM 分析您的配置并提供可行的建议，以帮助您优化集群资源的性能和成本。实施建议有可能帮助您优化成本并减少您的云账单。它还可以建议跨实例族的更改。合理调整不仅仅是降低云成本；它还有助于云优化，这意味着充分利用您购买的资源。

### 利用点实例

Spot 实例与 RIs 不同，但它们可以帮助你在 AWS 或 Azure 上节省更多的钱。 [Harness 的自动停止规则](https://harness.io/blog/cloud-cost-management/autostopping-rules-kubernetes/)可以自动关闭空闲的虚拟机和容器，并在 spot 实例上无中断地动态运行它们，从而降低高达 75%的成本。

### 关闭未使用的资源

您可以使用云管理平台/工具检测闲置、未分配和未充分利用的虚拟机/资源。[闲置资源](https://harness.io/blog/cloud-cost-management/idle-resources/)是指那些之前一直在运行但现在仍在运行的资源，这会增加成本。购买了未分配或未充分利用的虚拟机(VM ),但从未使用。

你不用为你在任何云平台上使用的东西付费；你为你点的或买的东西付款。清除您不再需要的资源可以显著降低您的云账单。

[Harness CCM](https://ngdocs.harness.io/article/dvspc6ub0v-create-cost-perspectives) 帮助您分析闲置和未分配资源的成本，让您对云的使用情况有一个初步了解。您还可以基于您的云环境过滤 Harness 中的细节。一旦确定了闲置资源，就可以通过关闭它们来降低云成本。

### 配置自动停止规则

Harness 提供了一种独特的云成本智能功能，可以自动关闭空闲的虚拟机和容器，并在 spot 实例上动态运行它们，而不会中断，从而降低高达 75%的成本。您可以通过为您的云资源配置[自动停止规则](https://ngdocs.harness.io/category/e04ek5vxtx-optimize-cloud-costs-with-intelligent-cloud-auto-stopping-rules)来实现这一点。

对于非生产工作负载，自动停止规则是一个动态且强大的资源编排器。以下是将自动停止规则整合到您的云资源中的一些最显著的优势:

*   自动检测空闲时间，并关闭(按需)或终止(现场)资源。
*   支持在完全协调的 spot 实例上运行工作负载，而无需担心 spot 中断。
*   静态预测空闲时间，尤其是工作时间。
*   允许访问停止或终止的机器，这在强制关机的情况下是不可能的。
*   停止没有计算优化的云资源，只有启动/停止操作。

### 检测云成本异常

云成本异常检测可用作控制云成本的工具。成本异常检测为您指出了应该注意的事项，以便控制您的云成本(节省资金)。每当您的云成本显著增加时，就会触发警报。这有助于您跟踪潜在的浪费和意外费用。它还记录每天、每周或每月重复发生的事件(季节性)。

### 为正常运行时间或停机时间配置固定计划

为您的资源配置[固定正常运行时间和停机时间表](https://ngdocs.harness.io/article/7025n9ml7z-create-autostopping-rules-aws#fixed_schedules)。例如，您可能希望您的特定资源从星期五下午 5 点到星期一上午 9 点不可用。您可以指定所选资源在该时间段内的停机时间。在此期间，您指定的服务将不可用，这样您可以降低成本。当多个团队利用/使用相同的资源时，这也很方便。

### 利用 AWS 保留实例(RIs)和 Azure 保留虚拟机实例

打算长期使用云的企业应该投资于保留实例。这些是基于预付款和时间承诺的更大幅度的折扣。RI 节省可达 75%，这使得它成为云成本优化的必备工具。由于 RIs 可以购买一年或三年，因此分析您过去的使用情况并正确规划未来至关重要。

**Amazon EC2 Reserved Instances(RI)**与按需定价相比，提供显著的折扣(高达 72%)，并在特定的可用性区域使用时提供容量预留。保留实例不是物理实例，而是应用于您帐户中按需实例使用的计费折扣。这些按需实例必须匹配某些属性，例如实例类型和区域，以便从计费折扣中受益。与按需实例定价相比，节省计划还可以显著节省您的 Amazon EC2 成本。有了储蓄计划，您就承诺了一个一致的使用量，以每小时美元计算。这为您提供了使用最符合您需求的实例配置的灵活性，并继续节省资金，而不是对特定的实例配置做出承诺。

**Azure Reserved Virtual Machine Instances**在 Windows 和 Linux 虚拟机上提供一年期或三年期服务，可显著降低成本，与现收现付价格相比可降低 72%。当您将从 Azure RIs 获得的成本节省与 Azure 混合优势的附加值结合起来时，您可以节省高达 80%的成本。

### 为团队和项目设置预算和配置阈值

创建自定义预算，并在成本超出(或预计超出)预算时收到通知。还可以根据实际成本或预测成本设置预算百分比的阈值。

为不同的团队和业务单位设置预算和阈值有助于消除大量的云浪费。

### 组建云卓越中心团队

[云卓越中心(CCoE)](https://harness.io/blog/cloud-cost-management/cloud-center-of-excellence/) 是一个由高管(CFO、CTO)、IT 经理、运营经理、系统架构师、应用程序开发人员、网络工程师和数据库工程师组成的团队。该团队可以帮助您确定云成本优化的领域。CCoE 团队还可以帮助您确定哪个云提供商最适合您的需求、所需的云服务类型、云容量、云环境等等。所有这些因素都可能在控制成本方面发挥重要作用。

### 利用实时数据做出及时的成本决策

了解正确的云资源利用率数据可以对云支出产生重大影响。AWS Cost Explorer、Azure Cost Management、Apptio Cloudability 和 Harness Cloud Cost Management (CCM)等工具允许您在简单直观的界面中查看、了解和分析您的云成本。使用[利用视角](https://ngdocs.harness.io/article/dvspc6ub0v-create-cost-perspectives)，您可以向所有这些数据添加业务上下文。透视图使您能够以更符合业务需求的方式对资源进行分组，从而做出更明智的决策。

### “云成本影响”文化

每个主要功能设计都应该包括一个针对云成本影响的复选框。随着时间的推移，这在应用程序开发人员和跨职能团队中培养了一种心态和文化，即成本只是另一个需要优化的边界条件。

## 结论

我们希望这些云成本管理最佳实践能够帮助您提出一些困难的问题。您是否使用了正确的云成本管理工具来了解您的云成本并优化您的云资源？您是否对云成本反应迟钝？

您的团队可以积极主动地利用云计算成本管理来降低成本。Harness CCM 旨在将云成本分析和管理带到使用云资源的工程师手中。阅读[文档](https://ngdocs.harness.io/category/exgoemqhji-ccm)以了解更多关于其功能和产品的信息。

想了解如何利用云成本管理吗？[请求演示](https://harness.io/products/cloud-cost/)，一名线束专家将带您开始线束云成本管理。或者，阅读这篇关于[最佳 CCM 工具](https://harness.io/blog/cloud-cost-management-tools/)的文章，找到适合你的工具。