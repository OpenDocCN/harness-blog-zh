# 移植特征标志工具|线束时的最佳实践

> 原文：<https://www.harness.io/blog/migrating-feature-flag-tools>

以下是更改特征标志工具时如何进行的一些建议。

从一种工具迁移到另一种工具从来都不是世界上最容易的过程。当涉及到与您的应用程序挂钩或处理您的基础设施的开发人员工具时，尤其如此。开发人员和工程团队经常避免切换到更好的平台，只是为了避免迁移的痛苦和随之而来的错误。

然而，当谈到迁移特性标志工具时，我们发现这真的不是什么大事。在这篇博客中，我们将看看这是为什么，以及当你展望下一个功能标志管理解决方案时应该记住什么- [希望是我们的](https://harness.io/products/feature-flags/)(在这一点上，请留意我们的 [DevOps 工具](https://harness.io/learn/developer/devops-tools/)页面，以进行产品比较，利用功能标志，Optimizely，LaunchDarkly，Split.io 等-即将推出！).

*Psst - sneak peek of our Feature Flag tool!*

在开始之前，有一点需要注意:所有这些建议既适用于商业解决方案，也适用于内部解决方案。如果你正在寻找关于如何留下你自己的特色标志解决方案的更具体的建议，我们有一个两部分的系列，专门介绍我们是如何做到的——产品方面的和技术方面的。

## 识别短期和长期标志

当涉及到迁移特性标志工具时，首先要考虑的是对您目前拥有的标志类型做一点清点。

首先，确定哪些标志是临时的。这些标志目前有一定的用途，通常用于部署、新功能部署或实验中，但最终会过期并被弃用。

接下来，确定哪些标志是长期的或永久的。这些将是您的操作/功能切换、帐户管理标志和其他旨在长期保留在产品中的标志，如与基础架构相关的标志。

了解这两种类型的标志之间的区别是很重要的，因为在迁移中您不会以相同的方式处理它们。

## 向前构建-不要替换

按照寿命来区分您的标志的原因很重要:对于用于推出和测试的短期标志，对于大多数团队来说将是您的绝大多数标志，我们根本不建议迁移。

特性标志不像持续集成(CI)或持续交付(CD)工具，从某种意义上说，你不需要在一个固定的日期一次硬切换。你不能在同一个项目中同时使用多个 CD 工具，因为这会破坏你的部署，但是你可以在你的代码库中使用多个特性标记工具，而没有任何停机或错误的风险。

对于您的大部分功能标志，那些关注于部署、实验和金丝雀测试的短期功能标志，我们建议在新解决方案的基础上向前构建。让新旧解决方案共存，将所有新标志放在新系统上，并在旧标志的效用过期时弃用它们。最终，您将能够轻松关闭旧解决方案，而无需投资任何繁琐的迁移或替换工作。

您需要真正迁移的唯一标志是您的长期标志。在这种情况下，您有一个较小的标志子集，并且您通常只需要交换出由 SDK 定义的条件语句，或者控制切换的任何代码路径。

如果您正在迁移到[利用特性标志](https://harness.io/products/feature-flags/)，我们可以帮助您通过 API 批量创建所有必要的标志，以避免耗时的逐个创建过程。

通过这样做，您避免了大多数工具迁移中非常痛苦的部分——充满了复杂性和引入严重错误的风险——在这部分中，您需要保证在中途更换引擎时一切都将继续工作。

## 如果你不得不切过去

偶尔，我们确实听说有一个团队不得不一次完成所有的解决方案。合同更新即将到来，或者唯一知道如何维护旧系统的工程师即将离开。幸运的是，这种情况很少发生，但是在这些情况下，改变需要马上发生。

这种情况下的建议并没有什么不同。首先，做一遍检查，看看有多少旗帜仍在使用。你有很多可以删除的旧标志吗？通常，我们发现这个问题的答案是肯定的。

一旦确定了新解决方案需要哪些标志，就需要开始用新解决方案的 SDK 替换代码路径条件。这可能需要一些时间，但通常不是最困难的过程，不应该需要任何停机时间——尽管您希望在过程结束时验证行为是否符合预期。如果您需要，我们很乐意提供帮助-请联系支持部门。如上所述，我们可以帮助 API 批量创建标志，这样您就可以一次性添加需要的标志。

## 不要忘记支持

考虑迁移时的最后一个注意事项:*不要低估它的人的一面*。

当我们从我们的内部解决方案迁移到利用特性标志时，我们意识到，随着时间的推移，忘记围绕特性标志构建的更长的内部流程是多么容易。

很可能有人使用特性标志，依赖于标志，习惯于改变标志，甚至有些团队依赖于标志来构建功能，而这些可能是没有文档记录的，而您并不知道。因此，确保在过程的早期从每一个潜在的涉众那里获得反馈是很重要的，以确保你不会错过一些当前的特性标志用例。

## 结论

迁移特性标志工具并不是没有任何摩擦，但是因为它可以随着时间的推移而完成，在代码库中同时使用新的和旧的解决方案，所以它比您想象的要容易得多(并且不需要基础设施级别的更改)，当然也比大多数其他类型的软件开发迁移要容易得多！

功能标志的好处是广泛而深远的，谷歌、网飞、脸书和许多其他领先的科技公司都可以证明这一点。能够在向您的整个用户群推出新功能之前运行 A/B 测试是令人惊奇的——但是功能标志所能做的远不止这些。如果你还不喜欢特性标志，但正在考虑，我们推荐你阅读我们写的另一篇文章:[你可能没有想到的 5 个特性标志用例](https://harness.io/blog/feature-flag-use-cases/)。先睹为快:其中一个和我们最喜欢的话题之一——度量有关！

如果您需要任何帮助，或者想讨论我们如何帮助您规划迁移，请立即联系支持部门！如果您刚刚开始使用功能标志，请立即了解更多关于[利用功能标志](https://harness.io/products/feature-flags/)的信息。