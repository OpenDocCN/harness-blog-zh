<html>
<head>
<title>Tutorial: Turning a GitHub Repo Into a Helm Chart Repo | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>教程:将 GitHub Repo 转换为舵图 Repo | Harness</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/helm-chart-repo#0001-01-01">https://www.harness.io/blog/helm-chart-repo#0001-01-01</a></blockquote><div><p>今天我想分享一下我和一个客户做的事情，让他的 GitHub 回购变成了自动化的 HTTP Helm Chart 回购。这是一个非常好的选择，因为有一个 GitHub 动作可以让回购指数自动更新。系好安全带。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>今天我想分享一下我和一个客户做的事情，让他的 GitHub 回购变成了自动化的 HTTP Helm Chart 回购。这是一个非常好的选择，因为有一个 GitHub 动作可以让回购指数自动更新。系好安全带。</p><h2>辅导的</h2><h3>要求</h3><p>一个 GitHub 账户，和一些舵图模型。</p><h3>第一步</h3><p>让我们创建一个超级简单的 GitHub Repo/项目:</p><figure class="w-richtext-figure-type- "/><h3>第二步</h3><p>现在，让我们创建一个名为<strong> gh-pages </strong>的分支。我已经在 UI 上了，所以我现在不会克隆/签出。<br/></p><figure class="w-richtext-figure-type- "/><h3>第三步</h3><p>让我们遵循<a href="https://helm.sh/docs/topics/chart_repository/" target="_blank">图表存储库指南</a>来确保我们的回购为托管 Helm Chart 回购做好准备。您需要确保您的<strong> gh-pages 分支</strong>被设置为 GitHub Pages。点击你的回购<strong>设置</strong>，向下滚动到<strong> GitHub 页面</strong>部分，设置如下:</p><figure class="w-richtext-figure-type- "/><h3>第四步</h3><p>现在，是时候按照这个 GitHub 动作指南赋予这个回购超能力了:<a href="https://helm.sh/docs/howto/chart_releaser_action/" target="_blank"> Chart Releaser 动作自动化 GitHub 页面图表</a>。</p><p><strong>重要:</strong>除了动作源，重要的是在<strong>主</strong>分支中保留一个<em>/海图</em>路径来托管你的舵海图源。</p><p>让我们克隆回购:</p><p>➜线束 _ 实验室 git 克隆 git <strong> @github </strong>。com:gabrielcerioni/harness-helm-charts . git<br/>克隆成‘harness-helm-charts’...<br/>远程:枚举对象:3，完成。<br/>远程:清点对象:100% (3/3)，完成。<br/>远程:总计 3 (delta 0)，复用 0 (delta 0)，打包复用 0 <br/>接收对象:100% (3/3)，完成。<br/></p><p>并添加舵图教程链接中建议的更改。</p><p>这个过程在<strong> gh-pages </strong>分支中创建或更新 index.yaml。所以，让我们用这个技巧来确保这个动作是有效的。</p><h3>第五步</h3><p>现在是时候添加我们的图表源路径，将项目推到原点，并祈祷一切顺利。我发现关于这部分的 Helm 文档有点差，这也是我写这篇文章的原因之一。</p><p>这是我们目前的状态:</p><figure class="w-richtext-figure-type- "/><p>让我们创建一个路径来存放我的非常简单和虚拟的 NGINX 舵图表源，然后我将添加我拥有的非常漂亮的舵图表:</p><p>mkdir 图表</p><figure class="w-richtext-figure-type- "/><p>这是一个 Helm 源码，我是通过跟随文档教程得到的。我什么都没改变。</p><p>让我们在 Chart.yaml 中添加一个随机版本，以确保它正常工作:</p><figure class="w-richtext-figure-type- "/><h3>第六步</h3><p>不错！是时候把它推到我们的原点了！</p><figure class="w-richtext-figure-type- "/><h3>第七步</h3><p>让我们确保这是可行的。</p><p>我来看看 GitHub 的动作标签。在我看来很可靠:</p><figure class="w-richtext-figure-type- "/><p>我不相信它。我再测试一次。现在是第 14 版！</p><figure class="w-richtext-figure-type- "/><figure class="w-richtext-figure-type- "/><p>有用！</p><figure class="w-richtext-figure-type- "/><p><strong>重要:</strong>你也可以在<strong> gh-pages </strong>分支中检查这个动作是否处理好了我们的 index.yaml。这个文件对任何 HTTP Repo 都是超级重要的吧？</p><figure class="w-richtext-figure-type- "/><p>您可以在您的实验室中通过相同的路径来验证这一点:<br/><a href="https://gabrielcerioni.github.io/harness-helm-charts/index.yaml" target="_blank">https://gabrielcerioni . github . io/harness-helm-charts/index . YAML</a></p><figure class="w-richtext-figure-type- "/><h2>大的最后一步——利用它:</h2><p>让我们在 Harness UI(连接器)中创建一个好的 Helm Repo 工件服务器:</p><figure class="w-richtext-figure-type- "/><p>并添加回购作为我的服务远程掌舵清单！</p><figure class="w-richtext-figure-type- "/><p>这需要一段时间，但它会加载可用的版本:</p><figure class="w-richtext-figure-type- "/><p>超级好看。让我们在模板滚动更新工作流中运行它！</p><figure class="w-richtext-figure-type- "/><figure class="w-richtext-figure-type- "/><p>没人能阻止我们！</p><figure class="w-richtext-figure-type- "/><p>我希望你喜欢这篇关于把 GitHub 回购变成 Helm Chart 回购的教程。如果您有任何问题，请联系我！</p><p>加百列</p></div></div>    
</body>
</html>