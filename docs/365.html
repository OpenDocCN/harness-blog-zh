<html>
<head>
<title>The Power of Container-Based CI | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>基于容器的配置工具的威力</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/container-based-ci#0001-01-01">https://www.harness.io/blog/container-based-ci#0001-01-01</a></blockquote><div><p>像Jenkins这样的传统工具导致基础设施难以维护。幸运的是，Harness CI的设计与众不同:使用容器！了解基于容器的CI如何提供帮助。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>本文由尤里·席耐尔和迪内什·加格合作撰写。</p><p>传统的CI工具(例如Jenkins)的设计方式迫使用户确保客户端(执行步骤的客户端)包含运行步骤所需的所有库。例如:如果该步骤正在执行一个HTTP请求，则必须安装一个HTTP客户端。如果step部署到K8s集群，那么就需要一个kubectl，等等。</p><p>这种架构很难维护。CI的大型实施很容易失控，原因有几个:</p><ol role="list"><li>用户必须确保所有客户端(或“从属端”)都是最新的。如果您想使用新版本的CLI，您就必须将新版本推广到所有客户端。</li><li>您可能对在不同的机器上使用不同版本的CLIs感兴趣(例如，不同版本的<a href="https://harness.io/blog/terraform-201-tutorial/" target="_blank"> Terraform </a>)。但是因为你不能在同一台机器上安装同一个CLI的不同版本，你需要有不同的机器，不同的版本，你必须确保每次执行都选择正确的版本，否则，构建将会失败...</li></ol><p>这是每个CI团队的噩梦，导致大量时间浪费，失败，主要是挫败感。</p><p>幸运的是，Harness CI的设计与众不同。Harness CI是基于容器的，它真正消除了在slaves中管理库的所有负担，并让您可以完全控制和查看每个执行中需要哪些库和CLI。</p><h2>它是如何工作的？</h2><p>让我们看看当您在Harness中创建CI管道时会发生什么。</p><p>在将构建阶段添加到管道之后，您可以开始添加将在构建被触发时执行的步骤。</p><figure class="w-richtext-figure-type- "/><p>对于每一步，您只需要定义几件事情:</p><ol role="list"><li>步骤名称(将显示在管道中)。</li><li>启动容器时使用的图像(您应该已经烘焙了所有库)。</li><li>容器启动后要运行的命令。</li></ol><p>你已经准备好了！</p><p>当执行管道时，Harness管理每个步骤的完整生命周期:</p><ul role="list"><li>在您选择的基础设施上开发容器。</li><li>运行所有的命令。</li><li>存储日志并将结果填充到UI或HTTP响应中。</li><li>在执行结束时拆除容器。</li></ul><figure class="w-richtext-figure-type- "/><p>因为容器是短暂的和不可变的，所以您不必担心更新库。如果您想使用新版本的CLI，只需将步骤设置为使用不同的映像。对使用同一个库的不同版本感兴趣？只需指定要在运行时提取的图像的标签。</p><p>为了节省资源消耗，Harness根据您的管道配置无缝地确定最佳pod规格。例如，在下面的屏幕截图中，内存和CPU的分配如下:</p><p>马克斯(S1，S2，{S3+S4+S5})</p><p>最大值(2GB &amp; 1CPU、3GB &amp; 1CPU、{(4GB &amp; 1 CPU)+(2GB &amp; 1 CPU)+(2GB &amp; 1 CPU)})</p><p>最大值(2GB &amp; 1CPU、3GB &amp; 1CPU、8GB &amp; 3 CPU) -&gt; <strong> 8GB &amp; 3CPU </strong></p><figure class="w-richtext-figure-type- "/><h2>使用基于容器的CI产品有什么好处？</h2><p>在以下情况下，您应该使用基于容器的CI解决方案:</p><ol role="list"><li>容器在您的组织中得到批准。</li><li>您熟悉docker映像，知道如何创建包含所需库的映像，或者可以访问它们。</li><li>你想使用一个超级容易使用和扩展的产品，使用<a href="https://harness.io/blog/write-first-plugin-for-cie/" target="_blank">插件</a>。</li></ol><h2>结论</h2><p>在本文中，我们了解了基于容器的CI工具，以及它们与Jenkins等传统工具的不同之处。世界确实正朝着基于容器的架构发展——看看现在市场上的大量CI/CD工具就知道了。大多数都是云原生的，像Jenkins这样的旧工具(已经有十多年的历史)已经不再适用了。我们强烈建议您尝试利用自己的优势，<a href="https://harness.io/products/continuous-integration/" target="_blank">看看CI有多简单</a>。</p><p>如果你想在CI上做进一步的阅读，为什么不读一下关于<a href="https://harness.io/blog/test-intelligence/" target="_blank">测试智能</a>？这一新功能旨在为您节省大量时间-快速移动，而不损坏东西。</p></div></div>    
</body>
</html>