<html>
<head>
<title>The Ultimate JSON Library: JSON.simple vs GSON vs Jackson vs JSONP | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>终极JSON库:JSON . simple vs GSON vs Jackson vs JSONP | Harness</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/ultimate-json-library-comparison#0001-01-01">https://www.harness.io/blog/ultimate-json-library-comparison#0001-01-01</a></blockquote><div><p>我们运行了一个基准测试，看看四个最流行的Java JSON库解析不同大小的文件有多快。这个基准可以帮助你决定。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>JSON是目前公认的在服务器和web应用程序之间传输数据的标准。我们经常不会想到我们使用的JSON库，但是它们之间还是有一些区别的。</p><p>JSON通常用于传输和解析大文件。这是在Hadoop或Spark集群中运行的数据处理应用程序中常见的场景。鉴于这些文件的大小，您可以看到不同库之间解析速度的显著差异。</p><p>小文件总是以高吞吐量作为传入请求出现，并且解析它们的速度很快，因此性能上的差异起初看起来并不是什么大问题。但是不同之处越来越多，因为在流量大的时候，您经常需要快速连续地解析大量的小文件。微服务和分布式架构经常使用JSON来传输这类文件，因为它是web APIs的事实格式。</p><p>并非所有JSON库的性能都一样。为您的环境选择正确的解决方案至关重要。我们运行了一个基准测试，看看四个最流行的Java JSON库解析不同大小的文件有多快。这个基准可以帮助你决定。</p><h2>JSON库</h2><p>JSON.simple vs GSON vs Jackson vs JSONP对于基准测试，我们查看了四个主要的Java JSON库:JSON . simple、GSON、Jackson和JSONP。所有这些库都广泛用于Java环境中的JSON处理，并根据它们在Github项目中的受欢迎程度进行选择。以下是我们测试的产品:</p><ul role="list"><li><a href="https://github.com/fangyidong/json-simple"> Yidong Fang的JSON . simple</a>–JSON . simple是一个用于编码和解码JSON文本的Java工具包。这意味着它是一个轻量级的简单的库，但仍然具有很高的性能。</li><li><a href="https://github.com/google/gson"> Google的GSON</a>–GSON是一个Java库，可以将Java对象转换成JSON，反之亦然。它提供了完全支持Java泛型的额外好处，并且不需要您注释您的类。不需要添加注释会使实现更简单，如果您没有访问源代码的权限，这甚至是一个需求。</li><li><a href="https://github.com/FasterXML/jackson"> FasterXML的Jackson项目</a>–Jackson是一组数据处理工具，以其流式JSON解析器和生成器库而闻名。它是为Java设计的，也可以处理其他非JSON编码。根据我们对Github用法的发现，它是最流行的JSON解析器。</li><li><a href="https://jsonp.java.net"> Oracle的JSONP</a>–JSONP(JSON Processing)是一个用于JSON处理的Java API，即围绕消费和生产流JSON文本。这是JSR353的开源参考实现。</li></ul><h2>基准:2017年</h2><p>我们对大文件和小文件的库进行了基准测试。处理不同文件大小的需求(以及性能)是不同的，需要解析这些文件的环境也是不同的。</p><p>基准测试了两个关键场景:大文件的解析速度(190 MB)和小文件的解析速度(1 KB)。大文件取自<a href="https://github.com/zeMirco/sf-city-lots-json"> GitHub </a>。这个小文件是从这里随机生成的<a href="http://www.json-generator.com/"> JSON生成器</a>。</p><p>对于大文件和小文件，我们在每个库中运行每个文件10次。给定大文件的大小，我们对每个库每次运行进行10次迭代。对于每个库，每个小文件每次运行都要迭代10，000次。对于小文件测试，我们没有在迭代之间将文件保留在内存中，测试是在AWS上的c3.large实例上运行的。</p><p>下面完整显示了大文件的结果，但是为了节省空间，我进一步平均了小文件的结果。要查看扩展结果，<a href="https://docs.google.com/spreadsheets/d/1iOSAkqRwGGbLHRkcKSyHwpOWYdSrkuQKyUIZ6ef7N-I/edit?usp=sharing">请点击此处</a>。如果你想查看小文件或库的源代码，<a href="https://github.com/terencetaih/aws-speed">到这里</a>。</p><h2>大档成绩:2017</h2><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>这里差别很大！根据运行情况，杰克逊或JSON.simple的交易时间最快，杰克逊在总体上超过了JSON.simple。查看所有测试运行的平均结果，Jackson和JSON.simple在大文件中遥遥领先，JSONP远远落后于第三名，GSON远远落后于最后一名。</p><p>让我们用百分比来表示。杰克逊是所有赛跑平均时间的冠军。从两个不同的角度看这些数字，下面是百分比结果:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>这些是库速度之间的巨大差异！</p><p>外卖:这是一个照片完成，但杰克逊是你的获奖图书馆。JSON.simple在后面一个鼻子，另外两个在后视镜里。</p><h2>小档案成绩:2017</h2><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>上表显示了每个文件10次运行的平均值，总平均值在底部。赢得文件数量最快的图书馆的记录是:</p><ul role="list"><li>GSON–14</li><li>JSONP–5</li><li>杰克逊–1</li><li>JSON。简单–0</li></ul><p>查看所有文件的所有测试运行的平均结果，GSON在这里是赢家，JSON.simple和JSONP分别占据明显的第二和第三名。</p><p>杰克逊名列倒数第二。因此，尽管JSON.simple不是任何单个文件中最快的，但它在总体上是第二快的。尽管JSONP是少数几个文件中速度最快的，但它在总量上排在第三位。</p><p>Jackson在所有文件上非常一致，而其他三个库偶尔会比Jackson快得多，但在某些文件上，运行速度几乎相同，甚至稍慢。</p><p>让我们用百分比来表示这些数字，再次从两个不同的角度来看这些数字:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>与大文件测试相比，这些差异较小，但仍然很明显。</p><p>要点:JSON.simple运气不好，因为它再次输掉了一场势均力敌的比赛，但GSON是你的赢家。JSONP明显排在第三，杰克逊排在最后。</p><h2>结论:2017年</h2><p>在选择JSON库时，解析速度不是唯一要考虑的因素，但它是一个重要的因素。在运行这个基准测试时，我们发现在所有文件大小和所有运行中，没有一个库在解析速度上超过其他库。对大文件表现最好的库对小文件表现不好，反之亦然。</p><p>根据解析速度选择使用哪个库取决于您的环境。</p><ul role="list"><li>如果您有一个经常或主要处理大型JSON文件的环境，那么Jackson就是您感兴趣的库。GSON最纠结大文件。</li><li>如果您的环境主要处理大量小型JSON请求，比如微服务或分布式架构设置，那么GSON就是您感兴趣的库。杰克逊最纠结的是小文件。</li><li>如果您最终不得不经常处理这两种类型的文件，那么JSON.simple在两个测试中都以非常接近的第二名的成绩出现，这使得它成为可变环境中的一个好帮手。Jackson和GSON在多种文件大小下的表现都不尽人意。</li></ul><p>就解析速度而言，JSONP在任何场景中都没有太多值得推荐的地方。与其他可用选项相比，它对于大文件和小文件的性能都很差。幸运的是，据报道，Java 9正在获得原生JSON实现，人们可以想象这将是对参考实现的改进。</p><p>如果担心JSON库的解析速度，可以选择Jackson处理大文件，GSON处理小文件，JSON.simple处理两者。</p><h2>基准:2021年</h2><p>我们再次运行相同的基准，但是现在使用最新的库，并在Java 11上运行测试。</p><p>这些数字看起来与我们之前运行这些基准测试时大相径庭。总的来说，性能大幅提高。</p><h2>大档案成绩:2021</h2><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>最后的基准测试杰克逊是赢家，但这一次GSON是迄今最快的，JSONP紧随其后，然后是杰克逊和JSON.simple last。</p><p>再次从两个不同的角度看这些数字，这是百分比结果:</p><p>GSON显然是赢家。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><h2>小文件结果:2021</h2><p>在小文件结果中，Gson仍然是赢家。显然击败了其他三个竞争者。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>结果如下:</p><ol role="list"><li>Gson</li><li>Jsonp</li><li>简单</li><li>杰克逊</li></ol><p>Gson处理这些文件的速度比下一个候选文件快了将近200多毫秒。</p><h2>结论:2021年</h2><p>显而易见，java和json库变得更快了。比第一次运行基准测试时快多了。</p><p>同样显而易见的是，GSON加快了步伐，赢得了大文件和小文件的基准测试。在这两种情况下都很明显。</p></div></div>    
</body>
</html>