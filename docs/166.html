<html>
<head>
<title>Harness Introduces StackDriver Support for Automated Canary Deployments and Health Checks | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>引入 StackDriver 支持自动金丝雀部署和运行状况检查| Harness</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/stackdriver-automated-canary-deployments#0001-01-01">https://www.harness.io/blog/stackdriver-automated-canary-deployments#0001-01-01</a></blockquote><div><p>Stackdriver 是一个流行的监视工具，用于观察性能和诊断数据。了解 Harness 如何支持 Stackdriver。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p><a href="https://cloud.google.com/products/operations" target="_blank"> Stackdriver </a>是一款流行的监控工具，于 2014 年<a href="https://techcrunch.com/2014/05/07/google-acquires-cloud-monitoring-service-stackdriver/" target="_blank">被谷歌</a>收购，用于观察在谷歌云计算(GCP)、亚马逊网络服务(AWS)和 Kubernetes 环境中运行的服务的性能和诊断数据。</p><p>Stackdriver 聚合了来自云基础设施的指标、日志和事件，为开发者和运营商提供了一组丰富的可观察信号。在 Harness，我们使用无监督的机器学习自动分析这些信号，以确定新的部署或金丝雀阶段是否成功或包含异常，这可能需要自动回滚。</p><h2>为什么要自动化 Canary 部署和部署运行状况检查？</h2><p>如果您对<a href="https://harness.io/continuous-delivery/" target="_blank">连续交付</a>很认真，您会希望您的部署管道在 30 分钟内执行并完成。</p><p>为什么？实际上有几个原因:</p><ul role="list"><li>部署工作/时间严重限制了部署频率。</li><li>如果您的部署需要几个小时才能完成，则不能按小时部署。</li><li>快速失败总比缓慢失败好，记住部署是实验。</li><li>您花在部署上的时间越多，花在开发上的时间就越少。</li></ul><p>举个例子，我们的一个早期客户<a href="https://www.build.com" target="_blank">Build.com</a>曾经每周部署 3 次生产。每次部署后，5-6 名团队领导将登录到 New Relic 和 Sumo Logic，并手动验证 60 分钟，确保一切正常。这相当于每个部署仅花费 5-6 个工程小时进行验证。借助 Harness，Build.com 自动化验证，每次部署只需一名工程师和 15 分钟。</p><h2>机器学习在堆叠驾驶监控数据中的应用</h2><p>Harness 帮助客户在几分钟内构建部署管道。它还通过将机器学习与客户现有的监控工具相结合，帮助客户自动验证部署。在这种情况下，Stackdriver。</p><p>一旦 Harness 将新的应用程序或服务部署到目标环境中，它将立即连接到 Stackdriver，并为它正在观察的内容构建一个模型。然后，它会将该模型与以前的部署模型进行比较，以便识别新的异常或倒退，如果需要，会自动回滚到以前的工作版本。在 Harness，我们称之为持续验证。</p><h2>将 Stackdriver 与 Harness 集成在一起以实现持续验证</h2><p>好消息！没有 Stackdriver 的设置。</p><p>Harness 会为您注册的每个云提供商帐户自动发现 Stackdriver API。因此，如果您在 Harness 中注册了 10 个 GCP 帐户，它将自动发现这些帐户的 Stackdriver APIs。</p><h2>将堆栈驱动程序验证添加到您的部署工作流中</h2><p>在线束中创建或打开现有的部署工作流:</p><figure class="w-richtext-figure-type- "/><p><br/>点击<strong>添加验证</strong>，选择<strong>堆栈驱动</strong>:</p><figure class="w-richtext-figure-type- "/><p><br/> <br/>验证可以应用于任何类型的部署工作流，例如金丝雀、蓝绿色、滚动等等。</p><p>现在，让我们挑选与我们正在部署的<strong>服务</strong>相关的<strong>云客户、区域、</strong>和<strong>指标</strong>:<br/></p><figure class="w-richtext-figure-type- "/><p><br/>定义所有指标后，您可以选择是否需要以前的分析或金丝雀分析来建立基线。您还可以指定验证的持续时间(默认为 15 分钟)。</p><h2>让 Harness 和 StackDriver 自动验证您的部署</h2><p>通过集成和配置 StackDriver，您现在可以自动验证您的所有部署。<br/>以下面的示例为例，该示例展示了一个已使用 StackDriver 成功验证的典型部署。</p><p><br/>您可以在右侧看到，所有的 StackDriver 指标都已经过 Harness 机器学习算法的验证。绿色表示未发现异常或倒退，部署在其正常范围内运行。</p><figure class="w-richtext-figure-type- "/><p><br/>您可以通过注册<a href="https://harness.io/try-continuous-delivery-as-a-service-for-free/" target="_blank">免费试用</a>来开始使用 Harness 和 StackDriver。</p><p>干杯，<br/>史蒂夫。<br/>@伯顿说</p></div></div>    
</body>
</html>