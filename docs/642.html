<html>
<head>
<title>Tabs versus Spaces in Java | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Java | Harness中的制表符与空格</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/tabs-vs-spaces-write-java-google-twitter-mozilla-pied-piper#0001-01-01">https://www.harness.io/blog/tabs-vs-spaces-write-java-google-twitter-mozilla-pied-piper#0001-01-01</a></blockquote><div><p>在本帖中，我们将重点介绍Google、Twitter、Mozilla、Java standard等公司的格式指南和不同的Java编码风格，以及我们自己在Harness的团队。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>当谈到编码风格时，大多数选择都是相当随意的，取决于个人偏好。是的，即使制表符宽度在编辑器之间变化，空格也趋向于更加精确。如果有开发团队人类学这样的东西，风格指南可能是它的主要部分。</p><p>在本帖中，我们将重点介绍Google、Twitter、Mozilla、Java standard等公司的格式指南和不同的Java编码风格，以及我们自己在Harness的团队。</p><p>(无论你使用制表符还是空格，你在它们后面写的内容才是最重要的。代码质量至关重要，这就是为什么Harness会在运行时分析您的代码，从而为您提供关于所有错误和速度变慢的可操作的洞察力——甚至是那些没有在日志中结束的错误和速度变慢。)</p><h2>为什么首先要使用指南？</h2><p>可读性是这里的主要考虑因素。几乎可以肯定的是，你不会是唯一一个阅读你写的代码的人。对于下一个阅读你代码的人来说，你能做的最好的事情就是遵守约定。</p><p>一致的写作风格不仅有助于创建好看的代码，而且使代码更容易理解。twitter指南规定了一个例外，我们倾向于同意，“如果更‘可读’的变体带有危险或陷阱，可读性可能会被牺牲”。</p><ol role="list"><li><a href="https://google.github.io/styleguide/javaguide.html">谷歌Java风格指南</a>(还有<a href="http://source.android.com/source/code-style.html">另一款</a>安卓版)</li><li><a href="https://github.com/twitter/commons/blob/master/src/java/com/twitter/common/styleguide.md">推特风格指南</a></li><li><a href="http://www.oracle.com/technetwork/java/codeconvtoc-136057.html">官方Java代码惯例</a>(新的OpenJDK指南可从<a href="http://cr.openjdk.java.net/~alundblad/styleguide/index-v6.html">这里获得</a>)</li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Coding_Style#Java_practices"> Mozilla指南</a></li><li>我们自己的指导方针</li></ol><p>让我们看看他们有什么。</p><h2>1.缩进:制表符与空格</h2><p>首先，在继续之前，我们需要把这件事说出来。在样式指南中，空格明显优于制表符。我们在这里不讨论利弊，只分享研究结果:</p><ul role="list"><li>Google:  2个空格(android是4个空格，8个用于换行)</li><li><strong> Twitter: </strong> 2或4个空格(用于换行)</li><li><strong> Mozilla: </strong> 4个空格</li><li><strong> Java: </strong> 4个空格，制表符必须设置在8个空格处。两者都可以接受。</li></ul><p>来自Github的数据表明，大约10-33%的Java存储库喜欢制表符，大多数使用不同格式的空格，喜欢4个空格而不是2个。实际上有一个非常好的模块来运行这种分析(比较不同的语言)。顺便说一下，看看其他JVM语言，比如Scala和Clojure，我们看到几乎100%的2空格。</p><p>考虑到一个包含单个提交的更大的数据集，我们得到了不同的结果(约定分析项目，Github数据挑战赛的获胜者之一)，但我们可以估计它在两者之间，可能接近10%。</p><h2>2.线条长度、换行和换行</h2><p>有时Java代码行会变得很长，样式指南会设置何时适合中断或换行的约定。一般惯例是大约80-100最大长度</p><ul role="list"><li>谷歌: 100列</li><li><strong> Twitter: </strong>偏好100列</li><li><strong> Mozilla: </strong>恰当的判断</li><li><strong>爪哇:</strong> 80列</li></ul><p>当然，除了分号后的自然换行，换行符不仅用于过长的行，也用于逻辑分隔。一般惯例是在逗号之后、运算符之前断开，并使用常识提示。</p><p>下面是twitter风格指南中的一个例子，很好地利用了这个概念:</p><h6>//不好。<br/> // -换行符是任意的。<br/> // -扫码很难把信息拼凑起来。<br/>抛出new IllegalStateException("未能处理请求"+request . getid()<br/>+" for user "+user . getid()+" query:' "+query . gettext()<br/>+" ' ")；<br/> //好。<br/> // -消息的每个组成部分都是独立和自包含的。<br/> // -添加或删除消息的一个组成部分需要最少的重新格式化。<br/>throw new IllegalStateException("未能处理"<br/>+" request "+request . getid()<br/>+" for user "+user . getid()<br/>+" query:" "+query . gettext()+" ' ")；</h6><p>这有助于分离语句并创建一个逻辑，其中每行代码代表一个包含的/“原子”操作。风格指南倾向于同意这一点。</p><p>空行在混合中也有重要的作用，分隔逻辑块。Java标准样式指南也提到了双换行符，将接口和实现分开。</p><h2>3.变量命名</h2><p>广泛认同所有风格指南。first letter大写表示类名，camelCase表示方法和变量名，所有小写包名和ALL_CAPS表示最终静态常量。</p><p>一个常见的例外是记录器，我们通常将其定义为:</p><p>私有静态最终记录器记录器=记录器工厂。获取记录器(类。类)；</p><p>Twitter的指南增加了另一种有趣的方式，在变量名中包含单元:</p><h6>//不好。<br/> // -字段名很少透露字段的用途。<br/>类用户{<br/>private final int a；<br/>私终串m；<br/>...<br/> } <br/> //好。<br/>类用户{<br/>private final int agein years；<br/>private final String maidenName；<br/>...<br/> }</h6><h2>4.异常捕获条款</h2><p>例外是一个棘手的问题。最近我们报道了一项研究，调查了Github和Sourceforge上的600，000多个项目，揭示了一些关于异常的非标准使用的严峻事实。Google和Twitter的风格指南引用了臭名昭著的空catch块:</p><ul role="list"><li>Google: 没有空的catch块</li><li><strong>推特:</strong>换句话说，不要吞异常</li><li><strong> Mozilla: </strong>无参考</li><li><strong> Java: </strong>无引用</li></ul><p>此外，我们建议至少要遵守的另一个准则是确保您的异常是可操作的，并避免控制流异常。生产环境中产生的所谓“正常”异常的数量是可怕的。</p><p>异常和错误处理的当前状态主要依赖于日志文件来找到它们在生产中的根源，这是我们构建Harness背后的主要动机。如果您还没有，请查看一下！我们很想听听你的想法。</p><h2>5.为清晰起见，括号和花括号</h2><p>即使括号不是必需的，它也有助于提高可读性。对于复合谓词，为了清晰起见，通常使用括号，即使执行顺序很明显。例如:</p><h6>if(x = = y &amp; &amp; a &gt; 10)//bad<br/>if((x = = y)&amp;&amp;(a&gt;10))//good</h6><p>那么样式指南是怎么说圆括号分组的呢？</p><ul role="list"><li><strong>谷歌:</strong>“推荐”</li><li><strong>推特:</strong>“直截了当”(即使很明显)</li><li><strong> Java: </strong>“一般的好主意”</li><li>遵循Java标准</li></ul><p>当处理花括号时，所有的样式指南都检查了在开始花括号后的支撑符断开。</p><h2>6.构造函数中没有大脑</h2><p>有一条我们遵守但没有在任何风格指南中找到的指导原则是不要在构造函数中保留任何“大脑”(这样它们就不会被僵尸攻击——但显然不会被低级笑话攻击)。</p><p>如果我们需要创建一个对象并做一些繁重的操作来构建它，我们使用creator方法来代替。例如:</p><h6>//简单构造函数<br/>//<br/>private final int x；<br/>private final int y；<br/>私终串z；<br/>T5】public my class(int x，int y，String z){<br/>this . x = x；<br/>this . y = y；<br/>this . z = z；<br/> } <br/> //综合楼<br/>//<br/>public static my class create(List&lt;Stuff&gt;List，Set&lt;Stuff&gt;Set){<br/>//int x = some brains...<br/> // int y =更多的大脑...<br/> //其他大脑...<br/> // String z =这里更复杂的东西<br/> // <br/>返回新的MyClass(x，y，z)；<br/> } <br/>私有final int x；<br/>private final int y；<br/>私终串z；<br/> private MyClass(int x，int y，String z){<br/>this . x = x；<br/>this . y = y；<br/>this . z = z；<br/> }</h6><h2>最后的想法</h2><p>还有很多风格指南，我们没有在这篇文章中涉及，以避免这是一个详尽的列表，它们都可以在文章开头链接的原始文档中找到。可读性是保持你的代码没有错误的一个主要因素，而且…保持这些强迫症的感觉没有刺痛是正确的。</p><p>你遵循的一些独特的指导方针/怪癖是什么？你的公司/团队使用你自己的风格指南吗？</p></div></div>    
</body>
</html>