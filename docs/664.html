<html>
<head>
<title>Deploying a To-Do Application to Kubernetes with Harness | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Harness | Harness将待办事项应用程序部署到Kubernetes</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/deploying-to-do-application-kubernetes-harness#0001-01-01">https://www.harness.io/blog/deploying-to-do-application-kubernetes-harness#0001-01-01</a></blockquote><div><p>本教程展示了如何使用Harness CI/CD轻松部署Kubernetes待办事项应用程序。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>持续集成和<a href="https://harness.io/blog/what-is-continuous-delivery">交付</a> (CI/CD)是任何成功的DevOps方法的一个非常重要的部分。DevOps确保使用微服务、容器化应用程序、使用CI/CD、使用Kubernetes等云原生技术部署应用程序等等。所有这些都加速并简化了软件开发过程，并帮助开发人员协作。<a href="https://harness.io/products/continuous-delivery"> Harness </a>是一个现代软件交付平台，帮助成千上万的开发者采用CI/CD。</p><p>我们希望展示使用Harness设置CI/CD并简化您的<a href="https://harness.io/blog/best-practices-software-delivery">软件交付流程</a>是多么容易。以一个简单且易于开发人员理解的待办应用程序为例，我将向您展示如何使用Harness 将它部署到<a href="https://docs.harness.io/category/uj8bqz9j0q-kubernetes-executions"> Kubernetes。待办应用是每个开发者都熟悉的东西，涉及创建任务的简单操作。按照教程学习如何使用Harness CI/CD轻松部署这个应用程序。</a></p><h2>先决条件:</h2><ul role="list"><li>下载并安装<a href="https://nodejs.org/en/download/"> Node.js </a></li><li><a href="https://app.harness.io/auth/#/signup/?utm_source=internal&amp;utm_medium=social&amp;utm_campaign=community&amp;utm_content=kubernetes-toto-article&amp;utm_term=get-started">驾驭平台</a>免费账号访问</li><li>Kubernetes从任何云提供商处进行集群访问。您还可以使用<a href="https://minikube.sigs.k8s.io/docs/start/"> Minikube </a>或<a href="https://kind.sigs.k8s.io/docs/user/quick-start/"> Kind </a>来创建单节点集群。</li></ul><h2>教程:</h2><p>使用命令git clone<a href="https://github.com/pavanbelagatti/todo-app-example.git">https://github.com/pavanbelagatti/todo-app-example.git</a>将回购克隆到您的本地机器上。</p><p>然后，使用以下命令进入主文件夹:</p><h6>cd待办事项-应用程序</h6><p>然后使用命令<strong> npm install </strong>安装项目所需的所有依赖项。</p><p>使用命令节点<strong> app.js </strong>运行应用程序，并在浏览器中访问<a href="http://localhost:8080/"> http://localhost:8080 </a>以查看应用程序的工作情况。要运行测试，您可以简单地使用命令<strong> npm test。</strong>我们将<strong> deployment.yaml </strong>和<strong> service.yaml </strong>文件设置为通过Kubernetes部署和公开应用程序。</p><p>下面是<strong> deployment.yaml </strong>文件:</p><h6>apiVersion: apps/v1</h6><h6>种类:部署</h6><h6>元数据:</h6><h6>标签:</h6><h6>应用程序:待办事项-应用程序</h6><h6>名称:todo-app</h6><h6>规格:</h6><h6>副本:2</h6><h6>选择器:</h6><h6>匹配标签:</h6><h6>应用程序:待办事项-应用程序</h6><h6>模板:</h6><h6>元数据:</h6><h6>标签:</h6><h6>应用程序:待办事项-应用程序</h6><h6>规格:</h6><h6>容器:</h6><h6>- image: dockerhub图像名称</h6><h6>名称:todo-app</h6><h6>端口:</h6><h6>-集装箱港口:8080</h6><p>下面是<strong> service.yaml </strong>文件:</p><h6>apiVersion: v1</h6><h6>#表示这是一项服务</h6><h6>种类:服务</h6><h6>元数据:</h6><h6>#服务名称</h6><h6>名称:todo-app</h6><h6>规格:</h6><h6>选择器:</h6><h6>Pods选择器</h6><h6>应用程序:待办事项-应用程序</h6><h6>端口:</h6><h6>#端口映射</h6><h6>-端口:80</h6><h6>目标港口:8080</h6><h6>协议:TCP</h6><h6>类型:负载平衡器</h6><h2>CI/CD:使用线束</h2><p>Harness有一个非常漂亮的UI，可以轻松地帮助开发人员毫不费力地进行CI/CD。一旦您<a href="https://app.harness.io/auth/#/signup/">在Harness </a>注册，请确保您可以访问Kubernetes集群来部署您的应用程序。登录线束平台，确保基本连接器准备就绪。另外，确保在目标Kubernetes集群上安装了代理。</p><p>Harness Delegate是一个服务/软件，您需要在目标集群(在我们的例子中是Kubernetes)上安装/运行，以将您的工件、基础设施、协作、验证和其他提供者与Harness Manager连接起来。第一次设置线束时，安装线束委托。</p><p>如果你想了解更多关于Delegate的信息，你可以<a href="https://docs.harness.io/article/2k7lnc7lvl-delegates-overview">阅读这里</a>。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>在Harness上创建一个项目以设置CI/CD。首先，选择持续集成模块，然后选择交付模块。</p><p>‍</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>正如您在上面看到的，我们将首先进行测试和构建，然后将应用程序部署到Kubernetes集群。</p><p>测试和构建设置如下所示:</p><p>‍</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>基本上，我们正在配置基础设施(在我们的例子中是Kubernetes)，指定执行测试，最后在成功的测试用例之后将构建映像推送到Docker Hub。</p><p>当您单击测试步骤时，您将看到我们的配置:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>同样，交付模块的详细信息和配置如下所示:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>完成所有配置后，您可以保存并运行管道，以查看管道步骤的成功执行。首先，您将看到测试和构建阶段完成，然后是部署阶段。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>部署阶段的执行如下所示:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><h2>了解更多信息</h2><p>现在，您可以使用Harness平台在Kubernetes上测试、构建和部署您的应用程序。如果您有兴趣了解有关使用Harness和智能软件交付的更多信息，请查看我们的<a href="https://developer.harness.io/">开发者中心</a>以获得更多分步教程、视频和参考文档。</p><p>‍</p></div></div>    
</body>
</html>