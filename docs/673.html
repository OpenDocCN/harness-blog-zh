<html>
<head>
<title>The Harness API Testing Methodology | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>线束API测试方法|线束</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/harness-api-testing-methodology#0001-01-01">https://www.harness.io/blog/harness-api-testing-methodology#0001-01-01</a></blockquote><div><p>在这篇博客中，我们将分享我们的方法，作为其他软件公司在优先考虑API安全测试时可以考虑的有用参考。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>随着网络安全攻击的不断增加，对于任何组织来说，拥有一种安全测试方法来保护其API比以往任何时候都更加重要。保护API有多种方法，Harness开发了一种独特的方法。在这篇博客中，我们将分享我们的方法，作为其他软件公司在优先考虑API安全测试时可以考虑的有用参考。</p><h2>什么是API？</h2><p>应用程序编程接口(API)是允许两个应用程序相互通信的软件中介。<a href="https://www.gartner.com/en/information-technology/glossary/application-programming-interface">根据Gartner </a>:</p><blockquote>应用程序编程接口(API)是提供对应用程序或数据库中的服务功能和数据的编程访问的接口。它可以用作开发与人类、其他应用程序或智能设备的新交互的构建块。公司使用API来满足数字化转型或生态系统的需求，并启动平台商业模式。</blockquote><p>每次我们使用任何应用程序——无论是发布到脸书，发送文本或Slack消息，还是在手机上查看天气——我们都在使用API。举个例子:当你在手机上使用一个应用程序时，这个应用程序连接到互联网，并向指定的服务器发送数据。然后，服务器检索该数据，对其进行解释，执行必要的操作，并将其发送回您的手机。然后，应用程序解释这些数据，并以可读的方式向您提供您想要的信息。所有这些都是通过API实现的。</p><p>像<a href="https://swagger.io/specification/"> OpenAPI </a>或<a href="https://swagger.io/specification/"> swagger </a>这样的规范有助于定义描述API所需的文件。这些文件然后帮助组织识别必要的文档、集成和测试工具，以有效地管理他们的API。</p><h2>什么是API安全测试？</h2><p>API安全测试包括漏洞测试，以防止攻击并降低组织的风险。虽然知道API是密封的很好，但您也希望主动发现这个过程中的任何安全漏洞，以便工程师可以在它们影响客户或业务之前修复它们。此外，这种测试有助于确保API忠于其定义的规范。</p><p>安全测试有助于确保满足基本的安全要求，包括用户访问、加密和身份验证等条件。API扫描背后的想法是精心制作输入，以诱使API出现错误和未定义的行为，本质上是模仿潜在黑客的行为和攻击媒介。</p><p>以下是安全性测试API所必需的高级步骤:</p><ol role="list"><li>定义需要测试的API。</li><li>测试人员使用各种规范格式，包括OpenAPI v2 / v3、Postman集合和HAR文件，提供关于API输入和输出的信息。</li><li>API安全测试使用这些信息来构造适合API期望的输入的模糊输入。</li><li>API安全测试的输出是在<a href="https://research.aimultiple.com/api-fuzz-testing/">模糊化API </a>时发现的任何漏洞或错误的报告。这可能包括SQL和操作系统命令注入、授权/认证绕过、路径遍历问题，以及开放Web应用安全项目(<a href="https://owasp.org/www-project-api-security/">OWASP)10大API漏洞</a>，包括身份验证失败、安全配置错误和数据泄露。</li></ol><p>虽然许多组织都有团队和部门致力于生产后的测试，但我们越来越多地看到API安全测试正在成为DevOps管道的一部分。这是有意义的，因为它确保在代码投入生产之前发现漏洞。</p><h2>为什么现在要进行API测试？</h2><p>作为所有行业现代软件开发的基础部分，API的数量持续增长。API使用量的增加部分是由于组织为促进API的采用而开发的标准。因为API是许多应用程序的核心，所以在软件开发生命周期(SDLC)中采用安全性测试比以往任何时候都更重要。</p><p>确保API符合已发布的规范，并能抵御潜在的恶意输入，对于组织的整体安全性至关重要。根据Salt Labs的<a href="https://salt.security/blog/companies-are-struggling-against-a-681-increase-in-api-attacks-the-latest-state-of-api-security-report-shows"> Q1 2022年API安全状况报告</a>(2022年3月发布)，在过去的12个月中，API攻击使API流量的增长翻了一番多。该报告还指出:</p><ul role="list"><li><a href="https://salt.security/blog/companies-are-struggling-against-a-681-increase-in-api-attacks-the-latest-state-of-api-security-report-shows"> 95%运行生产API的组织</a>在过去12个月中经历过API安全事故</li><li>大多数组织没有准备好应对这些挑战，超过三分之一的组织(34%)没有API安全策略</li><li>传统的安全措施<a href="https://salt.security/blog/companies-are-struggling-against-a-681-increase-in-api-attacks-the-latest-state-of-api-security-report-shows">继续失效</a>，给组织一种虚假的安全感</li></ul><h2>线束API测试策略</h2><p>虽然OWASP十大API漏洞非常关键，但要真正将您的开发运维提升到一个新的水平，这个列表实际上只是一个起点。Harness遵循API安全测试的完整生命周期，将安全性和DevOps一起带入DevSecOps。</p><p>测试不是一次性的项目。为了使您的API免受漏洞的影响，这是一个需要定期重复的持续过程。在Harness，我们使用我们的<a href="https://harness.io/products/security-testing-orchestration">安全测试编排</a> (STO)模块来测试<a href="https://harness.io/blog/product-updates/sto-key-capabilities/">自动化</a>和编排。使用STO，我们定期运行直接从管道触发的扫描，并在扫描结果包含严重或高度漏洞时发送电子邮件。然后，我们可以不断完善触发扫描和警报的标准。</p><p>我们的测试策略涵盖五个关键领域:</p><ol role="list"><li>界定和理解API和规范</li><li>映射攻击</li><li>自动化和手动测试(OWASP API Top 10)</li><li>可交付成果</li><li>自动化和扩展</li></ol><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><h3><strong> 1。范围界定&amp;了解API和规范</strong></h3><p><strong>定义范围</strong></p><p>重要的是首先定义我们将覆盖的所有领域作为测试的一部分。通常，组织使用swagger或OpenAPI规范来记录他们的所有API，并且可以利用这些来理解范围。</p><p><strong>了解API和业务用途</strong></p><p>为了确定安全漏洞对业务的影响程度，理解API及其业务用途至关重要。此外，这有助于我们构建针对API的定制攻击。</p><p>API扩展了业务可以提供的能力和功能，而无需在集成后投入大量资源。为了充分利用API，企业通常使用API来:</p><ul role="list"><li>与第三方API集成</li><li>构建供内部使用的API</li><li>构建API并公开API供外部使用</li></ul><p>理解当前测试属于哪一类是关键。像攻击者一样思考很重要。</p><p><strong>首先，检查作为合同的规范-API</strong></p><p>API本质上是客户机和服务器之间或者两个应用程序之间的契约。在开始任何实现测试之前，确保契约正确是很重要的。这可以首先通过检查规范(或服务契约本身，例如Swagger接口或OpenAPI引用)来完成，并确保端点正确命名，资源及其类型正确反映对象模型，没有缺失的功能或重复的功能，并且资源之间的关系正确反映在API中。</p><h3>2.映射攻击</h3><p><strong>思维导图攻击</strong></p><p>既然您已经知道了API的设计目的、它们的底层技术和规范，那么思考攻击就容易多了。</p><p>一般来说，所有容易摘到的果子都会被自动化工具覆盖。这里您真正想要关注的是如何覆盖业务逻辑流。关注特定于业务的流程，尝试找到任何自动化安全工具都很难找到的场景。</p><p>你也可以在这里关注链式攻击。将报告的工具作为基线，并将它们与其他发现关联起来，以创建攻击场景，这可能是本文的重点。</p><h3>3.自动化+手动测试–OWASP API前10名</h3><p><strong>回顾OWASP API前10名</strong></p><p>OWASP基金会列出了API的十大安全威胁。查看他们网站上的列表，让您的团队做好准备。这是任何类型的安全测试的基础。</p><p><strong>运行自动化工具</strong></p><p>有许多自动化工具可以帮助提高效率。这些自动化工具将节省时间和资源，而不是依赖手工测试。我们在下面分享了一些我们最喜欢的:</p><ul role="list"><li>BurpSuite Pro 和<a href="https://app.traceable.ai/api-dashboard?time=1h"> Traceable AI </a>有助于发现安全问题，还有许多其他支持工具</li><li>像<a href="https://www.postman.com/">邮递员</a>和/或<a href="https://www.soapui.org/downloads/soapui/"> SoapUI </a>这样的开源工具</li><li>Burp有一套广泛的支持插件，可以用来关注各种攻击，比如<a href="https://portswigger.net/bappstore/6bf7574b632847faaaa4eb5e42f1757c"> OpenAPI解析器</a></li></ul><p><strong>测试业务逻辑流程</strong></p><p>业务逻辑漏洞是API的设计和实现中的缺陷，使得攻击者能够引发意外的行为。这可能使攻击者能够操纵合法功能来实现恶意目标。</p><p>例如，查看如何将特定权限授予资源，如何验证许可，以及如何计算客户成本。如果上述场景中存在潜在的操纵或缺陷，那么它就是机密性、完整性和可用性，也称为CIA违规，这可能导致企业收入损失。</p><h3>4.可交付成果</h3><p>报告我们在测试过程中迄今为止的发现是最终的结果。为了让风险承担者意识到风险，在JIRA或任何其他票据系统中创建相关联的任务，并在单个安全仪表板上跟踪它们。</p><h3>5.自动化和扩展</h3><p>考虑到全年快速开发的数量，安全团队必须跟上软件交付的速度。自动化使规模成为可能。</p><p>在每个版本中，有各种各样的方法来自动化API测试和测试变更。因为不可能在每个发布周期测试所有的API，你需要选择一个节奏来执行完整的API测试。对于其余的版本，您将只选择增量。</p><p>API测试在我们的管道中的集成将我们的DevOps带到了一个新的高度，实现了一个成熟的DevSecOps实践。</p><h2>利用安全测试流程编排</h2><p>最终，对于安全性测试来说，没有“一刀切”的方法。然而，鉴于对API攻击的增加，拥有合适的工具是主动保护的关键。</p><p>想了解更多关于Harness如何帮助自动化API安全测试的信息吗？<a href="https://harness.io/demo/">今天就申请试玩</a>驾驭STO！</p></div></div>    
</body>
</html>