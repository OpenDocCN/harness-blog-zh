# 什么是多元旗？装具

> 原文：<https://www.harness.io/blog/multivariate-flag>

多变量标志是具有无限数量状态的标志——不像布尔标志那样只是开或关。了解如何利用它们。

当人们想到功能标志时，他们会想到开或关，真或假。这些被称为*布尔标志*，它们只有两种状态。然而，还有其他类型的标志，称为*多元*标志，具有潜在的无限数量的状态。

在本帖中，我们将看看什么是多元标志以及如何使用它们。

## 布尔与多元

布尔标志相对容易理解，尽管除了显而易见的用例之外，还有大量潜在的用例。有真态和假态，本质上是默认和改变。简单来说，一个*开*，一个*关*。

相比之下，多元标志有无限多的状态。

好处是您可以扩展使用标志的方式，以涵盖广泛的场景。最明显的是被称为 A/B 测试(尽管它说的是 A/B，但它通常有两个以上的选项)。但除此之外，还有很多其他方式来考虑多元标志。

## 多元中的数据类型

在深入研究具体的示例用例之前，值得注意的是，在 Harness 中，多元标志包含不同的数据类型。这是因为无论布尔标志的*值*是什么，实际的评估都是布尔的单一数据类型。另一方面，多变量标志需要一个数据类型*和*一个值，因为它们更加开放。

我们允许字符串、JSON 和整数，并且根据您的反馈，将来可能会允许更多。通过允许额外的数据类型，可以将更强大的用例设计到您的产品中。

## 常见的多元用例

### A/B 测试

A/B 测试通常关注用户行为。它通常是关于确定改变行为的统计学意义。例如:红色、绿色或蓝色的“取消”按钮最能减少客户流失吗？

A/B 测试利用多变量标志，允许您一次测试许多选项。测试你的试用时长(3 天对 7 天对 30 天)，或者测试你的措辞(“激动人心”对“先进”对“创新”)。

A/B 测试将功能标志与行为分析工具(如 Amplitude)结合起来，让您看到用户在做什么，并在调整时学习。

### 系统行为

string 和 JSON 数据类型的好处之一是可以在应用程序的后端使用多变量作为永久配置，或者用于测试。

这里有一个真实的例子。假设您有一个归档系统，需要从缓存中获取用户数据并将其放入冷存储中。98%的情况下，该服务需要每 5 分钟运行一次。但是偶尔，由于负载问题或由于其他工程更改，您可能想要更改它。

通过使用多变量标志，你可以很容易地键入更长或更短的时间间隔，甚至是一个完整的停顿，只需点击一个按钮。当您需要延迟或暂停归档程序时，所有这些都不需要更改核心应用程序。

这些潜在的用例存在于您的 Ops、SREs 和架构团队的头脑和操作手册中。去和他们所有人谈谈。看看将这些类型的行为连接到多元标志可以节省时间和增加弹性。

### 特定地理行为

对于在受监管行业工作的人，或者在消费者监管不同的国家工作的人，您可能会遇到一些需要修改文本的常见提示。

多变量标志是实现这一点的好方法。如果你从事物流业务，用一面旗帜显示不同州的不同税率。或者，如果您处理数据，根据法律要求，向加州、美国其他地区、欧盟和英国展示不同的隐私信息。全部集中控制在一个单一的多元标志下。

通常，团队将这种逻辑连接到一个类似于标志的应用程序中，但是应用程序会自动做出决定。这在表面上看起来很棒，但事实是您失去了通过使用特性标志解决方案所获得的可见性、容易审计和控制。

## 结论

你正在以新颖的方式使用多元标志吗？如果是这样，我们希望[收到您的来信](mailto:ethan.jones@harness.io)！

多变量标志比“仅仅”A/B 测试更强大，尽管 A/B 测试是它们提供的关键功能。上面的场景是一些常见的例子，但是还有很多。随着你对标志的熟悉，你将会发现使用它们的新方法，为你的应用带来控制和可见性。

当你开始你的特色标志之旅时，与你的团队讨论如何超越简单的是或否标志。此外，讨论你可能想从多种选择中学习的地方(并在这个过程中回避争论)。当您可以用一个标志来运输它们并用真实数据来解决它时，为什么要争论哪个选择是最好的呢？)，或将您的应用程序操作任务连接到标志以获得更多控制。