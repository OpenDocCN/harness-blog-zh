# 了解扼杀者模式和管道—线束 CD |线束

> 原文：<https://www.harness.io/blog/pipeline-strangler-pattern>

Martin Fowler 著名的 Strangler 模式描述了软件如何在我们的企业中发展——尽管这种观察也可以参考支持我们的应用程序的平台和管道。

## 进化、革命和过去同时发生？

我最喜欢的动画电影之一是《功夫熊猫》。为了让熊猫阿宝放心，乌龟大师给出了这句多产的话:“昨天是历史，明天是个谜，但今天是个礼物。”这意味着，没有必要沉湎于过去，未来是不可预测的。我很受鼓舞！嗯，有一个行业与此背道而驰，那就是软件业。诚然，今天是一份礼物，但随着我们建立和支持的平台数量的变化，我们不能忘记过去。软件的发展速度非常快，而且由于软件交付方法集中在协作上，今天看到趋势和变化比以往任何时候都更容易。因此，未来并不像乌龟大师所说的那样神秘。维护过去、现在和未来的架构推动了对软件平台敏捷性的需求。想象一下，我们的管道因必须支持传统、棕地和绿地模式而面临的挑战。

## 管道扼杀者是如何诞生的

马丁·福勒详细讲述了扼杀者模式。就像长在树周围的藤蔓或《功夫熊猫》中的面条一样，随着藤蔓有效地扼杀了树的老部分，新的部分最终存活了下来。在软件世界中，随着更多的现代架构接管，整体架构将向前发展，而遗留架构将被扼杀/消亡。软件架构的强大世界向前推进——万岁！尽管对我们来说，有责任确保所有的软件工程团队都有公平的发言权，并在所有的船上掀起浪潮，但让碎片死去将是最容易的举动，而不是最谨慎的举动。管道扼杀者可能更难被注意到，并且可能对创新非常不利。组织倾向于在他们的管道上投资很多，一旦现状介入，即使过程是僵化或脆弱的，也很难改变。管道扼杀者诞生于我们所处的软件行业的本质。当我们重新设定新技术和技术学习曲线时，创新就会向前推进。

## 有趣的奥赖利动物

我最喜欢的一些科技书籍来自奥莱利。走在工程师的工作间甚至家里，通常可以看到书架上排列着一些有趣的动物封面，或者今天是出版商的订阅。如果我们负责引进一项新技术，或者只是求知若渴，奥赖利是一个很好的首选。剖析 O'Reilly 书的内容，假设一本书有 500 页，前 30-50 页是安装和简单的类似于操作的操作，其余 450 页是操作类型模式。确保技术在您的组织中有一个可行的家是采用和获取等式的很大一部分。

## 成长中的管道扼杀者

让我们来看看两种技术，分布式度量提供商[普罗米修斯](https://prometheus.io/)和日志分析提供商 [Splunk](https://www.splunk.com/) 。两者都是伟大的技术，但可以准确显示管道扼杀者是如何诞生的。假设 Acme Corporation 投资了 Splunk，并且要加入 Acme 的应用程序团队，Splunk 是事实上的工具。现在，一组工程师已经看到他们在社区中集成的一些项目开始在绿地项目中利用普罗米修斯。Acme 在 Prometheus 没有任何运营或管道专业知识。尽管利用普罗米修斯的欲望太大了，工程团队开始构建钩子，包括库和生态系统扩展，如 [Grafana](https://grafana.com/) 。Acme 的平台工程团队为将 Prometheus 纳入 Acme 进行了一场艰苦的战斗。不希望度量数据只是占用 Acme 的 [SAN 的](https://en.wikipedia.org/wiki/Storage_area_network)上的存储空间，他们应该对度量做一些事情。不幸的是，这分散了平台工程团队的注意力，因为大量应用程序仍在利用 Splunk。随着分布式指标与日志分析的推动开始出现，小掉队者开始出现。尽管在 Acme，他们严重依赖 Splunk，并且仍然是其基础架构的重要组成部分；某些应用程序没有良好的工具，依赖 Splunk 来填补空白。乌龟大师，我们真的需要两者兼顾。

## 想勒死多少就勒死多少

Harness 平台的美妙之处在于，我们用约定和配置去掉了一部分技术学习曲线。在 Acme 的案例中，Harness 平台可以帮助整合 Splunk 和 Prometheus。根据团队或应用程序的不同，在具有 Harness 的连续交付管道中添加或删除集成/技术提供者是很容易的。想象一下这样一个世界，来自应用程序开发团队的需求很容易进入管道，而不是像藤蔓或面条一样纠缠在一起。今天你可以带着马具生活在这个世界上！