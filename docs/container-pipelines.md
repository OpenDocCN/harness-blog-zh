# 什么是集装箱化管道？装具

> 原文：<https://www.harness.io/blog/container-pipelines>

容器化管道是软件开发管道，您可以在其中定义编码测试、构建和部署的步骤和环境。

Kubernetes 已经成为软件交付世界中的一个大玩家，因为人们正在转向使用容器来更容易和更有效地开发、运送和部署代码。容器是软件的标准单元，它与代码及其所有依赖项打包在一起，以便应用程序可以在一个计算环境中独立而高效地运行。

## 软件开发中的流水线是什么？

像管道的标准定义一样，软件开发中的管道被用作一种将某物从一个地方运送到另一个地方的方法——在我们的例子中，运送代码。管道的存在是为了简化软件开发的过程。他们帮助将自动化引入 DevOps，特别是在[持续集成](https://harness.io/blog/continuous-integration/what-is-continuous-integration/)和[持续交付](https://harness.io/blog/continuous-delivery/what-is-continuous-delivery/)中，通过获取源代码，将其打包成工件，然后最终将其部署到生产中。在管道中，开发人员会指定一个容器来执行某项工作。它将首先获取并启动容器，然后作业的每个步骤都将在容器内运行，直到完成。这一过程将贯穿整个管道，直到到达终点。

## 为什么是集装箱管道？

知道了容器的好处，为什么不在里面放管道呢？集装箱化管道允许管道作业之间的隔离。每一个作业都是从一个容器映像中运行的，该映像包含了该应用程序所需的所有依赖项。因此，管道作业之间不存在任何依赖性问题——即使它们运行在同一个节点上！容器还考虑到了不变性——一旦构建好了，它就不可更改，如果您想做出改变，您需要创建一个新的映像。遵循这个概念，每个管道作业运行时将完全相同。同样，使用容器化管道，转移到 Kubernetes 集群很容易，并允许可伸缩性。利用 Kubernetes 作为管道资源无疑是一个额外的好处。

## 软件交付中流水线的不同阶段

### 建设

构建阶段是整个过程的开始。这是应用程序被编译并从人类可读的源代码翻译成可执行程序的阶段。在管道中，构建通常由提交或代码更改触发。在这个过程中，从源代码/git 存储库中取出代码，对其进行编译，并检查依赖关系。有了容器化的管道，构建阶段可以更容易管理，因为没有依赖地狱。容器映像打包了应用程序中需要的所有依赖项，这样开发人员就不需要管理这些了。Docker 是一个用于开发、发布和运行应用程序的开放平台，让这一切变得简单。该平台使开发人员能够创建 Docker 文件，即 Docker 映像的配置文件，以及 Docker 容器、映像的可执行版本和存储映像的 Docker 注册表。

### 试验

测试在构建阶段之后。有许多不同的测试类型，如[单元测试](https://harness.io/blog/continuous-integration/continuous-integration-testing/)，集成测试，和漏洞测试。每种类型的测试都可以是流水线中自己的一步。有了所有不同的测试方法，开发人员不必担心是否有正确的依赖关系，因为管道中的每个容器映像都有相应的包。

### 部署

接下来，部署状态是将代码部署到生产环境中的阶段，通过持续的部署来实现。通过使用容器，部署应用程序变得更加容易和安全。应用程序可以立即修改和运行。

### 释放；排放；发布

最后，我们进入了发布阶段，在这个阶段，应用程序被交付给一个存储库。这才是真正的持续交付阶段。有了管道和自动化，这个过程变得简单了——加上容器，这个过程变得更加高效和安全。

## 不同的集装箱化管道选项

### Azure DevOps

Azure DevOps 包含开发人员成功运行 DevOps 可能需要的所有工具。它有项目管理、源代码控制管理和 CI/CD。这允许开发人员规定和配置软件交付生命周期的每个部分。Azure DevOps 也可以很好地与容器集成，因为它提供了集成和访问 Azure Container Registry 和 Azure Kubernetes 服务等功能。要配置管道，开发人员可以利用基于 web 的用户界面，或者将 YAML 配置文件签入应用程序源代码。由于 Azure DevOps 是一个一体化的解决方案，因此在使用整套产品时非常棒。然而，如果您只使用一两个部分，那么对于需要基本容器管道的团队来说，这可能很难设置，而且可能过于复杂。

### GitLab CI/CD

GitLab CI/CD 还提供了一个一体化的解决方案，包括项目管理、私有容器注册和协调的构建环境。要构建容器化管道，开发人员必须配置 gitlab-ci.yml 文件，因为 GitLab CI/CD 由 GitLab Runner 提供支持。因为 GitLab CI/CD 利用 YAML 作为其配置文件，所以它允许大量的定制和灵活性。它还集成了开源工具，支持广泛的项目类型、语言和部署目标。另一方面，除了 Google Kubernetes 引擎和 Amazon Elastic Kubernetes 服务之外，GitLab 不能提供或维护环境，因此，整个过程不是完全自动化的。它还缺少一个图形用户界面，该界面可以增强开发人员的体验，因为它可以更容易地构建和维护复杂的管道。

### 詹金斯 X

每个人都知道 Jenkins，因为它是最受欢迎的 CI/CD 解决方案。Jenkins X 通过与 Kubernetes 的全面集成更进一步，因为它不仅可以部署，还可以为开发人员提供和管理集群。Jenkins X 管道建立在 Tekton 管道上，tek ton 管道有助于在 Kubernetes 上运行 CI/CD 管道。在 Jenkins X 中，开发人员必须使用 jenkins-x.yml 文件来配置他们的管道，而不是使用 Jenkinsfiles 进行配置。Jenkins X 结合了目前 DevOps 领域中最受欢迎的两种开源技术:Jenkins 和 Kubernetes。Jenkins X 本机与 Kubernetes 基础架构集成，虽然这可能是一个优势，但也可能是一个限制，因为 Jenkins X 需要 Kubernetes，并且对如何配置集群非常固执己见。就 CD 工具而言，这是我们可以推荐的一个选项。

## Harness 如何利用集装箱化管道

线束平台就像一个通用适配器。它可以插入连接任何云提供商、容器平台或技术集成。由于其多功能性，该平台可以与任何容器编排工具连接，以创建容器化的管道。

Harness CI Enterprise 是 Harness 平台的最新模块，它在管道的每个步骤中都具有容器化步骤的功能。在管道中，开发人员指定要使用的容器，代理获取并启动将在其中运行作业的容器。因为每一步都在自己的容器中运行，并且所有的插件都有自己的容器，所以开发者不需要担心依赖地狱。

## 在 CI/CD 中采取下一步措施

管道在 DevOps 世界中有如此大的影响，因为它们有助于自动化和简化软件交付过程。要更深入地了解常见的管道模式、它们的优点、缺点，以及如何为您的给定用例选择最佳模式，请查看我们的[管道模式电子书](https://harness.io/ebook-pipeline-patterns/)。

Harness 已经创建了一个端到端的平台来帮助开发人员完成他们的软件交付过程。要了解我们如何利用集装箱化管道，今天就报名参加[免费试用](https://harness.io/free-trial/)！