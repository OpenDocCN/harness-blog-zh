<html>
<head>
<title>Spinnaker vs Harness - Filming My Journey | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>三角帆vs马具-拍摄我的旅程|马具</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/spinnaker-vs-harness-filming-my-journey#0001-01-01">https://www.harness.io/blog/spinnaker-vs-harness-filming-my-journey#0001-01-01</a></blockquote><div><p>从我的旅程中学习如何让三角帆vs马具离开地面。观看视频以比较Spinnaker项目安装到控制工作流程。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>当人们考虑连续交付解决方案时，大多数时候人们会交叉购买<a href="https://spinnaker.io/"> Spinnaker </a> rendition与Harness。在技术上，我们当然可以像猫和狗的争论一样站在哪一边【我有一只<a href="https://en.wikipedia.org/wiki/Siberian_Husky">西伯利亚雪橇犬</a>；你可以看到我站在哪一边】。有一段时间我想做的事情是通过<a href="https://spinnaker.io/concepts/pipelines/"> Spinnaker管道</a>运行一两条管道，并为自己学习。<br/></p><p>我非常熟悉Spinnaker项目和这个项目的目标，但是我从来没有尝试过自己安装这个工具。我决定拍摄一段视频，记录我自己在计时的同时尝试完成一个安装和基本管道。(虽然进行了大约四分之一，我决定停止花时间，因为我必须查找命令——只是基本的<a href="https://en.wikipedia.org/wiki/Linux"> Linux </a>管理东西，我忘记了，必须在视频拍摄期间查找。)<br/></p><p>这段视频大约有两个小时长，是在一个晚上和一个早上拍摄的。我的目标是将典型的Nginx映像部署到T2亚马逊EKS T3集群中。不幸的是，过了一段时间后，我无法在Spinnaker中创建系统帐户，并抛出了白旗。我能够让Nginx从零部署到已部署，包括在视频结尾的大约5分钟内将一个<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/kubernetes-deployments/connect-to-your-target-kubernetes-platform/">线束委托</a>安装到我的EKS集群中。</p><h3>视频</h3><p>事不宜迟，下面是视频。(是的，我确实连续两天穿同一件套衫。)<br/></p><figure class="w-richtext-figure-type-image w-richtext-align-center"/><h3>方法学</h3><p>在分布式系统/平台工程领域已经有一段时间了，现在测试过程中最容易实现的就是部署Nginx。我很喜欢使用亚马逊EKS的Kubernetes集群，因为我可以用<a href="https://eksctl.io/"> EKSCTL </a>快速构建一个集群。<br/></p><p>作为一名管理员，我有能力根据需要增加AWS资源，并确保<a href="https://aws.amazon.com/iam/">我的角色</a>等。已经就位。我使用答案框(又名谷歌)寻找答案，并利用来自<a href="https://spinnaker.io/guides/"> Spinnaker项目</a>和<a href="https://www.armory.io/">军械库</a>的文档。<br/></p><p>我在早期遇到了一些挑战，我需要改变我计划安装Spinnaker的方式。我最初的目标是在我的EKS集群中安装Spinnaker，但是我的<a href="https://spinnaker.io/reference/halyard/"> Halyard </a>配置中出现了一些错误，它将AWS作为提供者，并且不喜欢我的EKS集群。所以，我在我的升降索EC2 <a href="https://ubuntu.com/"> Ubuntu </a>机器上安装了Spinnaker。<br/></p><p>在我能够启动并运行Spinnaker UI之后，<a href="https://docs.armory.io/spinnaker/armory-spinnaker-quickstart-1/"> Armory </a>拥有比OSS Spinnaker项目更好的文档，用于我部署到亚马逊EKS的特定目标。<br/></p><p>在视频的第二个小时左右，我抛出了白旗，因为我无法让需要代表我执行部署的系统帐户显示在Spinnaker UI中。工具提示建议联系我的Spinnaker管理员，也就是我自己— fail。尝试了一段时间后，我有点累了。你可以在视频和下面看到我的步骤。<br/></p><h3>我的脚步</h3><p>在您开始之前，请确保先了解一下<a href="https://spinnaker.io/reference/architecture/"> Spinnaker架构</a>以及您需要安装和交互的活动部件。我尽我所能浏览了军械库<a href="https://spinnaker.io/setup/install/"> Spinnaker安装流程</a>和<a href="https://docs.armory.io/spinnaker/armory-spinnaker-quickstart-2/"> AWS快速入门指南</a>，之前从未见过它们。<br/></p><p>我用Ubuntu LTS 18.04创建了一个<a href="https://aws.amazon.com/ec2/"> AWS EC2 </a>实例，最终打开了端口。在我的本地机器MacBook Pro上，我将<a href="https://aws.amazon.com/cli/"> AWS CLI </a>和<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/"> KubeCTL </a>连接到我的EKS集群。<br/></p><p>可能不必要的步骤是根据这篇<a href="https://blog.spinnaker.io/exposing-spinnaker-to-end-users-4808bc936698">博文</a>打开<a href="https://github.com/spinnaker/gate">门</a>和<a href="https://github.com/spinnaker/deck">甲板</a>。<br/></p><p>##Spinnaker命令<br/> #Ubuntu Box - EC2公共IP: your-ip <br/> ssh -i ~/。ssh/your-key . PEM Ubuntu @ your-IP<br/># Get Halyard Install for Ubuntu<br/>curl-O https://raw . githubusercontent . com/spinnaker/Halyard/master/Install/debian/Install Halyard . sh<br/># Install Halyard on Ubuntu<br/>sudo bash Install Halyard . sh<br/># Get Cloud Formation templates on Local Machine<br/>curl-O https://d 3079 GX vs 8 ayeg . cloudfront . net/templates<br/>sudo adduser some user<br/>pw:some password<br/>#连线一个Hal提供者以检查安装选项<br/> hal配置提供者aws帐户添加您的帐户\<br/>-account-id xxxx \<br/>-assume-role role/spinnaker managed<br/>#在我的情况下本地安装<br/> hal配置部署编辑类型localdebian<br/># #不要设置https://github.com/spinnaker/spinnaker/issues/4554地区<br/>#配置存储<br/> hal配置存储S3编辑\<br/> <br/>-secret-access-key xxxxx<br/># Set Version<br/>Hal config Version Edit-Version 1 . 18 . 3<br/># Restart<br/>sudo Hal deploy apply<br/># Tunnel<br/>sudo Hal deploy connect<br/># Edit IPs<br/>Hal config security ui Edit-override-base-URL https://yourIP:9000<br/>Hal config security API Edit-override-base-URL https://yourIP:8084【T31 <br/>export ROLE _ NAME = ROLE/Spinnaker-Managed-ROLE<br/># Add Provider<br/>Hal config Provider AWS ACCOUNT Add $ { AWS _ ACCOUNT _ NAME } \<br/>-ACCOUNT-ID $ { ACCOUNT _ ID } \<br/>-assume-ROLE $ { ROLE _ NAME } \<br/>-regions us-east-1<br/># Enable<br/>Hal config Provider AWS Enable<br/>sudo Hal Deploy apply<br/>sudo system CTL daemon-reload【T49 /spinnaker-tools create-service-account<br/>#复制本地KubeConfig-SA文件<br/> scp -i ~/。ssh/your-key . PEM kube config-sa Ubuntu @ your-IP:/Home/Ubuntu<br/>#这个地点是TBD，MV很成功但是不得不搬回Ubuntu Home<br/>sudo MV kube config-sa/Home/some user/。哈尔/。secret<br/>#将KubeConfig添加到Halyard <br/> hal配置提供者kubernetes帐户添加kubeconfig-sa-eks \ <br/> -提供者-版本v2 \<br/>-kube Config-file/home/Ubuntu/kube Config-sa \<br/>-only-spinnaker-managed true<br/># #出现错误<br/> hal配置提供者kubernetes帐户删除kube Config-sa-eks<br/>#重新部署【T67Hal/config<br/># EC2 NetStat for UI和API<br/>sudo NetStat-tul pn | grep 9000<br/>sudo NetStat-tul pn | grep 8084</p><h3>展望未来</h3><p>在视频的最后，我决定启动一个快速的<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/model-cd-pipeline/workflows/workflow-configuration/"> Harness工作流</a>，并在我们的Harness社区版中直接执行该工作流。我去寻找帮助，以采取SaaS自定进度的Spinnaker试驾，并不能找到一个现成的双重检查我的工作。在<a href="https://docs.d2iq.com/mesosphere/dcos/services/spinnaker/0.3.0-1.9.2/">中间层的DC操作系统</a>中可能有一个，但那需要DC操作系统的专业版。你可以免费注册一个线束账户，然后执行和我一样的<a href="https://developer.harness.io/docs/first-gen/continuous-delivery/model-cd-pipeline/workflows/workflow-configuration/">线束工作流程</a>，时间和我差不多。<br/></p><p>干杯！<br/></p><p>-拉维<br/></p></div></div>    
</body>
</html>