# 将云成本与工程发布相关联的 3 个理由|利用

> 原文：<https://www.harness.io/blog/cloud-costs-engineering-releases>

让开发人员参与云成本管理对于降低云成本至关重要。以下是我们应该让他们参与进来并将我们的成本与工程发布相关联的三个原因。

云成本管理和部署通常是孤立分析的，由组织内的不同团队负责。当这些团队紧密合作时会发生什么？把成本和发布放在一起看有意义吗？在本帖中，我们将探讨为什么每个组织都应该考虑将工程发布与其云成本相关联的三个原因。

## 识别 bug

在首次尝试云计算的组织中，提升和转移策略很常见。但是越来越多的组织开始采用完全托管的云服务。此外，在整体架构中引入新的完全托管服务会带来无效配置、错误使用解释等缺陷。

例如，在 [Amazon CloudWatch Events](https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/WhatIsCloudWatchEvents.html) 中，您可以创建导致无限循环的规则，其中一个规则被重复触发。一个潜在的规则可能检测到一个[亚马逊简单存储服务(亚马逊 S3)](https://aws.amazon.com/s3/) 桶上的 ACL 已经改变，然后触发软件将它们改变到期望的状态。如果没有仔细编写规则，随后的 ACL 更改会再次触发规则，从而造成无限循环。无限循环会很快导致比预期更高的电荷。

在 GCP Stackdriver 日志中，开发人员可能会在代码的热路径中添加日志行。这可能不会增加任何价值，或者在一天中增加很少的价值数百万次，从而导致 Stackdriver 日志记录成本的成本峰值。

类似地，随着所有的[微服务](https://harness.io/blog/continuous-delivery/microservices-deployment-strategies/)由开发团队构建，有新引入的 bug 的代码可能会出现在产品中。如果一个前端微服务多次调用同一个 API 端点会怎样？如果这是在开发周期的早期发现的，那么这是一个小的编码错误。然而，在生产环境中，如果 API 层由云服务处理，这将影响页面性能，并导致成本增加，而云服务通常根据使用情况定价。例如，考虑一个 lambda 函数，其中用户为每次调用和使用的计算秒数付费。

此外，将部署与成本高峰相关联将有助于开发人员在[生命周期](https://harness.io/blog/devops/software-development-life-cycle/)的早期发现 bug，即使它们不可避免地蔓延到更高的环境中，如阶段化和生产。

## 以成本为中心的心态

开发人员喜欢[优化](https://harness.io/blog/cloud-cost-management/reduce-cloud-costs/)，一旦开发人员开始将成本视为优化的机会和优化的另一个边界条件，组织将在云上实现高效的成本支出。将成本与工程发布相关联，发掘出大量优化机会。这里有几个例子:

您可能正在查询一个数据仓库，比如 BigQuery，它根据查询时扫描的数据量收费。添加新查询时丢失分区会显著增加扫描的数据量。这可能会让成本飙升。类似地，在 Stackdriver 指标的情况下，推动没有优化的新指标(具有比必要更多的分组依据字段)会导致成本螺旋上升。

通常情况下，组织可以从花时间了解应用程序使用的各种云服务的定价模型以及每个工程选择如何影响成本中受益。最简单的方法是密切监控每个部署对成本的影响。

## 短路反馈回路

相关性还缩短了反馈周期，从而缩小了成本峰值的根本原因。这使得补救极其容易。在产品生命周期中尽早发现成本高峰和问题有助于减少业务影响，确保用户满意度。

## 线束能有什么帮助？

Harness 是一个端到端的软件交付平台，包括同一平台上的连续交付和云成本管理，搭配我们的[定制仪表板](https://harness.io/blog/continuous-delivery/harness-dashboards/)功能，跨模块横切。这使得将成本高峰与部署联系起来变得极其容易。此外，云成本管理还具有一流的异常检测功能。这将通知用户有关成本异常的情况，这进一步简化了不断检查成本峰值的过程。

想了解更多关于 Harness 平台或云成本管理的信息？联系 [support@harness.io](mailto:support@harness.io) 和[加入我们的 slack 社区](https://harnesscommunity.slack.com/)。