# 什么是 Gitlab CI？(2022) |线束

> 原文：<https://www.harness.io/blog/what-is-gitlab-ci>

GitLab CI 是 GitLab 最成功的特性集之一。这是我们完整的 GitLab CI 介绍和指南。

GitLab CI 是 GitLab 最成功的特性集之一。在 GitLab 行话中，GitLab CI 由特性和功能组成，主要分为两个阶段:验证和打包；虽然；也有安全阶段的元素。GitLab 将 DevOps 生命周期的每个部分称为阶段。换句话说，它们将软件交付生命周期(SDLC)划分为连续的部分:管理、计划、创建、验证、打包、保护、发布、配置、监控和保护。虽然这些都不是业界公认的术语，但其中大多数都是不言自明的，因此解决方案持续集成属于验证、打包以及某种程度上的安全范畴。

## 完整的 GitLab CI 介绍和指南

GitLab 于 2014 年注册成为一家公司。推出了当时有限平台的企业版。在此之前，开源项目已经运行了一段时间，但它只是将一个基于 web 的 GUI 和一些源代码管理特性包装到普通的 git 论坛中。这是后来成为 2021 年 GitLab CI 的第一个贡献。

GitLab CI 像许多其他 CI 产品一样，旨在以许多不同的方式帮助软件工程师、团队领导和 DevOps 工程师。它的目标是在一组特性中提供构建自动化、测试自动化、管道配置管理、工件存储和管道安全性。

在实践 CI 时，团队协作构建软件。他们通过使用共享存储库来存储、修改和跟踪对其代码库的频繁更改来实现这一点。开发人员的目标是每天多次将他们的代码签入或集成到存储库中，并且他们依赖自动化测试在后台运行。开发人员不希望代码质量成为构建速度的代价。这些自动化测试通过检查潜在的错误和安全漏洞，以及性能和代码质量下降来验证这些变化。

在软件开发生命周期中尽可能早地运行测试有利于在问题加剧之前发现问题。可靠的 CI 是实现生产环境连续部署的唯一途径。您可以在我们的博客中了解更多关于实施良好 CI 实践的好处，详细说明 CI 为什么如此重要，以及它为什么为高效交付软件的公司带来如此多的价值。

GitLab CI 的主要组件是一个 runner。GitLab Runner 是在管道中运行作业的应用程序。它唯一的限制是跑步者运行的环境能够编译 Go 语言。无论您是在自己的环境中运行两者还是其中之一，运行程序都应该驻留在一个独立于 GitLab 平台本身的实例中。GitLab Runner 是管理 runners 的名称，runners 是执行作业的实际代理。运行者需要一个执行者来确定运行者能够执行分配给它的任务的环境。GitLab 转轮有三种类型:

*   共享:可用于所有项目
*   组:可用于组中的所有项目和子组
*   具体:附个别项目。

作业反过来可以相互传递变量或工件。这些 GitLab 变量存储供以后使用的值，并控制 GitLab 作业的行为。它们存在于项目、组或实例级别。作业工件，比如 Docker 图像，是流水线执行的最终结果。它们不存储在 GitLab 存储库中，而是存储在管道末端连接的包注册表中。如果管道执行的结果是 Docker 映像，则可以用部署作业更新现有容器。这是在持续部署阶段部署的代码。

## Gitlab CI 特性和用例:只是 CI 还是持续交付？

GitLab 的一个主要特点是其广泛的特性。这是一个以广度而非深度为目标的平台。这使得在竞争情报下突出其主要特征的工作具有挑战性。很难评估一个特性是名存实亡(太肤浅)还是真正解决了问题。无论如何，这些是 GitLab CI 中最受欢迎的功能:

*   合并序列:合并序列是一个排队的合并请求列表，每个请求都等待被合并到目标分支中。每个合并请求(MR)都运行自己的 CI 管道，并根据目标分支顺序进行合并。每个合并请求将根据所有先前合并请求的结果进行合并。可以把它想象成对先前合并的合并请求的搁置结果运行 CI 管道。该结果不会被合并到 main(以前称为 master branch)中，而是被搁置，直到完整的合并序列完成。
*   自动扩展 CI 运行程序:自动扩展运行程序的能力为运行程序(或者具体地说，运行程序管理器)提供了调用和实例化所需数量的机器的权限。这将有效地让您的 GitLab CI farm 弹性伸缩，以满足您的构建需求，尤其是在并行运行作业或管道时。不过，最好使用此功能查看您的云提供商发票。
*   GitLab 容器注册中心:GitLab CI 有自己的容器注册中心。GitLab 嵌入了几个开源的包管理器，他们把它们包装到自己的包管理器和容器注册表中。例如，在 GitLab 容器注册表中启用 docker 的注册表将允许 GitLab 用户存储和更新 Docker 图像。容器注册表与它们所属的项目具有相同的特征:如果项目是私有的，注册表也是私有的，但是如果是公共的，就没有办法使 Docker 图像私有。
*   测试覆盖可视化:通过这个流行的 CI 特性，GitLab 为用户提供了可视化地理解他们当前的测试套件如何覆盖项目的源代码的能力。它将允许 GitLab 用户使用来自他们喜欢的测试和代码覆盖工具的信息，在后台解析工作，并显示结果以了解哪些代码行被测试覆盖，哪些没有。

GitLab CI 用于解决几种不同的用例，从最传统的软件开发工作流(构建软件、小代码更改、在您的本地机器上测试新功能以进行演示，等等。)扩展到更广泛、更复杂的领域，比如我们内部称之为 CI++的 Harness，或者使用 CI 工具来执行完整的开发周期。这将 GitLab CI 扩展到构建阶段之外，以执行连续部署。通过使用 auto DevOps，在部署阶段使用 GitLab CI 也可以在 Jenkins 和其他传统 CI 系统中看到。在我们看来，软件交付、生产部署或连续部署，使用不同的功能比 GitLab CI 提供的功能更好。

## Gitlab CI 定价:安全性是有代价的

上面列出的一些功能是高级功能。GitLab 将其 DevOps 平台作为一个平台销售，不管您计划消费或利用什么样的特性、功能或阶段。GiLab 有一个功能有限的免费版本。然后，它继续提供两种付费计划:高级和终极。

*   免费:0 美元用户/月
*   高级:19 美元用户/月
*   终极版:每月 99 美元

这两个价格计划背后的想法是，溢价的设计与规模公司的想法。它将通过 CI 和 CD 为客户提供更快的发布周期、发布管理功能和代码审查特性，从而提高质量。

为了证明终极计划的巨大价格优势，GitLab 表示，GitLab Ultimate 是旨在优化和加速交付同时管理优先级、安全性、风险和合规性的组织的理想选择。它还包括支持、技术客户管理和实时升级帮助。当考虑将 GitLab 作为首选的 DevOps 平台时，定价和供应商锁定(鉴于 GitLab 的巨大广度)通常是最大的问题。

## Gitlab CI 审查

GitLab CI 是 GitLab 最成功的特性集之一。尽管 GitLab 不断努力减少其免费版本的免费分钟数(2020 年 CI 管道的免费分钟数降至 400 分钟，每增加 1000 分钟收费约 10 美元)，GitLab CI 仍然非常受欢迎。它是如此受欢迎，以至于 GitLab.com 在公共项目中的 CI 运行程序被加密矿工滥用，以低廉的成本开采加密货币。

‍

可用性⭐⭐⭐

喜欢更新⭐⭐⭐

⭐⭐⭐入职

⭐⭐表演

⭐⭐⭐核查

⭐⭐⭐⭐集成公司

支持⭐

CI/CD 集成⭐⭐⭐⭐

可扩展性⭐⭐

安全⭐⭐⭐

‍

### 赞成的意见

*   基于 Web 的 GUI，创建和理解 CI 管道、作业和变量，一目了然
*   GitLab runner 可用的是大多数操作系统

### 骗局

*   据报道，付费跑步者速度较慢，并且在 D [ocker 机器上跑步，该机器已被弃用](https://docs.docker.com/machine/)。
*   对 GitLab 跑步记录的更改将于 2022 年 6 月 1 日和 2022 年 7 月 1 日生效。所有免费运行者每月将有 400 分钟的 GitLab CI 和 CD 免费分配，所有免费托管的开源项目都需要注册强制开源计划。

‍

## ‍
想开始一个新项目？为什么不试试 Harness CI？

竞争情报领域有大量的替代方案。从 Jenkins、TeamCity 或 Bamboo 等传统系统到 GitLab CI 或 [Drone](http://drone.io/) 等更现代的系统，后者成立于 2012 年，现已成为 Harness 平台的一部分。Drone 是 Harness CI 模块的免费开源版本。

[Harness CI](https://harness.io/products/continuous-integration) 是一款企业就绪的云原生 CI 产品。开发人员可以利用可弹性扩展的自助式云原生管道快速构建。以编程方式(作为代码或通过我们的 GUI)完成的简单模板化、RBAC 和治理，确保任何代码满足所有质量和安全标准。

Harness 的无人机用户和开发者支持者 Jim Sheldon 编写了这个[简单的入门指南](https://dev.to/jimsheldon/run-your-own-drone-ci-4335)，开始使用无人机。