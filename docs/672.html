<html>
<head>
<title>Why You Should Migrate from Jenkins to Drone CI | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>为什么您应该从 Jenkins 迁移到 Drone CI | Harness</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/why-migrate-from-jenkins-to-drone-ci#0001-01-01">https://www.harness.io/blog/why-migrate-from-jenkins-to-drone-ci#0001-01-01</a></blockquote><div><p>市场上有如此多的 CI 工具，知道哪一个最适合您的组织可能很棘手。我们来讨论一下为什么 Jenkins 不是一个适合现代企业的 CI 工具，以及你如何迁移到无人机 CI。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>无论您是开发人员还是运营工程师，在这个云原生世界中都没有使用平庸工具的空间。每天都有创新和更容易获得的服务，使我们作为程序员和操作专家的生活变得更容易。今天，DevOps 是所有技术公司的焦点。持续集成(CI)是将 DevOps 作为一种方法的第一步。</p><p>然而，市场上有如此多的 CI 工具，要知道哪一个最适合你的组织是很困难的。还有许多具有不同功能、定价模式和支持计划的选项。本文将帮助您理解为什么 Jenkins 不是适合现代企业的 CI 工具，以及如何迁移到无人机 CI。</p><h3>对真正 CI 工具的需求</h3><p>我们都知道云工具每天都在发展。对于 CI 来说，市场上有很多工具，但是真正适合开发者的工具很难找到。虽然 Jenkins 对于初学者和小型组织来说是一个很好的起点，但是一旦部署增加，就会变得很困难。虽然速度是评判 CI 工具的另一个因素，但它也应该很容易在您的计算机上用最少的命令进行设置。</p><p>Drone CI 拥有成为独一无二的 CI 工具所需的一切，可以帮助开发人员通过持续集成来构建和测试他们的应用程序。您可以在几分钟之内在本地机器上设置好它，并开始进行持续集成。无人机 CI 建立在 Docker 之上，在每个阶段都使用容器的力量。</p><h2>詹金斯 vs 无人机 CI</h2><h3>詹金斯</h3><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>Jenkins 是一个开源的 CI 工具。它用于构建和测试软件，可以在开发人员的本地机器上，也可以在 CI 环境中，如任何公共云。有了 Jenkins，您可以自动化从代码提交到生产的软件交付管道。Jenkins 主要用于构建和部署自动化。它通常与 DevOps 工具链中的其他工具相结合，如源代码管理、问题跟踪和项目管理。</p><p>除了这些工具，Jenkins 还用于自动化测试和部署应用程序。Jenkins 的功能包括管理不同的工作，查看摘要图表，以及接收电子邮件通知。</p><h3>无人机 CI</h3><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>Drone CI 是 Harness 收购的开源 CI 服务器。它用于构建和测试软件，可以在开发人员的本地机器上进行，也可以在持续集成环境中进行，比如任何公共云。使用 Drone，您可以从代码提交到生产自动化您的软件交付管道。除了构建软件，Drone 还允许您构建、测试和部署您的应用程序。Drone CI 被认为是一种现代 CI 工具，因为它使用 YAML 文件形式的声明性方法来自动化测试，并在每个步骤中广泛使用 Docker 容器。构建管道花费时间更少，而且很容易设置和运行。</p><p>‍</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>‍</p><p>Drone CI 是一个基于容器的声明式持续集成工具，在每个步骤中都广泛使用了 Docker 容器，可以轻松地在您的笔记本电脑、私有数据中心或公共云上运行。CI 的这种声明性有助于组织采用 GitOps。</p><p>下面是一个简单的配置 yaml 文件:</p><h6>种类:管道</h6><h6>类型:kubernetes</h6><h6>名称:默认</h6><h6> </h6><h6>步骤:</h6><h6>-名称:测试</h6><h6>图像:节点</h6><h6>命令:</h6><h6>- npm 安装</h6><h6>- npm 测试</h6><p>只是用另一个场景扩展了 YAML 配置，您希望将更改合并到主分支。在这种情况下，这些阶段是:</p><ul role="list"><li>建设</li><li>单元测试</li><li>部署到开发</li><li>整合测试</li></ul><p>YAML 配置可以很容易地指定如下:</p><h6>种类:管道</h6><h6>名称:默认</h6><h6> </h6><h6>步骤:</h6><h6>-名称:构建</h6><h6>图像:节点:8.6.0</h6><h6>命令:</h6><h6>- npm 安装</h6><h6>- npm 运行构建</h6><h6>何时:</h6><h6>事件:</h6><h6>-推</h6><h6> </h6><h6>-名称:单元测试</h6><h6>图像:节点:8.6.0</h6><h6>命令:</h6><h6>- npm 运行单元测试</h6><h6>何时:</h6><h6>事件:</h6><h6>-推</h6><h6> </h6><h6>-名称:集成测试</h6><h6>图像:节点:8.6.0</h6><h6>命令:</h6><h6>- npm 运行集成 _ 测试</h6><h6> </h6><h6>-名称:部署开发</h6><h6>图像:节点:8.6.0</h6><h6>命令:</h6><h6>- npm 运行部署- - env=dev</h6><h6>何时:</h6><h6>事件:</h6><h6>-推</h6><h6>分支:</h6><h6>-主人</h6><h2>为什么 Jenkins 不适合今天的云原生世界</h2><p>毫无疑问，Jenkins 在 CIcontinuous 集成领域具有先发优势，它因其插件的广泛传播而变得流行。对于一个拥有基本用法的小团队来说，Jenkins 很好，但是随着团队的成长，这变得很有挑战性。它缺乏现代的云原生功能。插件配置似乎是一场噩梦，在某些时候，它变得难以维护和扩展，并且难以维持正常运行时间。此外，詹金斯是众所周知的高维护。使用 Jenkins 时，管道上的可见性非常差，这使得调试非常痛苦。最初，当你设置它时，它就像一个魔咒，你改变一个简单的东西，它就开始坏掉。</p><p>缺乏创新和陈旧的方法使企业从 Jenkins 转向更复杂的平台。管理 Jenkins 可以是一个全职的角色，它挤走了你的开发人员的精力和时间。Jenkins 不适合您的云原生开发的一些最大原因包括:</p><ol role="list"><li>Jenkins 不仅仅用于 justCI，这就是问题的开始。随着 Jenkins 实例变得越来越复杂，它们将会产生瓶颈。</li><li>\CI 和连续部署(CD)通常是分开进行的。用户必须用自定义脚本实现 CD——这不是开发运维的正确方式。</li></ol><ol start="3" role="list"><li>你需要一个詹金斯专家来维护和调试它。无人机管理员报告称，他们在维护无人机实例上花费的时间比 Jenkins 管理员少得多。无人机可以轻松扩展到每天处理数千条流水线执行，每月只需要几个小时的维护。</li></ol><ol start="4" role="list"><li>这么多插件，漏洞很容易引入，很乱。插件具有复杂的相互依赖性，因此更新一个插件可能会破坏另一个插件。</li></ol><ol start="5" role="list"><li>Jenkins 可能很难高效地扩展，因为您只能有一个不能在高可用模式下运行的控制器。</li><li>在高可用性配置中，多个 Jenkins 实例不能一起工作，一次只能有一个 Jenkins 实例写入数据库。</li></ol><ol start="7" role="list"><li>詹金斯的设计没有考虑到未来的创新。Jenkins 在 Docker 创建前几年就开始了，所以 Jenkins 从来就不是一个容器原生的 CI 工具。</li></ol><p>Jenkins 在计算资源上很重，它消耗了很多资源，当你下载一些基本插件时，它仍然滞后。例如，这个 Jenkins docker 图像大约为 270MB，而 Drone docker 图像大约为 22MB。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>‍</p><p>另外，看看 Twitter 用户 Jim Sheldon 分享图片尺寸差异的例子。</p><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"/><p>‍</p><ol start="8" role="list"><li>Jenkins 需要很高的学习曲线，用户需要学习多种语言来完成复杂的 CI/CD 设置。Groovy 只是其中之一，<a href="https://plugins.jenkins.io/job-dsl/"> Jenkins DSL </a>是另一个，对于第一次尝试设置它的人来说，很快就会变得混乱。</li></ol><ol start="9" role="list"><li>一些用户报告说，使用 Jenkins CLI 运行构建会产生延迟，这对 DevOps 工具来说不是一个好兆头。Drone CLI 速度很快，您可以使用简单的 drone exec 命令在本地运行构建。Drone 还有一个可以启用的“<a href="https://discourse.drone.io/t/feature-preview-debug-mode/8344">调试模式</a>，允许用户交互调试失败的管道。</li></ol><h2>从詹金斯迁移到无人机有什么好处？</h2><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>‍</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>从 Jenkins 迁移到 Drone 有很多好处。这些是我们考虑的首选:</p><ul role="list"><li><strong>简单</strong>——无人机比詹金斯简单多了。如果你需要更高级的，那么詹金斯有更多的功能。然而，如果你只是想快速启动并运行，而不必配置任何东西，那么无人机是一个好得多的选择。</li></ul><ul role="list"><li><strong>速度</strong>–默认情况下，Jenkins 使用轮询机制来寻找代码的变化。这是无人机在使用 webhooks 时避免的事情。这意味着 Drone 在检测代码更改方面要快得多。Jenkins 可以使用 webhooks，但这不是默认行为，也不像 Drone 那么容易。</li></ul><ul role="list"><li><strong>易用性</strong>——无人机在两个方面比詹金斯简单。首先，用户界面简单多了。第二，安装过程简单多了。</li></ul><ul role="list"><li><strong>现代方法</strong>–Jenkins 仍然使用旧方法，在运行作业时直接执行命令，而不是使用容器等现代方法。</li></ul><ul role="list"><li><strong>用 go 编写</strong>–Go 正成为一种合适的语言，因为它能够适应云原生空间，而 Drone 是用 Go 编写的，而 Jenkins 是用 Java 编写的。</li></ul><ul role="list"><li>简单测试——你不再需要像在 Jenkins 中那样使用 Groovy 来构建你的测试。一切都以声明的方式进行，测试是用. drone.yaml 文件指定的。</li></ul><ul role="list"><li><strong>简单声明–</strong>在 Drone 中，一切都通过简单的 YAML 文件进行配置，非常容易配置，即使是最新用户也可以理解和设置。正如我们之前讨论的，无人机的声明性有助于组织轻松采用 Gitops。</li></ul><ul role="list"><li><strong>基于容器和云原生—</strong>每个步骤都是完全隔离的 Docker 容器，因此开发人员可以快速知道每个阶段使用了哪个映像。如果在管道的任何阶段出现问题，容器都有助于调试，并且很容易在本地机器上重现每个步骤。</li></ul><p>此外，由于 GitOps 是一种更现代的部署 Kubernetes 相关部署的方法，无人机和 Argo CD 的组合非常好。例如，您可以使用 Drone 构建图像，然后在 git 中提交对应用程序配置的更改，Argo 会识别并部署该更改。如果你喜欢更定制化的方法，你可以使用 Harness GitOps，它与无人机集成得很好。</p><h2>无人机 CI 和线束入门</h2><p>就 CI/CD 工具而言，没有放之四海而皆准的解决方案。不同的组织会有不同的需求。同样，不同的组织会优先考虑不同的特性。因此，在为您的组织选择合适的 CI/CD 工具时，评估您的需求并找到最能满足这些需求的产品至关重要。此外，重要的是要考虑哪些功能对您的组织是必要的，哪些功能是最好的。如今，每个组织都希望采用 DevOps 并使用现代云原生技术来快速部署软件。现在，选择具有现代功能的云原生平台和工具变得至关重要。考虑到这一点，如果您目前正在使用 Jenkins，并且正在寻找替代产品，请考虑迁移到 Drone。Harness 随时准备帮助和支持您解决任何问题。</p><p><a href="https://www.drone.io/">免费上手无人机 CI！</a></p><p><a href="https://app.harness.io/auth/#/signup/?module=ci">免费上手线束 CI</a>！</p><h2><strong>CI 的进一步阅读和案例分析</strong></h2></div></div>    
</body>
</html>