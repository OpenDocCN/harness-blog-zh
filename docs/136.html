<html>
<head>
<title>ServiceNow for CI/CD Pipelines - RBAC for Separation of Duties | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>CI/CD管道的service now-RBAC职责分离|线束</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/servicenow-ci-cd-pipelines#0001-01-01">https://www.harness.io/blog/servicenow-ci-cd-pipelines#0001-01-01</a></blockquote><div><p>Harness可以管理ServiceNow的多个实例，并具有完整的基于角色的访问控制(RBAC)以实现职责分离。利用光盘即服务。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>昨天，我们<a href="https://techcrunch.com/2019/04/23/harness-hauls-in-60m-series-b-investment-on-500m-valuation/" target="_blank">宣布了我们的B轮融资</a>，IVP、谷歌和ServiceNow都参与了这一轮融资。</p><p>正如您所料，Google和ServiceNow都在CI/CD中扮演着重要角色，特别是在云/容器编排和变更管理方面。</p><p>早在一月份，Harness宣布集成Atlassian吉拉，以帮助开发团队自动化部署的标签/审计和管道阶段的批准。今天，我们非常高兴地宣布对ServiceNow提供同样的支持。</p><p>在一个典型的企业中，我们看到吉拉往往是开发团队(生产前)的记录系统，而ServiceNow是IT Ops(生产)的系统记录。</p><p>为了使<a href="https://harness.io/blog/what-is-continuous-delivery/" target="_blank">连续交付</a>在这些企业中扩展，需要利用来支持两个记录系统，以便可以跨所有团队、环境和系统简化和自动化变更。</p><p>Harness ServiceNow支持支持两种主要使用情形:</p><p>1.<strong>使用ServiceNow票证跟踪/审核生产部署</strong>(和管道)的进度。<br/> 2。<strong>批准/拒绝部署管道阶段</strong>或使用ServiceNow票证的工作流。</p><p>这里有一个关于新集成的3分钟快速入门:<br/></p><figure class="w-richtext-align-center w-richtext-figure-type-image"/><h2>将ServiceNow与Harness集成</h2><p>Harness可以管理ServiceNow的多个实例，并为职责分离提供了完整的基于角色的访问控制(T2)。</p><p>只需几分钟就可以将其集成到您的部署管道中。</p><p>转到:<strong>设置&gt;连接器&gt;协作提供商&gt; +添加协作提供商</strong> <br/></p><figure class="w-richtext-figure-type- "/><h2>使用SNOW票证跟踪部署管道</h2><p>现在，Harness使您能够在执行管道、阶段或部署工作流期间，根据需要多次创建或更新票据。</p><p>例如，让我们在Harness中编辑一个现有的部署工作流，以便在部署工作流执行开始时创建一个票据，并在该工作流成功完成时更新同一个票据。</p><p>为此，让我们<strong>打开</strong>，<strong>编辑一个现有的部署工作流，</strong>和<strong>将ServiceNow任务</strong>添加到我们的预部署和后部署步骤中:</p><figure class="w-richtext-figure-type- "/><p><br/></p><p>为了<strong>创建一个票</strong>，我们简单地配置<strong>预部署步骤</strong>如下:<br/></p><figure class="w-richtext-figure-type- "/><p><br/>注意，我们可以使用线束变量(使用$ pre-fix)来用工作流、工件和管道上下文填充标签。</p><p>我们还可以从输出中创建一个名为“snow”的新变量，这样我们就可以在工作流中再次引用同一个ServiceNow票据，以便进行更新。</p><p>为了<strong>更新相同的ServiceNow票证</strong>，我们可以在部署工作流中配置一个<strong>部署后步骤</strong>，如下所示:</p><figure class="w-richtext-figure-type- "/><p>请注意，我们使用变量<strong> ${snow.issueNumber} </strong>作为键来引用我们在<strong>预部署步骤</strong>中创建的同一个ServiceNow票证。<strong> </strong>这意味着我们可以以增量方式向同一个ServiceNow票证添加活动，而无需记住票证id或标识符。</p><p>现在，当我们下一次运行我们的部署工作流时，我们看到我们的ServiceNow步骤完全可视化(下面的屏幕截图)。请注意我们刚刚在屏幕截图的右下角创建的ServiceNow票证的深层链接:<br/></p><figure class="w-richtext-figure-type- "/><p>单击上述部署工作流中显示的深层链接，我们将直接进入ServiceNow票证，并显示我们在部署前和部署后步骤中记录的所有活动:</p><figure class="w-richtext-figure-type- "/><p><br/>这样，您就有了:在单个ServiceNow票证中对您的部署管道进行全面的进度跟踪！<br/>现在来看第二个用例...</p><h2>使用ServiceNow票证批准管道阶段</h2><p>到目前为止，我们的客户只能使用我们的Harness UI中闪亮的大按钮来批准/拒绝管道阶段或工作流执行:</p><figure class="w-richtext-figure-type- "/><p><br/> <br/>或者使用吉拉(如果运行ServiceNow的话会有点烦人)。</p><p>如今，客户只需更新预定义的ServiceNow票证属性的值，即可在ServiceNow票证中完成所有这些工作。</p><p>例如，将ServiceNow票据的<strong>状态属性</strong>更改为“已解决”或“已批准”可以自动批准执行管道阶段或部署工作流。</p><p>同样，这实际上需要几分钟的时间来配置，您就可以开始了。</p><h2>为管道阶段添加ServiceNow批准</h2><p>假设我们有一个简单的三阶段部署管道，包括开发、QA和生产。<br/></p><figure class="w-richtext-figure-type- "/><p>现在，假设我们需要一个新的ServiceNow批准阶段来管理代码如何从QA提升到生产。</p><p>点击QA和生产阶段之间的“<strong> + </strong>”符号。现在，让我们定义一下我们的ServiceNow批准标准应该是什么样的:</p><figure class="w-richtext-figure-type- "/><p><br/> <br/>选择<strong> ServiceNow实例和票据类型</strong>(事件、变更或问题)。</p><p>最后，定义票证<strong>发行号</strong>，它将批准/拒绝您的管道阶段(您可以使用您的snow管道会话变量)。</p><p>在上例中，将工单<strong>状态</strong>更改为<strong>完成</strong>将批准流水线阶段，将工单<strong>状态</strong>更改为<strong>完成</strong>将拒绝流水线阶段。</p><p>一旦我们的批准被配置，我们的管道现在有4个阶段:<br/></p><figure class="w-richtext-figure-type- "/><p>我们开始了:只需5-10分钟，您就可以在ServiceNow中全面审计线束部署管道。此外，您还可以使用ServiceNow来推动管道阶段批准。</p><p>想试试马具吗？您还有两分钟就要开始我们的<a href="https://harness.io/try-for-free-continuous-delivery-as-a-service/" target="_blank">审判</a>。</p><p>干杯，<br/>史蒂夫。<br/>@伯顿说</p></div></div>    
</body>
</html>