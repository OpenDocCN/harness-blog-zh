# 吊带提供持续输送的|吊带

> 原文：<https://www.harness.io/blog/harness-delivers-role-based-access-control>

队友:“嘿，我们买的那个新工具的登录是什么？”你:“试试 admin/admin”——没了！我们有 RBAC。

有过管理员/管理员登录信息综合症吗？这对于您的监控工具来说可能很好，但是对于连续交付来说就不行了。例如，开发人员/技术人员需要管理工具，开发人员需要自由部署，安全人员需要控制这种访问的能力，以便他们可以出于治理和法规遵从性原因审计部署。因此，基于角色的访问控制(RBAC)是企业 CD 的强制性要求。

大约在去年九月，我们和几个 Harness 客户坐下来讨论我们的[内部版本](https://harness.io/blog/continuously-delivering-for-harness-on-premises-customers/)和 RBAC。这是我们学到的。

## 组织和团队的灵活建模

每个企业、组织和应用都是不同的。团队之间的角色和职责也各不相同，尤其是在比较传统应用程序架构和云原生架构时。

例如，一个微服务架构通常有多个团队，每个团队独立开发和部署。因此，您需要在您的 CD 平台中对这些角色进行建模，以确保每个人都能以正确的许可和访问权限愉快地部署。一个典型的企业可能有几千个应用程序、微服务(和团队)。

在 Harness 中，用户属于一个或多个用户组:

用户组由 Harness 管理员创建，并由权限和操作定义，这两者都可以分层和过滤。

## 基于角色的访问控制粒度权限

客户要求跨其部署管道的不同组件获得无限粒度的权限。

线束允许以下权限:

*   **应用** -服务的逻辑组
*   **服务** -神器
*   **环境** -基础设施
*   **触发器** -执行管道/工作流的条件
*   **管道** -一组阶段/工作流程
*   **工作流**——将服务部署到环境中
*   **部署** -管道/工作流的执行

然后，可以将操作映射到上述每一项。

## 通过基于角色的访问控制实现职责(操作)的完全分离

不言而喻，您希望在您的 CD 平台和部署管道中控制谁可以做什么。

例如，您可能希望让您的 DevOps 团队管理部署管道(创建/更新/删除/读取)，但只允许开发人员部署和查看它们。此外，您可能希望向高管授予只读访问权限，以便他们能够了解您的整个部署管道。

这些是我们与客户商定的行动:

*   Create
*   Update
*   删除
*   执行
*   阅读

## 限制云提供商和工具的使用

没有访问您的云提供商(或内部基础架构)和 DevOps 工具的部署管道，连续交付就无法工作。

我们的许多客户面临的挑战是限制谁可以使用哪些云帐户和工具集。例如，您不希望数百人对所有应用程序/服务/环境使用同一个 AWS 帐户，并按照他们的意愿运行数千个计算节点。此外，企业还有 Nexus、Jenkins、Splunk、ELK、AppDynamics 等很多实例。

我们通过在应用程序和环境级别限制云和工具来解决这些需求:

应用和环境也可以分层，因此许多应用/环境可以与单个云提供商或工具实例相关联。

## 连续交付的基于角色的访问控制示例

假设我们的组织中有以下团队:

*   **devo PS**——负责 CI/CD 工具和构建跨所有应用的部署管道(自动化)
*   **电子商务** -负责开发和部署前端 web 应用程序
*   **支付** -负责开发和部署支付微服务
*   **订单** -负责开发&部署订单微服务
*   **执行**——负责电子商务的交付

这里有一个 3 分钟的视频，介绍如何创建这些团队:

在线束中，点击**持续安全**导航标题，选择**用户和权限**:

## 让开发人员构建部署管道

在 Harness 中使用基于角色的访问控制，我们可以创建一个拥有以下权限的 DevOps 用户组:

在上面的截图中，我们的 DevOps 用户组被授予为所有应用程序、服务和环境构建(创建、更新、删除、读取)部署管道的权限，但是不能使用它们进行部署。部署许可被保留并授予每个开发团队，因此他们能够读取和执行由 DevOps 构建的部署管道。

## 让开发使用部署管道进行部署

例如，电子商务开发团队用户组如下所示:

应用程序和服务仅被过滤为“电子商务”。动作也被限制为“执行”和“读取”，因此团队可以使用 DevOps 团队为他们构建的环境、工作流和管道进行部署。显然，利用权限和操作是灵活的，因此您可以根据自己的组织和团队的需要对它们进行个性化设置。

## 让高管获得跨管道的洞察力

最后，我们可以授予高管对所有“电子商务”应用/服务和部署管道的只读访问权限:

这让高管们能够访问所有部署渠道的分析和报告。

## 限制团队对云帐户和工具的访问

除了基于角色的访问控制之外，我们将很快推出 LDAP/AD/OKTA/SAML 支持，这样您就可以对用户进行身份验证，并在您的公司目录和工具之间映射用户组。

请随意注册您的线束软件交付平台的[免费试用版](https://app.harness.io/auth/#/signup)并尝试一下。

干杯，
史蒂夫。
@伯顿说