<html>
<head>
<title>What is Argo CD with Helm Charts? | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>什么是带舵图的Argo CD？装具</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/what-is-argo-cd-helm-chart#0001-01-01">https://www.harness.io/blog/what-is-argo-cd-helm-chart#0001-01-01</a></blockquote><div><p>在本文中，我们将介绍如何使用带有舵图的Argo CD实现GitOps。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>应用程序部署的GitOps方法已经变得非常流行，因为它简单易用，并且为开发人员消除了许多瓶颈。使用开源项目<a href="https://github.com/argoproj/argo-cd"> Argo CD </a>和<a href="https://helm.sh/"> Helm Charts </a>来管理Kubernetes应用程序使GitOps变得简单。</p><p>在本文中，我们将介绍如何使用带有舵图的<a href="https://argo-cd.readthedocs.io/en/stable/"> Argo CD </a>实现GitOps。使用这种方法，我们将展示如何部署一个简单的应用程序和舵图。</p><h2>阿尔戈CD和舵图</h2><p>GitOps 作为一种现代的<a href="https://harness.io/products/continuous-delivery">连续交付</a> (CD)模型，在Git和部署应用程序的目标环境(例如Kubernetes)之间使用GitOps代理。GitOps还跟踪Git中发生的所有变化。</p><p>如果有任何更改，GitOps代理会提取更改以匹配预期的配置。代理比较实际状态和期望状态。例如，当开发人员将yaml文件中的pod编号从2更改为4时，代理会比较这两种状态，当发现这种更改时，它会提取这些更改以使这两种状态(实际状态和期望状态)相同。当谈到一个经过深思熟虑的GitOps方法时，Argo CD和Kubernetes 是很好的一对。</p><p>当涉及到GitOps时，将Argo CD和舵图一起使用效果非常好。您可以使用Helm轻松地在Argo CD上部署应用程序。它们都是强大的云原生组合，帮助企业交付软件。Kubernetes已经成为一个事实上的容器编排工具，每个组织都想采用它来加速应用程序的部署。但是，光靠Kubernetes是无法有所作为的；您应该采用类似GitOps的云原生方法，以确保您处于正确的道路上。</p><p>借助Argo CD和Helm等工具，您可以获得快速部署软件的好处。虽然Argo CD是一个真正的GitOps工具，但Helm是用来部署Kubernetes应用程序的。在您的软件开发生命周期中拥有这两者，您可以创造奇迹。</p><h2>什么是Argo CD？</h2><p>Argo CD 是一个声明性的、基于GitOps的持续交付工具，可以帮助您从Git部署应用程序，管理它们的生命周期，并保持您的环境同步。通过<a href="https://harness.io/blog/software-deployment-tools">选择Argo CD </a>，您可以让您的部署保持最新，并确保您的应用程序始终遵循所需的状态。Argo CD允许您将应用程序及其环境定义为代码，然后在任何<a href="https://kubernetes.io/"> Kubernetes </a>集群上部署和更新它们。</p><h2>什么是舵轮图？</h2><p>虽然Kubernetes已经成为现代云原生企业事实上的容器编排工具，但学习曲线很高，因为它对一些人来说是一个复杂的工具。在Kubernetes上配置和部署应用程序的过程可能是一项艰巨的任务。幸运的是，有了Helm和Helm Charts，现在可以自动化部署过程，并在Kubernetes上快速部署和管理应用程序。</p><p>Helm是一个帮助您管理Kubernetes应用程序的开源工具。Helm Charts是预先配置的Kubernetes资源包，可以快速轻松地部署。在Helm和Helm Charts的帮助下，开发人员可以简化他们的Kubernetes部署过程，并快速启动和运行他们的应用程序。</p><h2>阿尔戈CD对赫尔姆</h2><p>Argo CD和Helm都是用于管理和部署云原生应用程序的流行开源工具，但它们有一些主要差异。让我们来看看Argo CD和Helm的三个主要区别。</p><h3>1.应用程序部署</h3><p>Argo CD和Helm的第一个区别是它们部署应用程序的方式。Argo CD是一个CD工具/平台，可用于将应用程序部署到多个环境中。Helm是一个包管理器，可用于将应用程序部署到单个环境中。因此，Argo CD更适合更复杂的部署，而Helm更适合简单的部署。</p><h3>2.应用管理</h3><p>第二个区别是他们管理应用程序的方式。Argo CD是一个基于GitOps的工具，这意味着它使用Git作为真实的单一来源，并将其作为存储和跟踪应用程序配置和清单的焦点。这使得观察更加容易，如果需要，您可以回滚到以前的版本。Helm将Helm图表视为管理和部署应用程序的焦点，并且必须手动跟踪更改。</p><h3>3.缩放应用</h3><p>第三个区别是他们如何扩展应用程序。Argo CD设计为水平扩展，可以轻松部署到多个集群。使用Helm，您只能部署到单个集群。Argo CD非常适合大规模部署，Helm非常适合小规模部署。</p><h2>如何将Argo CD与舵图一起使用</h2><p>现在我们已经看了Argo CD和舵，让我们探索如何使用Argo CD和舵图:</p><ol role="list"><li>第一步是启动并运行Kubernetes集群</li><li>创建一个命名空间来存储所有Argo CD相关的部署。</li><li>在本地计算机上安装Argo CD CLI，以便与Argo CD实例进行交互并管理您的应用程序</li><li>将Argo CD和manifests部署到您的Kubernetes集群上，并通过您喜欢的方法访问Argo CD UI(我们将在教程中使用端口转发方法)</li><li>使用用户名和密码从用户界面登录到Argo CD(我们将在下面的教程中展示)</li><li>下一步是在本地机器上安装Helm命令行界面(CLI)。这将允许你与你的舵图互动。</li><li>一旦安装了Helm CLI，您就可以连接到Argo CD实例，并将其配置为使用Helm charts。</li><li>最后，您可以使用Argo CD通过舵图部署您的应用程序。这将允许您快速轻松地管理和部署您的应用程序。</li></ol><h3>辅导的</h3><p>对于本教程，唯一的先决条件是能够访问Kubernetes集群。您还可以使用Minikube或Kind来获得单节点集群。</p><p>首先，创建一个名称空间:</p><h6>kubectl创建名称空间argocd</h6><p>将清单文件应用于创建的命名空间:</p><h6>ku bectl apply-n argocd-f https://raw。githubusercontent。com/Argo proj/Argo-CD/stable/manifests/install。YAML</h6><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>确保所有的pod都在名称空间内正常运行:</p><h6>kubectl get pods -n argocd</h6><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>现在，让我们通过端口转发来公开我们的ArgoCD服务器UI:</p><h6>kubectl端口转发SVC/argocd-server-n argocd 8080:443</h6><p>一旦你这样做了，你现在可以在<a href="https://localhost:8080/"> https://localhost:8080/ </a>上看到ArgoCD UI</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>现在，您需要用户名和密码登录。默认情况下，用户名为“admin ”,密码可以使用以下命令生成:</p><h6>ku bectl-n argocd get secret argocd-initial-admin-secret-o JSON path = " { . data . password } " | base64-d；回声</h6><p>您将得到一个输出，用作您的密码。一旦您有了用户名(admin)和密码，请登录ArgoCD。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>此外，确保您可以通过CLI在本地使用Argo CD，因此安装Argo CD CLI:</p><h6>brew安装argocd</h6><p>现在，您可以通过CLI登录Argo CD并与之对话:</p><h6>argocd登录本地主机:8080</h6><p>它会要求您输入用户名和密码。设置两者，登录将会成功。</p><h2>通过Helm将应用程序部署到Argo CD</h2><p>参考<a href="https://github.com/argoproj/argocd-example-apps"> Argo CD示例repo </a>通过Helm部署留言簿应用程序。</p><p>让我们在ArgoCD上创建一个应用程序。</p><h6>argocd app创建helm-guest book-repo https://github.com/argoproj/argocd-example-apps.git-path helm-guest book-dest-server https://kubernetes . default . SVC-dest-namespace default</h6><p>您应该会看到应用程序被创建:</p><h6>应用程序“helm-guestbook”已创建</h6><p>让我们检查创建的应用程序的状态:</p><h6>argocd应用程序获取头盔-留言簿</h6><p>‍</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>‍</p><p>您可以看到服务和部署都处于不同步状态。让我们使用以下命令同步应用程序:</p><h6>argocd应用程序同步舵-留言簿</h6><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>您现在可以看到我们服务的健康状态是健康的，部署正在进行中。部署将需要一些时间，并变得健康。</p><p>您可以通过进入UI来验证Argo CD上创建的应用程序。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>这里可以看到状态是<strong> <em>健康</em> </strong>和<strong> <em>同步。</em> </strong></p><p>通过进行端口转发，您可以轻松地访问您部署的应用程序:</p><h6>kubectl左舷-前进SVC/helm-留言簿9090:80</h6><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>让我们通过<a href="http://localhost:9090/"> http://localhost:9090/ </a>访问我们的应用程序。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><h2>使用Argo CD部署舵图</h2><p>让我们使用阿尔戈光盘部署舵图。</p><p>转到Argo CD UI中的设置并添加存储库。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>添加以下详细信息并连接。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>您应该会在列表中看到您添加的存储库。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>现在，点击创建一个新的应用程序。我们将在Argo光盘上部署NGINX舵图。</p><p>请确保指定所需的详细信息。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>一旦你点击创建，你应该能够在Argo CD仪表板上看到你的应用程序。</p><p>首先，应用程序会不同步。一旦我们同步了应用程序，它就会更新并显示为健康。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>点击“同步”，然后点击“同步”</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>现在，如果你回去看看，你的应用程序应该显示健康和同步的状态。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><h3>使用线束GitOps</h3><p>Harness提供了本机GitOps功能，允许您通过将源存储库中的Kubernetes清单与目标集群同步来部署服务。首先，通过在您的环境中安装GitOps代理来设置Harness GitOps。接下来，在Harness中定义如何管理GitOps应用程序中的期望状态和目标状态。GitOps代理执行应用程序中定义的同步操作，并对源和目标状态中的事件做出反应。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>‍</p><p>使用您的一个Kubernetes集群来尝试这个<a href="https://docs.harness.io/article/pptv7t53i9-harness-cd-git-ops-quickstart">利用GitOps </a>。</p><p>首先，你需要<a href="https://app.harness.io/auth/#/signup/?module=cd&amp;?utm_source=website&amp;utm_medium=harness-developer-hub&amp;utm_campaign=cd-plg&amp;utm_content=get-started">注册一个免费的线束账户</a>并导航到GitOps选项卡。</p><p>从侧面菜单导航到部署&gt; GitOps。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>Harness将代表您安装Argo CD，并将Argo CD实例连接到Harness。你只需要一个Kubernetes集群。现在，我们需要设置所需的东西来完成GitOps，作为Harness的一部分。</p><p>导航至GitOps &gt;设置&gt; GitOps代理。</p><p>您将一个接一个地连接所有需要的GitOps设置，如下所示。</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>一旦连接并验证了所有东西，您就可以开始通过Harness GitOps部署应用程序了。以著名的留言簿为例，一旦部署完成，您应该会看到如下所示的Harness GitOps仪表板:</p><figure class="w-richtext-figure-type-image w-richtext-align-fullwidth"/><p>你可以跟随这个简单的<a href="https://developer.harness.io/tutorials/deploy-services/first-gitops-example?utm_source=internal&amp;utm_medium=social&amp;utm_campaign=community&amp;utm_content=pavan-gitops-article&amp;utm_term=gitops"> Harness GitOps教程</a>来看看通过<a href="https://docs.harness.io/article/w1vg9l1j7q-harness-git-ops-basics?utm_source=internal&amp;utm_medium=social&amp;utm_campaign=community&amp;utm_content=pavans-gitops-article&amp;utm_term=gitops"> Harness GitOps </a>部署应用程序是多么直观和简单。</p><h3>让我们做GitOps</h3><p>GitOps是一种现代软件交付方法，有着光明的未来。如果您正在处理与Kubernetes相关的部署，那么GitOps有许多好处。GitOps专注于丰富的开发人员体验，可加快您的软件部署速度。结合DevOps最佳实践，GitOps为您的软件交付插上翅膀。</p><p>寻找一个GitOps持续交付工具？<a href="https://harness.io/demo/gitops">立即申请线束CD的演示</a>&amp;GitOps-as-a-Service！</p></div></div>    
</body>
</html>