<html>
<head>
<title>The Dependency and Plugin Hell That is Jenkins | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Jenkins | Harness的依赖和插件地狱</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/dependency-plugin-hell-jenkins#0001-01-01">https://www.harness.io/blog/dependency-plugin-hell-jenkins#0001-01-01</a></blockquote><div><p>詹金斯的外挂模式已经成为CI/CD的“拖鞋猫鸭”故事。情况不妙。</p><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>詹金斯的外挂模式已经成为<a href="https://harness.io/blog/what-is-ci-cd/" target="_blank"> CI/CD </a>的“拖鞋猫鸭”故事。这并不好——正如你所想象的，当有人觉得有必要把你的模型称为“依赖地狱”时。</p><p>你看过拖鞋猫的视频吗？你知道，就是拖鞋带着一只完整的活鸭子进他家，而他的主人惩罚他说，“拖鞋，你这只笨猫！你做了什么？！“如果你还没有，你应该<a href="https://www.youtube.com/watch?v=G3-sie5pNUE" target="_blank">现在就看</a>然后再回来。去吧，我等着。</p><figure class="w-richtext-figure-type- "><figcaption><em>You stupid cat.</em></figcaption></figure><p>现在告诉我不是超级适用于詹金斯:<em>詹金斯，你这个愚蠢的工具！你是如何通过猫扑获得超过1700个插件的？！</em></p><p>我将暂时放弃拖鞋的类比<strong/>，但是说实话，看看Jenkins插件索引不会让你有点紧张吗？随着<a href="https://plugins.jenkins.io/" target="_blank">1788个插件</a>目前可用，仔细阅读列表有点让人不知所措。当然，有大量的选择是很好的，但是有如此多的插件，很有可能很多已经失效或者被放弃了。</p><p>更糟糕的是，几乎所有这些插件都依赖于其他插件，这产生了依赖链——这是Jenkins插件模型的最大问题。詹金斯的依赖地狱足以让你重新思考你的整个CI/CD战略，我不会责怪你一点——因为，对我来说，这听起来像一大堆<em>不</em>。</p><h2>我们来谈谈插件</h2><p>现在让我澄清一下:不，不是所有的插件都是不好的。Jenkins插件“商店”上有一些非常棒的插件，它们非常有用，从长远来看，会为你节省大量的工时。另外，插件通常提供大量的可扩展性。但是当你看那1788个插件的列表时，其中有多少是实际可用的、维护良好的、没有依赖性的、没有安全漏洞的呢？</p><p>在你找到一个完全符合你要求的之前，你需要经历多少次呢？由于依赖链，除了你想要的插件，你还需要安装和维护多少其他插件？当所有这些依赖关系之间发生冲突时会发生什么？</p><p>最后，如果插件创建者决定停止维护它会怎样——你能承担这个任务吗，或者你需要找一个替代者(希望)做旧的那个？</p><figure class="w-richtext-figure-type- "><figcaption><em>“Your pain brings me joy,” says Devil Butler.</em></figcaption></figure><h2>欢迎来到依赖地狱！人口:你。</h2><p>鲜为人知的事实:第七层地狱也被称为詹金斯附属地狱。</p><p>依赖关系就像它们听起来的那样:你安装/升级了一个插件，现在必须安装/升级5-6个其他插件以确保第一个插件正常工作——通常，那些插件是你根本不用的东西；它们只是你的原始插件所需要的。</p><p>我能找到的最好/最差的依赖例子是<a href="https://plugins.jenkins.io/blueocean/#dependencies" target="_blank">蓝海</a>——看看那个依赖列表。这只是为了一个漂亮的用户界面！不难相信，但是他们之前已经被要求提供荒谬的依赖。</p><h4>情况变得更糟了...</h4><p>说到依赖，事情会变得<em>非常</em>复杂，<em>非常</em>迅速。你拥有的插件越多，更新时就越有可能出现问题——其中一个问题就是<strong>版本依赖</strong>。</p><p>假设你安装了插件A和插件B。插件A目前的版本是2.4，但是要兼容插件B，你得用1.8版本。理论上，这不是一个大问题——但实际上，如果插件A的1.8版本与你想安装的新插件C不兼容怎么办？简而言之:这破坏了工作。</p><figure class="w-richtext-figure-type- "><figcaption><em>Pictures are worth a thousand words.</em></figcaption></figure><p>像这样的情况使得你<strong>不能在你的插件上启用自动更新</strong>。在这种情况下，您现在需要脑力劳动来跟踪哪些插件需要保持当前版本，哪些可以更新。由于大多数人不想在这上面浪费精力，他们会干脆停止更新插件，这会带来漏洞的风险。</p><h4>更糟的是...</h4><p>如果这还不够，用户有时会遇到另一种情况:一个插件可能有一个版本中的<strong>漏洞的报告，但是依赖它的插件还没有更新。你的选择是要么接受安全风险，要么切断与插件的联系——这可能会导致下游影响。更复杂的是，<strong>某些插件只与Jenkins的某些版本兼容</strong>。</strong></p><p>最后，还有向后兼容性的问题。<a href="http://jenkins-ci.361315.n4.nabble.com/Third-party-dependencies-APIs-and-Jenkins-Proposals-td4978928.html" target="_blank">一位用户</a>分享了他对库依赖的体验:“<em> [...]简单地在Jenkins中包含这些常见的依赖关系本身会导致一些问题，比如如果它稍微破坏了向后兼容性，就再也不能升级那个库了。这是一个很容易被忽视的问题，直到出现问题——看看用户提出的四个解决方案，没有一个看起来简单或直观。</em></p><h2>正如我们常说的:解雇你的管家。</h2><p>几年前，Jenkins做了其他CI/CD平台做不到的事情。它曾有过辉煌的一天。但是现在，管理和维护插件、依赖项，尤其是当需要数百个脚本时，是如此的痛苦，以至于不再值得。尤其是当有一些非常好的平台时，所有的可扩展性都是内置的。</p><figure class="w-richtext-figure-type- "/><p>例如，我们可以自吹自擂，大声而自豪地宣称Harness只有150个插件——而且没有<strong>依赖项！你没看错，<strong>插件之间没有依赖关系</strong>！每个插件都作为一个自包含的Docker容器执行，其中运行的总是最新版本。你从不下载插件或者以任何方式维护它们——除非你<em>希望</em>为开源做出贡献。为什么不获得一个让生活更轻松的<a href="https://harness.io/blog/what-is-cicd-platform-why-should-i-care/" target="_blank"> CI/CD平台</a>的<a href="https://app.harness.io/auth/#/signup/" target="_blank">免费试用版</a>？不要成为组织的拖鞋:对依赖和插件地狱说不。</strong></p></div></div>    
</body>
</html>