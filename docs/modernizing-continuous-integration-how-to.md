# 持续集成的现代化:如何实际完成

> 原文：<https://www.harness.io/blog/modernizing-continuous-integration-how-to>

我们已经谈了很多关于持续集成的现代化以及这样做可以获得的好处。下面是实际操作的方法。

持续集成实践和平台的现代化可以采用四支柱方法。在任一支柱上取得进展将使您走上现代化持续集成平台和实践的道路。

这篇文章摘自我们的电子书《持续集成的现代化》。如果你喜欢你看到的内容，坚持到最后，我们会为你链接完整的电子书。它是免费的——最棒的是，没有栅门。

## 平台基础设施现代化

由于持续集成解决方案必须能够运行的速度、速率和并发性，运行外部构建的平台可以模拟它们所支持的应用程序。如今，弹性基础设施变得越来越容易实现(例如，在公共云中自动扩展资源和/或利用现代分布式平台，如 Kubernetes)，因此有必要建立一个支持 CI 平台的分布式云原生基础设施。

实际构建和打包发生的位置(例如构建节点/运行器)承担了大部分繁重的工作，并且具有相当弹性的工作负载性质。构建(例如 JAVA JAR 构建)和打包(例如 Docker 映像合成)是一项计算密集型任务。一旦构建和打包完成，跑步者可以无所事事。这显示了拥有一个临时构建节点的重要性。构建节点在任务期间加速旋转，然后在构建任务完成之后减速旋转/被销毁，以便不耗尽资源。

即使正在构建的应用程序本身并不面向 Kubernetes 端点，在 Kubernetes 上运行您的持续集成解决方案也可以为组织提供关于分布式应用程序如何在 Kubernetes 上运行的知识。现代的持续集成平台被设计成将短暂的节点/运行器部署到基于弹性/Kubernetes 的基础设施上。在现代基础设施上运行也有利于提高工程效率。

## 工程效率策略

工程效率的一个核心原则是满足你的内部客户。对于软件工程师来说，这就是尽可能地接近他们的工具和项目。像许多现代的应用程序基础设施一样，向开发人员转移意味着被包含在源代码管理(SCM)的项目结构中。

对于本地构建，签入特定于源代码控制语言的构建文件，如 Maven、Gradle 或 NPM 配置，已经成为一段时间以来的惯例。尽管有了额外的打包、信任和构建步骤(例如，发行版中不止一种语言或工件)，持续集成平台步骤现在被包含在 SCM 管理的项目中。现代持续集成平台支持声明性指令，其中定义了目标，CI 解决方案将创建所需的声明性状态(例如，输出工件)。

持续集成平台中一个常见的脱节是依赖性管理。在过去的十年里，对于软件工程师来说，这个问题已经用 Maven、Gradle、NPM 等依赖/打包/构建工具解决了。只需隐式或显式地定义您需要什么，依赖关系就会得到解决。持续集成工具存在脱节的问题，因为我们正在利用几个可能没有通用语法的工具。构建节点和运行者之间的依赖管理是一个常见的痛点。比如某些节点有一定的依赖关系，某些节点没有。现代解决方案采用基于容器的方法(例如，基于 Docker ),在短暂的构建节点/运行器容器中进行依赖管理。声明您所需要的，类似于 Docker 构建/合成，它将被执行，给予节点容器它所需要的一切。

## 测试优化

通常，一个组织以可重复和一致的方式运行自动化测试的第一次尝试最终会在他们的持续集成管道中结束。通常，这是一个容易的电梯；开发人员在本地构建中遇到的相同代码/测试覆盖进入了构建管道，因为这些步骤应该在提交之前执行。

尽管随着将测试引入 CI 管道的初始信心的增加，由于与管道集成的简易性，更多的测试和有时不适当的测试覆盖被引入。一个更难识别和纠正的问题是古怪的测试。易变测试是指在没有任何代码更改的情况下，定期通过和失败的测试。增加执行时间和对碎片缺乏信心的双重问题需要优化来避免。一个现代的持续集成解决方案应该能够可视化订单、计时和整体执行，以帮助识别并最终纠正过度的覆盖和剥落。

## 快速管道开发

软件是迭代中的练习。迭代发生的门槛越低，工程效率和敏捷性的收益就越大。在到达可提交阶段之前，本地构建会发生很多次；向开发集成环境前进。拥有一个本地环境是关键。奇怪的是，持续集成管道被设计成从本地机器外部运行；这才是重点。

对于先有鸡还是先有蛋的问题，需要在运行/接受之前开发 CI 管道。通常，CI 管道是远程开发的，因为 CI 系统远离用户的机器。本地化 CI 管道开发的能力允许软件工程师已经实现了一段时间的相同迭代速度。此外，本地运行的 CI 管道允许内部客户(软件工程师)在进行将触发构建的提交之前运行和调试管道，从而在构建之前建立信心。

## 现代持续集成架构

现代持续集成架构支持迭代和扩展，同时优化和建立信心，同时支持适当的反馈循环，以便采取行动和实现自动化。

使用上面的模型/架构，可以很容易地部署 Harness 持续集成，并且它支持现代的持续集成方法。

## 利用持续集成

利用企业和开源(基于无人机)的持续集成，拥有现代化的用户界面，旨在满足云原生工作负载的扩展要求。

## 最后

对于许多组织来说，持续集成似乎是一个已经解决的问题，但是与任何技术一样，总有改进和现代化的空间。随着现代开发过程允许更快速的开发，支持组织所需的敏捷性和迭代的平台正在发展。遗留方法被认为是脆弱和僵化的，而将现代实践和方法整合到您的持续集成平台将允许持久解决方案中的未来增长和敏捷性。

我们希望你喜欢我们的现代化持续集成电子书的最后摘录。请随时下载完整的电子书今天-这是免费的，不需要电子邮件地址:[现代化](https://harness.io/learn/ebooks/modernizing-continuous-integration-ebook/) [持续集成](https://harness.io/learn/ebooks/modernizing-continuous-integration-ebook/)。