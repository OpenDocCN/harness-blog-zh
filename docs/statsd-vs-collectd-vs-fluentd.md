# StatsD vs collectd vs fluentd 以及您应该知道的其他守护进程| Harness

> 原文：<https://www.harness.io/blog/statsd-vs-collectd-vs-fluentd>

为什么守护进程很重要，你有哪些选择？

最流行的守护程序是什么，它们能做什么？

监控是每个系统中的关键元素，虽然我们的用户是系统运行情况的重要指示器，但我们应该能够给他们最好、最流畅的体验。这时守护进程就派上了用场，它收集我们可能需要的每一条数据，或者一些我们甚至没有想到的数据。在接下来的文章中，我们将解释为什么这些守护进程如此重要，以及有哪些可供我们选择的选项。看看这个。

## 遇见精灵

收集器守护程序是一个在后台运行的进程，从您的系统中收集数据。这些守护进程通常以字母 D 结尾，以区别于系统上运行的其他进程。当我们这么说的时候，听起来可能很简单，但事实绝非如此。这些守护程序通常是更复杂架构的一部分，基于以下四个要点:

*   来源——信息来自哪里
*   交通——这些信息将如何传递给你
*   存储–这些数据将存储在哪里
*   视图–您将如何实际看到系统中正在发生的事情

每个守护进程都有自己的优点和缺点，这些优点和缺点集中在这些价值观上，并且有一长串守护进程的追随者试图让我们选择其中一个。我们决定将重点放在一些最流行的守护进程上，以帮助您更好地了解它们的价值。

## 状态:状态

StatsD 是一个简单的 Node.js 应用程序，最初由 Etsy 的工程团队构建。这是为了帮助团队传输关于他们的网络、机器和应用程序的数据点，并将这些信息转化为图表。

这让工程师更好地了解正在发生的事情，同时向公司内部的其他人提供相同的信息。

如今，它是收集和总结应用程序指标的最流行的守护程序之一。这是因为它的工作方式很简单。我们所要做的就是通过发送相关数据告诉它我们想要创建什么样的新指标，然后等待信息通过 UDP 端口。StatsD 服务器支持许多不同的数据类型，三种主要类型是计数器、计时器和计量器。

现在我们有了指标，是时候实际查看它们了。StatsD 是为 Graphite 构建的，这意味着它解析消息并直接提取度量。然而，它也可以很好地与其他可视化和度量工具配合使用。

谁使用它？许多知名人士都在使用 StatsD，从 KickStarter 到 Lyft、Misfit、AutoCAD、Dollar Shave Club 等等。

## 收集 d

collectd 是用 C 编写的，允许它在没有脚本语言或 cron 守护进程的系统上运行，比如嵌入式系统。它收集、传输和存储系统性能统计数据，数据采集和存储由插件处理。

插件是 collectd 的焦点，因为几乎所有的东西都是由它们完成的。当前列表包含 90 多个插件，从标准案例到低级、专业和高级主题。

你可以在这里找到一些有趣的插件，比如收集电荷、电流和电压的电池插件，或者从苹果电脑读取系统温度和风扇速度的苹果传感器插件。

当然，还有一个 StatsD 插件。您可以将这两者连接起来，并使用它来报告不同的事件，同时使用 collectd 来聚合它们。这将派上用场，因为 collectd 不是一个监控解决方案，现在您唯一的选择是简单的阈值检查。另一个主要缺点是——你不能生成图表。
配置超级简单，你要做的就是选择加载哪些模块。您不需要设置其他任何东西，但是您可以根据自己的意愿定制守护进程。

谁使用它？BBC 正在使用 collectd 从 200 多台服务器收集统计数据，neoTactics 在他们的云管理框架中使用它。

## 流体 d

fluentd 与我们之前提到的守护进程略有不同，因为它更像是一个日志记录工具。这就是为什么它通常会遇到 Logstash 和其他日志工具(而不是守护进程)。

fluentd 是一个数据收集守护程序，用于帮助您直接从日志和数据库中收集数据。更具体地说，您可以使用它来分析事件日志、应用程序日志和点击流(一系列鼠标点击)。

fluentd 本身是用 C 语言和 Ruby 结合编写的，由[宝藏数据](https://www.treasuredata.com/)打造。据其官网介绍，宝藏数据的联合创始人之一发现大量数据没有得到有效利用，并开发了 fluentd 作为可靠收集这些数据的解决方案。

这就是为什么您会在这个守护进程中发现“记录一切”的态度，其主要目标是在数据源和后端之间提供统一的日志记录层。作为 JSON 的 fluentd 结构化数据，允许跨多个源和目的地统一、收集、过滤、缓冲和输出日志(统一日志记录层)。插件也是这里的一个主要问题，有超过 300 个社区贡献的插件。它们按类别筛选，有针对 AWS、大数据、谷歌云、物联网和许多其他选项的独特插件。

谁使用它？ DeNA、GREE、SlideShare 甚至任天堂都使用 fluentd 为自己的平台收集海量数据日志。

## 不要忘记这些

我们只提到了几个在守护进程领域有发展趋势的玩家。还有一些其他的名字你也应该知道，比如:

*   [**systemd**](https://www.freedesktop.org/wiki/Software/systemd/)——所有守护进程的守护进程。它是大多数 Linux 发行版中默认的 init 系统，用于管理所有正在运行的守护进程。主要目标是统一所有发行版的基本 Linux 配置和服务行为。
*   [**crond**](http://linux.die.net/man/8/crond)——执行预定命令的守护程序。它调度基于时间作业，并自动安装在大多数 Linux 发行版上。
*   [**ntpd**](https://www.eecis.udel.edu/~mills/ntp/html/index.html)–网络时间协议守护进程(ntpd)是您将系统与时间服务器同步的最好朋友。它可以确保所有的时钟同步，我们不必告诉你这有多重要。 [**‍**](https://www.freedesktop.org/wiki/Software/systemd/)
*   [**supervisord**](https://www.freedesktop.org/wiki/Software/systemd/)**——一个守护程序，监视和控制类 UNIX 操作系统上的一些进程，让您在它们崩溃时重新启动它们。** 

## **最后的想法**

**有很多守护进程可供选择，其中一些甚至在某些区域重叠。当然，您不必将自己局限于一个，尤其是如果您将看到一起使用这些守护进程的价值。**