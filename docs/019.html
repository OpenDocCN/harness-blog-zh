<html>
<head>
<title>Simplifying AWS Fargate deployments with Harness | Harness</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>利用Harness | Harness简化AWS Fargate部署</h1>
<blockquote>原文：<a href="https://www.harness.io/blog/aws-fargate-a-cloud-based-container-solution-without-kubernetes#0001-01-01">https://www.harness.io/blog/aws-fargate-a-cloud-based-container-solution-without-kubernetes#0001-01-01</a></blockquote><div><div fs-richtext-element="rich-text" class="blog-rtf w-richtext"><p>集装箱难题并不容易解决。我们刚刚在一个特定的容器编排工具<a href="https://kubernetes.io/"> Kubernetes </a> (K8s)上进行了一个由六部分组成的旅程。在这六个部分中，我们讨论了K8s的谱系、观点和一些用例；但是少了一块。我们并没有过多提及orchestrator和图像/容器所在的实际基础设施。构建支持集群基础设施本身的基础设施是一项复杂的任务；例如，运行您自己的Kubernetes集群的AWS基础设施。<a href="https://aws.amazon.com/fargate/"> AWS Fargate </a>希望通过AWS的处方，消除管理集群技术和运行集群的基础设施的复杂性。Fargate提供了一个服务来编排和打包几个底层的AWS服务，以消除复杂性。</p><h2>Kubernetes是否过于复杂？</h2><p>构建容器映像只是等式的一部分。在花了一些时间整理你的申请后，是时候向世界展示你的努力了。至少你需要一个位置来执行<a href="https://docs.docker.com/engine/reference/run/"> Docker运行</a>或者你选择的容器运行时。利用<a href="https://kubernetes.io"> Kubernetes </a>是一个设计和架构决策。在公共云供应商的基础上运行您自己的Kubernetes集群不仅对Kubernetes本身来说是一个学习曲线，而且确保基础架构对Kubernetes集群来说是谨慎的。费力地处理实例类型、扩展组、存储和网络规则会占用创新的宝贵周期。很有可能需要一些不同的Kubernetes环境。从本地桌面到低级环境，在将应用程序发布之前，在这些环境中构建和测试应用程序。预计将有资源维护Kubernetes集群和Kubernetes的专业知识。AWS拥有<a href="https://aws.amazon.com/eks/">弹性Kubernetes服务(EKS) </a>，这是AWS的托管Kubernetes服务。维护和管理Kubernetes集群，尤其是大规模的集群，可能非常困难。最好的证明是，EKS的AWS仍然运行旧版本的Kubernetes，而不是最新版本；在我写这篇博客的时候，<a href="https://kubernetes.io/blog/2019/06/19/kubernetes-1-15-release-announcement/"> Kubernetes 1.15 </a>已经发布，EKS最新支持的版本是1.13.7 。为了消除Kubernetes的复杂性，Fargate并不基于Kubernetes；这可能会令人感到惊讶，如果今天要建造什么东西的话。</p><h2>Fargate不基于Kubernetes-Hello任务</h2><p>当我在2017年的<a href="https://aws.amazon.com/blogs/aws/aws-fargate/"> AWS re:Invent上第一次听说Fargate时，我立即假设Kubernetes在组合中的某个位置，并一直在Fargate材料中寻找K8s标志。这是AWS提供的继</a><a href="https://aws.amazon.com/ecs/">弹性集装箱服务(ECS) </a>和EKS【或者第四，如果你算上<a href="https://aws.amazon.com/elasticbeanstalk/">弹性豆茎</a>】之后的第三个集装箱服务，我很惊讶Kubernetes没有更靠前和居中。不管你喜欢它还是讨厌它，自从2015年夏天发布以来，弹性容器服务(ECS)就是Fargate背后的命脉，因为Fargate是ECS上的<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/launch_types.html">发布类型</a>。有关于EKS在法盖特的谈话，但是目前两者之间还没有本土的融合。当利用ECS时，任务定义是一个主要概念。Fargate和ECS的资源定义语言是任务定义。通过填充<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html">任务定义参数</a>，创建<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/create-task-definition.html">任务定义JSON </a>非常简单。如果利用Fargate，可以使用的任务定义是有限制的，这在<a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html">中有很好的记录</a>。</p><p>任务定义可以直接在Harness中创建。当利用几个AWS容器产品中的一个时，当然有选择和意见。</p><h2>建设者有选择；纯ECS vs EKS vs法盖特</h2><p>在2018年的<a href="https://reinvent.awsevents.com/"> AWS re:Invent </a>期间，AWS开始大量使用“建设者”一词。<a href="https://www.zdnet.com/article/aws-says-so-long-developers-and-hello-builders/">互联网上充斥着关于开发商vs .建筑商的辩论</a>，但是AWS创造了期待即时基础设施的新一代人。如果你以前没有在<a href="https://aws.amazon.com/ec2/"> EC2 </a>(又名纯ECS)、EKS或Fargate上使用ECS，一个很好的学习策略是从最新的开始，然后向后学习。AWS的Abby Fuller有一个很棒的视频深入介绍了Fargate提供的内容。以此为基准，您可以看到EC2上的ECS和Fargate之间的差异，Totalcloud的文章对此进行了很好的解释；基本上EC2上的ECS比Fargate有更宽的控制平面和更少的规定。如果Kubernetes是你的毒药，那么EKS是你今天的选择，或者利用Kubernetes供应商部署到AWS。</p><p>可以选择ECS类型的内置线束平台。[/caption]在Fargate之旅的早期与客户合作，这是Fargate很快变得昂贵的一个常见问题。与任何AWS服务一样，在控制云成本时，了解服务的定价和扩展方式至关重要。<a href="https://www.youtube.com/watch?v=HoXEyXIf6_U">这个由变革代理人制作的视频</a>是我见过的最好的分解三种服务成本的视频。</p><p>Fargate ECS集群示例。像任何现代云供应商一样，当然有选择。创建支持选择的渠道对于现代组织来说至关重要。</p><h2>鱼与熊掌不可兼得</h2><p>Harness平台的最大优势之一是灵活性。想象一下，您的管道可以支持多种基础设施部署模式。线束具有一级<a href="https://docs.harness.io/article/08whoizbps-ecs-deployments-overview"> ECS支持</a>，线束代理可以部署在<a href="https://docs.harness.io/article/wrm6hpyrjl-harness-ecs-delegate#fargate_specs_and_delegates"> Fargate发射类型</a>上。</p><p>Harness Fargate管道示例。[/caption]我们可以浏览一个由我们的销售工程师之一<a href="https://www.linkedin.com/in/gregory-kroon-0a92022/"> Greg Kroon </a>创建的<a href="https://www.linkedin.com/posts/gregory-kroon-0a92022_harness-ecs-aws-activity-6563943618892140544-1ngq">简单而优雅的示例</a>。在这个Fargate部署示例中，我们利用Harness的本机能力来部署到ECS。</p><p>如果您尝试在多个地方运行您的容器，Harness平台可以轻松地提供在<a href="https://docs.harness.io/article/wkvsglxmzy-kubernetes-canary-workflows"> Kubernetes </a>、<a href="https://docs.harness.io/article/7qtpb12dv1-ecs-blue-green-workflows">EC2上的ECS和Fargate中自信地部署/回滚所需的管道。</a>随着更多云服务和协调器的出现，Harness将会为您提供信心，让您相信您的管道将会是强健的。</p></div></div>    
</body>
</html>