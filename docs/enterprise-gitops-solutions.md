# 企业 GitOps | Harness 三大挑战的解决方案

> 原文：<https://www.harness.io/blog/enterprise-gitops-solutions>

GitOps 有望成为下一项突破性技术，越来越受欢迎，很快就会被企业广泛采用。这是我们看到的阻止 GitOps 在企业范围内被采用的三个最大的技术障碍。

随着云、容器和微服务的兴起，软件交付工具和过程变化在过去十年中呈指数增长。在 IT 的所有这些变化中，新兴技术的采用模式是不变的。新技术从个人贡献者开始，在团队层面获得认可，最终导致企业范围的采用。

这方面的两个主要例子是源代码控制(或版本控制)和云计算。二十年来，开发人员通常将代码存储在文件夹和驱动器中。源代码管理首先由处于领先地位的个人采用，然后他们将它引入他们的团队，然后企业组织注意到了这一点，并开始全面标准化源代码控制。

同样，对于云计算，开发人员在早期出于对迟缓的 it 运营团队的失望而开始采用它，以便更快地前进。然后，单个团队开始在每个项目的基础上采用云，现在几乎每个组织都有一个专门的云团队。

我认为 GitOps 也有类似的轨迹，它是一项越来越受欢迎的突破性技术，很快就会被企业广泛采用。

## GitOps 快速介绍

对于那些刚刚接触这个概念的人来说， [GitOps](https://harness.io/blog/gitops) 是一种面向希望简化云原生应用部署的公司的方法。无论是添加防火墙规则、定义 VPC，还是修复 UI 错误，所有这些都应该来自源代码控制的中心层面。

从更高的技术层面来看，GitOps 是一个框架，或者说是一组实践，用于实现云原生应用的持续交付。GitOps 使用声明性语法，并利用 Git 作为单一事实来源来自动化基础设施和应用程序开发，同时考虑 DevOps 最佳实践，为 Kubernetes 部署带来安全性、可靠性和一致性。

虽然 GitOps 作为一个概念已经存在了大约 5 年，这在 IT 界是一段相当长的时间，但它已经从一个范式发展成为一个概念，与 Flux 和 [ArgoCD](https://argo-cd.readthedocs.io/en/stable/) 等工具同义。如果我们必须看看 GitOps 在新兴技术采用曲线上的位置，它已经在团队层面停滞了相当长一段时间。

## 企业 GitOps 挑战

是什么阻碍了 GitOps 成为像云计算一样的真正的企业服务？虽然企业 GitOps 面临着许多挑战，但我们认为阻碍 GitOps 在企业范围内采用的三个最大的技术障碍是:

1.  管理规模
2.  实施[治理](https://harness.io/products/platform/governance)
3.  缺乏信心

让我们仔细看看这些挑战，以及一些允许企业组织大规模采用 GitOps 的解决方案。

### 管理企业 GitOps 的规模

实际上，在单个集群中部署 GitOps 工具并开始与一个小团队一起推动改变是非常容易的。它易于采用是它如此受欢迎的原因之一。尝试在数百个集群和数千名开发人员中实现大规模的 GitOps 方法非常具有挑战性。大规模地做 GitOps 不是一件容易的事情，大多数 GitOps 工具都生活在一个“神奇的世界”中，所有东西都在一个运行于 Kubernetes 的容器中。在企业中，GitOps 必须能够与 Kuberetes 之外的服务共存，并且能够跨各种平台伸缩。

#### GitOps 如何为企业进行扩展

简单地说，GitOps 不能再在一个岛上存在了。就像 20 年前坐在我桌子下面的源代码控制服务器一样，运行定制的 GitOps 模式不再是可持续的。GitOps 需要成为一流的企业服务，与 CI/CD 管道实现本机统一。企业需要能够大规模管理 GitOps。GitOps 服务需要能够与管道部署的服务共存，尤其是存在于 Kubernetes 领域之外的云服务。

### 对企业 GitOps 实施治理

治理对于任何自动化工具来说都是一个挑战。一旦你有能力复制大规模的变化，伴随着强大的力量而来的是巨大的责任。不幸的是，大多数本土 GitOps 实现或开源解决方案中并没有包含很多治理功能。重要的是要确保没有新的安全漏洞随着 GitOps 引起的变化而引入，并且任何寻求采用 GitOps 方法的企业都应该考虑基于策略的治理。企业级 GitOps 无法绕过变更管理和安全性。

#### 利用企业 GitOps 解决治理问题

共享服务困境是当今企业 IT 面临的最大问题之一。简单地说，共享服务团队希望在不牺牲安全性和可靠性的情况下，尽可能地增强开发人员的能力。解决这一困境的现代方法是通过将[策略作为代码](https://harness.io/blog/harness-policy-as-code)来实现基于策略的治理。现代治理的标准是[开放政策代理](https://www.openpolicyagent.org/) (OPA)，这是一个 CNCF 支持的项目。基于策略的治理需要嵌入到任何软件交付过程中；这不可能是事后的想法。

### 对企业 it 运营缺乏信心

您有多大信心认为您将要做出的改变不会对您的客户产生负面影响？这个基本问题是为什么 Harness 发明了[连续验证](https://harness.io/blog/continuous-verification-demystified)的概念，以在 AI/ML 的帮助下自动验证部署健康。缺乏信心是发布延迟的首要原因，也是团队在晚上和周末工作到很晚的原因。GitOps 是一个令人惊叹的新范例，但它没有解决给 DevOps 工程师的生活带来如此多辛劳的基本信心问题。

#### 为企业的 GitOps 注入信心

虽然基于策略的治理可以确保安全、测试和变更管理策略得到实施，但是只有持续的验证才能动态地确保变更不会影响客户体验。带有遗留发布策略和手工验证的 gitop 不是真正的 gitop。这就像把一个整体放在一个容器里，就像一个微服务一样。

## 使用 Harness 为企业扩展您的 GitOps

GitOps 是当今 DevOps 中最令人兴奋的趋势之一，这是有充分理由的:作为基于容器的[持续集成](https://harness.io/blog/what-is-continuous-integration)和[持续交付](https://harness.io/blog/what-is-continuous-delivery)的唯一真实来源，GitOps 允许开发团队提高速度和改善系统可靠性。

GitOps 已经到了需要被当作真正的企业服务来对待的地步。将 GitOps 与 CI/CD 相统一、集成的基于策略的治理和持续验证是任何企业 GitOps 产品的三个基本要求。

Harness 提供[连续交付& GitOps-as-a-Service](https://harness.io/products/continuous-delivery) ，构建于广受欢迎的云计算原生计算基金会(CNCF)孵化的开源 Argo CD 项目之上，以企业级的安全性、治理和可扩展性交付开发人员喜爱的闪电般的快速部署和轻量级操作。

无论你在 GitOps 之旅的哪个阶段，从最初的探索到经验丰富的专业人士，我们希望这篇博客对你有所帮助。如果您想看看 GitOps-as-a-Service 与 Harness 的结合，[请求一个演示](https://harness.io/gitops-beta/)来看看我们是如何应对这些挑战的。